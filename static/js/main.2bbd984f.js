!function(){var e={940:function(e,n,t){"use strict";var r=t(72791),a=t(54164),s=t(16030),c=t(37762),i=t(93433),l=t(15861),o=t(29439),u=t(87757),d=t.n(u),f=t(1413),p=t(72426),h=t.n(p),x="app/SET_ACCOUNT",m="app/SET_FREECPU",v="app/SET_VIP",b="app/SET_NODECONFIG",g="app/SET_WORKS",k="app/SET_ASSETS",j="app/SET_GLOBAL",Z="app/SET_LOG",w="app/CLEAR_LOG",y="app/SET_NFTS",C="app/SET_RENT_NFTS",S="app/SET_ALL_NFTS",N="app/SET_UPDATE_TAB",P="app/SET_LOAD_OPTIONS",T="app/SET_LAST_VERSION",O="app/SET_SORT",D=function(e){return{type:x,payload:e}},E=function(e){return{type:m,payload:e}},_=function(e){return{type:b,payload:e}},I=function(e){return{type:g,payload:e}},R=function(e){return{type:k,payload:e}},A=function(e){return{type:j,payload:e}},F=function(e){return{type:Z,payload:e}},z=function(){return{type:w}},L=function(e){return{type:y,payload:e}},Y=function(e){return{type:C,payload:e}},G=function(e,n){return{type:S,payload:{nfts:e,rentNfts:n}}},U=function(e){return{type:N,payload:e}},B=function(e,n){return{type:P,payload:{myLoadOptions:e,marketLoadOptions:n}}},H=function(e){return{type:T,payload:e}},M=function(e){return{type:O,payload:e}},J=JSON.parse(localStorage.getItem("nodeConfig")),W=JSON.parse(localStorage.getItem("freeCpu")),q=JSON.parse(localStorage.getItem("log")),V=JSON.parse(localStorage.getItem("myLoadOptions")),K=JSON.parse(localStorage.getItem("marketLoadOptions")),Q=JSON.parse(localStorage.getItem("lastVersion")),X=JSON.parse(localStorage.getItem("sort")),$={harvestSort:0,harvestSortUp:"#bfbfbf",harvestSortDown:"#bfbfbf",levelSort:0,levelSortUp:"#bfbfbf",levelSortDown:"#bfbfbf",produceSort:0,produceSortUp:"#bfbfbf",produceSortDown:"#bfbfbf",countDownSort:0,countDownSortUp:"#bfbfbf",countDownSortDown:"#bfbfbf"},ee={account:{},freeCpu:W||!1,vip:{state:!1,dbc:0,pdd:0,sum:0},nodeConfig:{name:J?J.name:"TP",protocol:J?J.protocol:"https",host:J?J.host:"eospush.tokenpocket.pro",port:J?J.port:"443",url:J?J.url:"https://eospush.tokenpocket.pro",blockchain:J?J.blockchain:"eos",chainId:J?J.chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},works:[],assets:{},global:{rent_fee:"0.0000 DCASH",service_fee:"0.0000 DCASH",reward_fee:"0.0000 DCASH"},chinese:{WHEAT:"\u5c0f\u9ea6",CORN:"\u7389\u7c73",CARROT:"\u841d\u535c",MILK:"\u725b\u5976",EGG:"\u9e21\u86cb",WOOL:"\u7f8a\u6bdb",BREAD:"\u9762\u5305",COOKIE:"\u66f2\u5947",CAKE:"\u86cb\u7cd5",DCASH:"\u7eff\u949e",COWFOOD:"\u725b\u9972\u6599",CHKFOOD:"\u9e21\u9972\u6599",SHPFOOD:"\u7f8a\u9972\u6599",SUGCANE:"\u7518\u8517",COTTON:"\u68c9\u82b1",SUGAR:"\u7802\u7cd6",SYRUP:"\u7cd6\u6d46",CARAMEL:"\u7126\u7cd6",CLOTH:"\u68c9\u5e03",YARN:"\u7eba\u7eb1",SILK:"\u4e1d\u7ef8",SHIRT:"\u886c\u886b",SWEATER:"\u6bdb\u8863",COAT:"\u5916\u5957",RUBY:"\u7ea2\u5b9d\u77f3",BERYL:"\u7eff\u5b9d\u77f3",TOPAZ:"\u9ec4\u7389",AMTHYST:"\u7d2b\u6c34\u6676",BERRY:"\u8349\u8393",COCOS:"\u53ef\u53ef",TOMATO:"\u897f\u7ea2\u67ff",CREAM:"\u5976\u6cb9",CHEESE:"\u5976\u916a",BUTTER:"\u9ec4\u6cb9",YOGURT:"\u9178\u5976",ICREAM:"\u51b0\u6dc7\u6dcb",ILOLLY:"\u51b0\u68d2",FROYO:"\u51bb\u9178\u5976",VOICE:"\u5c0f\u5587\u53ed",LAND:"\u4f53\u9a8c\u5361",FTZ:"\u5316\u80a5",CHIP:"\u788e\u7247",USDC:"USDC",DFG:"DFG",TAG:"TAG"},nftChinese:{land:"\u571f\u5730",gemfactory:"\u5b9d\u77f3\u5de5\u5382",feedmill:"\u9972\u6599\u5382",cow:"\u5976\u725b",bakery:"\u9762\u5305\u574a",textilemill:"\u7eba\u7ec7\u5382",sugarmill:"\u5236\u7cd6\u5382",tailorshop:"\u88c1\u7f1d\u5e97",sheep:"\u7ef5\u7f8a",chicken:"\u9e21",dairyshop:"\u4e73\u5236\u54c1\u5e97",icecreamshop:"\u51b0\u6dc7\u6dcb\u5e97"},nftEnglish:{"\u571f\u5730":"land","\u5b9d\u77f3\u5de5\u5382":"gemfactory","\u9972\u6599\u5382":"feedmill","\u5976\u725b":"cow","\u9762\u5305\u574a":"bakery","\u7eba\u7ec7\u5382":"textilemill","\u5236\u7cd6\u5382":"sugarmill","\u88c1\u7f1d\u5e97":"tailorshop","\u7ef5\u7f8a":"sheep","\u9e21":"chicken","\u4e73\u5236\u54c1\u5e97":"dairyshop","\u51b0\u6dc7\u6dcb\u5e97":"icecreamshop"},log:q||[],delay:5e3,nfts:{land:[],gemfactory:[],feedmill:[],sugarmill:[],textilemill:[],tailorshop:[],bakery:[],cow:[],sheep:[],chicken:[],dairyshop:[],icecreamshop:[]},rentNfts:{land:[],gemfactory:[],feedmill:[],sugarmill:[],textilemill:[],tailorshop:[],bakery:[],cow:[],sheep:[],chicken:[],dairyshop:[],icecreamshop:[]},updateTab:"0",myLoadOptions:V||["land","gemfactory","feedmill","cow","bakery","textilemill","sugarmill","tailorshop","sheep","chicken","dairyshop","icecreamshop"],marketLoadOptions:K||["land","gemfactory","feedmill","cow","bakery","textilemill","sugarmill","tailorshop","sheep","chicken","dairyshop","icecreamshop"],lastVersion:Q||"",sort:X?(0,f.Z)((0,f.Z)({},$),X):$};var ne=t(50419),te=t(13085),re=t(90785),ae=t(93347),se=t(87309),ce=t(37382),ie=t(40743),le=t(32014),oe=t(75594),ue=t(37083),de=t(97682),fe=t(65650),pe=t(87147),he=t(96324),xe=t(15671),me=t(43144),ve=t(87692),be=t(76454),ge=t(69342),ke=t.n(ge),je=t(87781),Ze="sys/SET_SYS",we={sys:""};var ye=(0,je.UY)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case x:return(0,f.Z)((0,f.Z)({},e),{},{account:n.payload});case m:return localStorage.setItem("freeCpu",JSON.stringify(n.payload)),(0,f.Z)((0,f.Z)({},e),{},{freeCpu:n.payload});case v:return(0,f.Z)((0,f.Z)({},e),{},{vip:n.payload});case b:return localStorage.setItem("nodeConfig",JSON.stringify(n.payload)),(0,f.Z)((0,f.Z)({},e),{},{nodeConfig:n.payload});case g:return(0,f.Z)((0,f.Z)({},e),{},{works:n.payload});case k:return(0,f.Z)((0,f.Z)({},e),{},{assets:n.payload});case j:return(0,f.Z)((0,f.Z)({},e),{},{global:n.payload});case y:return(0,f.Z)((0,f.Z)({},e),{},{nfts:(0,f.Z)({},n.payload)});case C:return(0,f.Z)((0,f.Z)({},e),{},{rentNfts:(0,f.Z)({},n.payload)});case S:return(0,f.Z)((0,f.Z)({},e),{},{nfts:(0,f.Z)({},n.payload.nfts),rentNfts:(0,f.Z)({},n.payload.rentNfts)});case Z:return e.log.unshift(h()().format("hh:mm:ss ")+n.payload),localStorage.setItem("log",JSON.stringify(e.log)),(0,f.Z)((0,f.Z)({},e),{},{log:e.log});case w:return localStorage.setItem("log",JSON.stringify([])),(0,f.Z)((0,f.Z)({},e),{},{log:[]});case N:return(0,f.Z)((0,f.Z)({},e),{},{updateTab:n.payload});case P:return localStorage.setItem("myLoadOptions",JSON.stringify(n.payload.myLoadOptions)),localStorage.setItem("marketLoadOptions",JSON.stringify(n.payload.marketLoadOptions)),(0,f.Z)((0,f.Z)({},e),{},{myLoadOptions:n.payload.myLoadOptions,marketLoadOptions:n.payload.marketLoadOptions});case T:return localStorage.setItem("lastVersion",JSON.stringify(n.payload)),(0,f.Z)((0,f.Z)({},e),{},{lastVersion:n.payload});case O:return localStorage.setItem("sort",JSON.stringify(n.payload)),(0,f.Z)((0,f.Z)({},e),{},{sort:(0,f.Z)((0,f.Z)({},$),n.payload)});default:return e}},sys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,n=arguments.length>1?arguments[1]:void 0;return n.type===Ze?(0,f.Z)((0,f.Z)({},e),{},{sys:n.payload}):e}}),Ce=(0,je.MT)(ye),Se=t(74569),Ne=t.n(Se),Pe=(t(19778).Buffer,t(37502),2e3);function Te(e){return new Promise((function(n,t){return setTimeout(n,e)}))}function Oe(e){return De.apply(this,arguments)}function De(){return(De=(0,l.Z)(d().mark((function e(n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.then((function(e){if(200!==e.status)throw console.log(e),new Error("status code is ".concat(e.status));return[null,e.data]})).catch((function(e){return e instanceof Error?(console.log(e.message),[e.message,null]):e.response?(console.log(e.response),[JSON.stringify(e.response.data),null]):e.request?(console.log("no response"),["no response",null]):(console.log(e),"object"==typeof e?[JSON.stringify(e),null]:[e,null])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e){return _e.apply(this,arguments)}function _e(){return(_e=(0,l.Z)(d().mark((function e(n){var t,r,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,r=null,e.next=3,Oe(Ne().get("".concat(n,"/v1/chain/get_info"),{timeout:1e4}));case 3:return a=e.sent,s=(0,o.Z)(a,2),t=s[0],r=s[1],e.abrupt("return",[t,r]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(){return Re.apply(this,arguments)}function Re(){return(Re=(0,l.Z)(d().mark((function e(){var n,t,r,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,t=null,r=0;case 2:if(!(r<3)){e.next=18;break}return e.next=5,Oe(Ne().get("https://api.yfc.one/dfs/common/get_price"));case 5:if(a=e.sent,s=(0,o.Z)(a,2),n=s[0],!(t=s[1])){e.next=13;break}return e.abrupt("return",[n,t]);case 13:return e.next=15,Te(Pe);case 15:r++,e.next=2;break;case 18:return e.abrupt("return",[n,t]);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c,i,l,u,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=1,r=null,a=null,s=0;case 3:if(!(s<t)){e.next=24;break}return e.next=6,Oe(Ne().post("https://api.yfc.one/account/pushaction2",n));case 6:if(c=e.sent,i=(0,o.Z)(c,2),r=i[0],!(a=i[1])||200!==a.code){e.next=14;break}return e.abrupt("return",[r,a]);case 14:if(!a||200===a.code){e.next=19;break}return l=JSON.parse(a.msg),u=l.error.code,f=l.error.details[0].message,e.abrupt("return",[u+" "+f,null]);case 19:return e.next=21,Te(Pe);case 21:s++,e.next=3;break;case 24:return e.abrupt("return",[r,a]);case 25:case"end":return e.stop()}}),e)}))),Fe.apply(this,arguments)}ve.default.plugins(new be.Z);var ze=function(){function e(){(0,xe.Z)(this,e),this.scatter=ve.default,this.appName="DApp",this.logined=!1,this.connected=!1,this.network=null,this.api=null,this.rpc=null,this.try=3,this.delay=2e3}return(0,me.Z)(e,[{key:"sleep",value:function(e){return new Promise((function(n,t){return setTimeout(n,e)}))}},{key:"check",value:function(){return!(!this.logined||!this.connected)}},{key:"awaitWrap",value:function(){var e=(0,l.Z)(d().mark((function e(n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.then((function(e){return[null,e]})).catch((function(e){return e instanceof Error?(console.log(e.message),[e.message,null]):e.hasOwnProperty("type")?(console.log(e),[e.message,null]):(console.log(e),"object"==typeof e?[JSON.stringify(e),null]:[e,null])})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},{key:"isJSON",value:function(e){if("string"==typeof e)try{var n=JSON.parse(e);return!("object"!=typeof n||!n)}catch(t){return!1}}},{key:"connect",value:function(){return this.awaitWrap(ve.default.connect(this.appName,{network:this.network}))}},{key:"login",value:function(){return this.awaitWrap(ve.default.login())}},{key:"init",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c,i,l,u,f,p,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ce.getState().app.nodeConfig,this.network=ve.default.Network.fromJson({blockchain:t?t.blockchain:"eos",chainId:t?t.chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906",host:t?t.host:"eospush.tokenpocket.pro",port:t?t.port:"443",protocol:t?t.protocol:"https"}),r=null,a=null,s=!1,"undefined"!==typeof n&&(this.appName=n),c=0;case 6:if(!(c<10)){e.next=26;break}return e.next=9,this.connect(n);case 9:if(i=e.sent,l=(0,o.Z)(i,2),r=l[0],!(a=l[1])){e.next=20;break}return s=!0,this.connected=!0,console.log("connect pass"),e.abrupt("break",26);case 20:console.log("connect fail");case 21:return e.next=23,this.sleep(1e3);case 23:c++,e.next=6;break;case 26:if(s){e.next=29;break}return console.log("connect fail, over max try time"),e.abrupt("return",["connect fail, over max try time",null]);case 29:return this.api=ve.default.eos(this.network,ke()),e.next=32,this.login();case 32:return u=e.sent,f=(0,o.Z)(u,2),r=f[0],(a=f[1])?(console.log("login pass"),this.logined=!0,p=ve.default.account("eos"),h={name:p.name,permissions:p.authority,publicKey:p.publicKey},Ce.dispatch(D(h))):console.log("login fail"),e.abrupt("return",[r,a]);case 38:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"transact",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.check()){e.next=2;break}return e.abrupt("return",["no connect and login",null]);case 2:if(!Ce.getState().app.freeCpu){e.next=5;break}return e.abrupt("return",this.transactFree(n));case 5:return t=null,r=null,e.next=8,this.awaitWrap(this.api.transaction(n,{blocksBehind:3,expireSeconds:30}));case 8:if(a=e.sent,s=(0,o.Z)(a,2),t=s[0],r=s[1],!(t&&this.isJSON(t)&&JSON.parse(t).hasOwnProperty("error"))){e.next=14;break}return e.abrupt("return",[JSON.parse(t).error.details[0].message,r]);case 14:return e.abrupt("return",[t,r]);case 15:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"transactFree",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c,i,l,u,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={tx:n,txh:t={blocksBehind:3,expireSeconds:120}},a=Ce.getState().app.account.name,n.actions.unshift({account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"yfcmonitor11",permission:"active"}],data:{user:a}}),s=null,c=null,e.next=7,this.awaitWrap(this.api.transaction(n,(0,f.Z)((0,f.Z)({},t),{},{sign:!0,broadcast:!1})));case 7:if(i=e.sent,l=(0,o.Z)(i,2),s=l[0],c=l[1],!s){e.next=15;break}if(!this.isJSON(s)||!JSON.parse(s).hasOwnProperty("error")){e.next=14;break}return e.abrupt("return",[JSON.parse(s).error.details[0].message,c]);case 14:return e.abrupt("return",[s,c]);case 15:return(p=(u=c).transaction.transaction).signatures=u.transaction.signatures,p.context_free_data=[],r.sign_data=p,e.abrupt("return",Ae(r));case 21:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getTableRows",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getTableRows(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"abiBinToJson",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.abiBinToJson(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"abiJsonToBin",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.abiJsonToBin(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getAbi",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getAbi(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getAccount",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getAccount(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getBlockHeaderState",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getBlockHeaderState(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getBlock",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getBlock(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getCode",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getCode(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getCodeHash",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getCodeHash(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getCurrencyBalance",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getCurrencyBalance(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getCurrencyStats",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getCurrencyStats(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getInfo",value:function(){var e=(0,l.Z)(d().mark((function e(){var n,t,r,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,t=null,r=0;case 2:if(!(r<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getInfo());case 5:if(a=e.sent,s=(0,o.Z)(a,2),n=s[0],!(t=s[1])){e.next=13;break}return e.abrupt("return",[n,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:r++,e.next=2;break;case 18:return e.abrupt("return",[n,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProducerSchedule",value:function(){var e=(0,l.Z)(d().mark((function e(){var n,t,r,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,t=null,r=0;case 2:if(!(r<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getProducerSchedule());case 5:if(a=e.sent,s=(0,o.Z)(a,2),n=s[0],!(t=s[1])){e.next=13;break}return e.abrupt("return",[n,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:r++,e.next=2;break;case 18:return e.abrupt("return",[n,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProducers",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getProducers(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getRawCodeAndAbi",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getRawCodeAndAbi(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getScheduledTransactions",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getScheduledTransactions(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getRequiredKeys",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getRequiredKeys(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getKeyAccounts",value:function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,r=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getKeyAccounts(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),t=c[0],!(r=c[1])){e.next=13;break}return e.abrupt("return",[t,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[t,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()}]),e}(),Le=new ze,Ye=t(4980),Ge=t(10283),Ue=t(50881),Be=t(80184);function He(e){var n=(0,s.I0)(),t=(0,s.v9)((function(e){return e.app.nodeConfig})),a=(0,r.useState)(!1),c=(0,o.Z)(a,2),i=c[0],u=c[1],f=(0,r.useState)(0),p=(0,o.Z)(f,2),x=p[0],m=p[1],v=(0,r.useRef)(i),b=(0,r.useRef)(0),g=(0,r.useRef)([{index:0,name:"Eosflare",protocol:"https",host:"api.eosflare.io",port:"443",url:"https://api.eosflare.io",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:1,name:"TP",protocol:"https",host:"eospush.tokenpocket.pro",port:"443",url:"https://eospush.tokenpocket.pro",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:2,name:"Fwnw",protocol:"https",host:"api.fwnw.com",port:"443",url:"https://api.fwnw.com",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:3,name:"Sweden",protocol:"https",host:"api.eossweden.se",port:"443",url:"https://api.eossweden.se",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:4,name:"EOSNation",protocol:"https",host:"api.eosn.io",port:"443",url:"https://api.eosn.io",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:5,name:"Greymass",protocol:"https",host:"eos.greymass.com",port:"443",url:"https://eos.greymass.com",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:6,name:"StartEos",protocol:"https",host:"api-mainnet.starteos.io",port:"443",url:"https://api-mainnet.starteos.io",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:7,name:"Laomao",protocol:"https",host:"api.eoslaomao.com",port:"443",url:"https://api.eoslaomao.com",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:8,name:"Scatter(\u5899)",protocol:"https",host:"nodes.get-scatter.com",port:"443",url:"https://nodes.get-scatter.com",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:9,name:"Newdex(\u5899)",protocol:"https",host:"eos.newdex.one",port:"443",url:"https://eos.newdex.one",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"}]),k=(0,r.useReducer)((function(e){return!e}))[1];console.log("NodeSet render"),(0,r.useEffect)((function(){u(e.visible)}),[e.visible]);var j=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.url,r=h()().valueOf(),e.next=4,Ee(t);case 4:if(a=e.sent,s=(0,o.Z)(a,1),!s[0]){e.next=11;break}return n.delay=9999,v.current&&setTimeout(j,2e3,n),e.abrupt("return");case 11:c=h()().valueOf()-r,n.delay=c,v.current&&setTimeout(j,2e3,n);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]),Z=(0,r.useCallback)((function(){for(var e=0;e<g.current.length;e++)if(g.current[e].name===t.name){m(e);break}g.current.forEach((function(e){e.delay=void 0,j(e)}))}),[t,j]),w=(0,r.useCallback)((function(){u(!1),e.handleCloseDialog()}),[e]),y=(0,r.useCallback)((function(){var t=g.current[x];u(!1),n(_(t)),Le.init(),e.handleCloseDialog()}),[e,x,n]),C=(0,r.useCallback)((function(e){m(e.target.value)}),[]);return(0,r.useEffect)((function(){v.current=i,i?(Z(),b.current=setInterval((function(){k()}),2e3)):clearInterval(b.current)}),[i,Z,k]),(0,Be.jsx)(Ye.Z,{title:"\u8282\u70b9\u8bbe\u7f6e",visible:i,width:"94%",style:{top:"5px"},bodyStyle:{padding:"0px 24px",overflowY:"scroll",height:"445px"},onOk:y,onCancel:w,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,Be.jsx)(Ge.ZP,{dataSource:g.current,renderItem:function(e){return(0,Be.jsx)(Ge.ZP.Item,{children:(0,Be.jsx)(Ue.ZP.Group,{onChange:C,value:x,children:(0,Be.jsx)(Ue.ZP,{value:e.index,children:(0,Be.jsxs)("div",{className:"ml-15",style:{width:"250px"},children:[(0,Be.jsxs)("div",{children:[(0,Be.jsx)("span",{className:"rmr-2",children:e.name}),e.delay<1e3&&(0,Be.jsxs)("span",{className:"text-green",children:[e.delay||"-","ms"]}),e.delay<3e3&&e.delay>=1e3&&(0,Be.jsxs)("span",{className:"color-warning",children:[e.delay||"-","ms"]}),(e.delay>=3e3||!e.delay)&&(0,Be.jsxs)("span",{className:"text-red",children:[e.delay||"- ","ms"]})]}),(0,Be.jsx)("div",{className:"text-secondary",children:e.host})]})})})})}})})}var Me=(0,r.memo)(He),Je=t(83099),We=t(50696),qe=t(14598),Ve=t(90398),Ke=t(73142),Qe=t.n(Ke);function Xe(e){return-1!==e.indexOf("101")?"101 - assetid is producing":-1!==e.indexOf("102")?"102 - assetid is already exist":-1!==e.indexOf("201")?"201 - assetid_array must > 0":-1!==e.indexOf("202")?"202 - assetid cannot be found":-1!==e.indexOf("203")?"203 - assetid is not yours":-1!==e.indexOf("204")?"204 - assetid is producing":-1!==e.indexOf("301")?"301 - no exist workid":-1!==e.indexOf("302")?"302 - no exist assetid":-1!==e.indexOf("303")?"303 - round is not range 1-12":-1!==e.indexOf("701")?"701 - no exist assetid":-1!==e.indexOf("702")?"702 - round is not range 1-12":-1!==e.indexOf("401")?"401 - no exist taskid in tasks table":-1!==e.indexOf("402")?"402 - the harvest time is not reached":-1!==e.indexOf("403")?"403 - no exist assetid in assets table":-1!==e.indexOf("404")?"404 - the harvest reward time is not reached":-1!==e.indexOf("501")?"501 - renting is not right":-1!==e.indexOf("502")?"502 - no exist assetid":-1!==e.indexOf("503")?"503 - assetid is not yours":-1!==e.indexOf("601")?"601 - no exist account in balances table":-1!==e.indexOf("10001")?"10001 - no exist taskid in tasks table":-1!==e.indexOf("10002")?"10002 - the harvest time is not reached":-1!==e.indexOf("10003")?"10003 - no exist taskid in tasks table":-1!==e.indexOf("20001")?"20001 - assetid is producting":-1!==e.indexOf("20002")?"20002 - assetid is not to be rented":-1!==e.indexOf("20003")?"20003 - assetid is over rental time":-1!==e.indexOf("20004")?"20004 - collection is not right":-1!==e.indexOf("30001")?"30001 - asset number it not right":-1!==e.indexOf("30002")?"30002 - transfer contract is not dfsfarmitems":-1!==e.indexOf("30003")?"30003 - action is not transfer":-1!==e.indexOf("30004")?"30004 - auth actor is not right":-1!==e.indexOf("30005")?"30005 - transfer param error":-1!==e.indexOf("30006")?"30006 - transfer param error":-1!==e.indexOf("30007")?"30007 - transfer param error":-1!==e.indexOf("40001")?"40001 - assetid number it not right":-1!==e.indexOf("40002")?"40002 - transfer contract is not dfsnftassets":-1!==e.indexOf("40003")?"40003 - action is not transfer":-1!==e.indexOf("40004")?" 40004 - auth actor is not right":-1!==e.indexOf("40005")?"40005 - transfer param error":-1!==e.indexOf("50001")?"50001 - assetid cannot be found":-1!==e.indexOf("50002")?"50002 - assetid owner is not _self":e}function $e(e){var n=e.curCard,t=(0,s.I0)(),a=(0,s.v9)((function(e){return e.app.account})),c=(0,s.v9)((function(e){return e.app.works})),i=(0,s.v9)((function(e){return e.app.assets})),u=(0,s.v9)((function(e){return e.app.chinese})),f=(0,r.useState)(!1),p=(0,o.Z)(f,2),x=p[0],m=p[1],v=(0,r.useRef)(x),b=(0,r.useRef)(!1),g=(0,r.useState)(1),k=(0,o.Z)(g,2),j=k[0],Z=k[1],w=(0,r.useState)(1),y=(0,o.Z)(w,2),C=y[0],S=y[1],N=(0,r.useState)(12),P=(0,o.Z)(N,2),T=P[0],O=P[1],D=(0,r.useState)(!1),E=(0,o.Z)(D,2),_=E[0],I=E[1],R=(0,r.useRef)([]);console.log("ProduceModal2 render"),(0,r.useEffect)((function(){m(e.visible)}),[e.visible]);var A=(0,r.useCallback)((0,l.Z)(d().mark((function e(){var n,t,r,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie();case 2:if(n=e.sent,t=(0,o.Z)(n,2),r=t[0],a=t[1],!r){e.next=9;break}return ne.ZP.error("\u83b7\u53d6\u4ef7\u683c\u5931\u8d25",5),e.abrupt("return");case 9:a.forEach((function(e){"USDC"===e.coin?R.current[0]=e.price:"DFG"===e.coin?R.current[1]=e.price:"TAG"===e.coin&&(R.current[2]=e.price)}));case 10:case"end":return e.stop()}}),e)}))),[]),z=(0,r.useCallback)((0,l.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("gemfactory"!==n.collection){e.next=6;break}return e.next=3,A();case 3:Z("RUBY"),e.next=7;break;case 6:"land"===n.collection?Z(1):"cow"===n.collection?Z(7):"chicken"===n.collection?Z(8):"sheep"===n.collection?Z(9):"feedmill"===n.collection?Z(4):"bakery"===n.collection?Z(10):"textilemill"===n.collection?Z(18):"sugarmill"===n.collection?Z(15):"tailorshop"===n.collection?Z(21):"dairyshop"===n.collection?Z(28):"icecreamshop"===n.collection&&Z(32);case 7:S(n.level);case 8:case"end":return e.stop()}}),e)}))),[A,n]),L=(0,r.useCallback)((function(){I(!1),m(!1),e.handleCloseDialog(!1)}),[e]),Y=(0,r.useCallback)((0,l.Z)(d().mark((function r(){var s,c,i,l,u,f,p,h,x,v;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!b.current){r.next=3;break}return ne.ZP.error("\u8d44\u4ea7\u4e0d\u8db3",5),r.abrupt("return");case 3:return s=a.name,c=a.permissions,i="",l="",u="","RUBY"===j?(i=Qe()(C).mul(T).div(R.current.price[0]).toFixed(4,3)+" USDC",l=C.toFixed(4)+" "+j,u="usdxusdxusdx"):"BERYL"===j?(i=Qe()(C).mul(T).div(R.current.price[1]).toFixed(4,3)+" DFG",l=C.toFixed(4)+" "+j,u="dfxtokenmain"):"TOPAZ"===j&&(i=Qe()(C).mul(T).div(R.current.price[2]).toFixed(8,3)+" TAG",l=C.toFixed(4)+" "+j,u="tagtokenmain"),f={actions:[{account:u,name:"transfer",authorization:[{actor:s,permission:c}],data:{from:s,to:"dfsmetaverse",quantity:i,memo:"deposit"}},{account:"dfsmetaverse",name:"makegem2",authorization:[{actor:s,permission:c}],data:{user:s,assetid:n.id,gem:l,round:T}}]},I(!0),r.next=13,Le.transact(f);case 13:if(p=r.sent,h=(0,o.Z)(p,2),x=h[0],v=h[1],!x){r.next=23;break}return ne.ZP.error(Xe(x.toString()),5),console.log(x),I(!1),t(F(Xe(x.toString()))),r.abrupt("return");case 23:v&&(I(!1),ne.ZP.success("Success"),m(!1),e.handleCloseDialog(!0),console.log(v));case 24:case"end":return r.stop()}}),r)}))),[j,C,T,a,n,t,e]),G=(0,r.useCallback)((0,l.Z)(d().mark((function r(){var s,i,l,u,f,p,h,x;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c[j-1].id===j){r.next=3;break}return ne.ZP.error("\u5de5\u4f5cid\u9519\u8bef",5),r.abrupt("return");case 3:if(!b.current){r.next=6;break}return ne.ZP.error("\u8d44\u4ea7\u4e0d\u8db3",5),r.abrupt("return");case 6:return(s=c[j-1].require_asset.slice()).forEach((function(e,n){var t=e.split(" ");t[0]=(parseInt(t[0])*C*T).toFixed(4),s[n]=t[0]+" "+t[1]})),i=a.name,l=a.permissions,u={actions:[]},s.forEach((function(e){u.actions.push({account:"dfsfarmitems",name:"transfer",authorization:[{actor:i,permission:l}],data:{from:i,to:"dfsmetaverse",quantity:e,memo:"deposit"}})})),u.actions.push({account:"dfsmetaverse",name:"produce2",authorization:[{actor:i,permission:l}],data:{user:i,workid:j,assetid:n.id,multiple:C,round:T}}),I(!0),r.next=16,Le.transact(u);case 16:if(f=r.sent,p=(0,o.Z)(f,2),h=p[0],x=p[1],!h){r.next=26;break}return ne.ZP.error(Xe(h.toString()),5),console.log(h),I(!1),t(F(Xe(h.toString()))),r.abrupt("return");case 26:x&&(I(!1),ne.ZP.success("Success"),m(!1),e.handleCloseDialog(!0),console.log(x));case 27:case"end":return r.stop()}}),r)}))),[j,c,C,T,a,n,t,e]),U=(0,r.useCallback)((function(){"RUBY"===j||"BERYL"===j||"TOPAZ"===j?Y():G()}),[G,Y,j]),B=(0,r.useCallback)((function(e){Z(e.target.value)}),[]),H=(0,r.useCallback)((function(e){null!==e&&S(e)}),[]),M=(0,r.useCallback)((function(e){null!==e&&O(e)}),[]),J=function(){if(c.length){var e;e="RUBY"===j||"BERYL"===j||"TOPAZ"===j?7200:c.filter((function(e){return e.id===j}))[0].require_time;var n=h()().add(T*e,"seconds").format().slice(0,-6);return(0,Be.jsx)("span",{children:n})}return(0,Be.jsx)("span",{})},W=function(){if(c.length){var e=[];if("RUBY"===j||"BERYL"===j||"TOPAZ"===j){var n="";"RUBY"===j?n=Qe()(C).mul(T).div(R.current[0]).toFixed(4,3)+" USDC":"BERYL"===j?n=Qe()(C).mul(T).div(R.current[1]).toFixed(4,3)+" DFG":"TOPAZ"===j&&(n=Qe()(C).mul(T).div(R.current[2]).toFixed(8,3)+" TAG");var t=n.split(" ");i[t[1]]-t[0]<0&&e.push(t[1])}else{c[j-1].require_asset.slice().forEach((function(n){var t=n.split(" ");(t[0]=(parseInt(t[0])*C*T).toFixed(4),"undefined"===typeof i[t[1]])?e.push(t[1]):i[t[1]]-t[0]<0&&e.push(t[1])}))}if(0===e.length)return b.current=!1,(0,Be.jsx)("span",{children:"\u65e0"});var r="";return e.forEach((function(e){r+=u[e]+" "})),b.current=!0,(0,Be.jsx)("span",{className:"text-red",children:r+"\u8d44\u4ea7\u4e0d\u8db3"})}return b.current=!1,(0,Be.jsx)("span",{children:"\u65e0"})},q=(0,r.useCallback)((function(){return"land"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:j,children:(0,Be.jsxs)(Je.Z,{direction:"vertical",children:[(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{style:{alignItems:"center"},value:1,children:"\u9ea6\u5b50"}),(0,Be.jsx)(Ue.ZP,{style:{alignItems:"center"},value:2,disabled:n.level<2,children:"\u7389\u7c73"}),(0,Be.jsx)(Ue.ZP,{style:{alignItems:"center"},value:3,disabled:n.level<3,children:"\u80e1\u841d\u535c"}),(0,Be.jsx)(Ue.ZP,{style:{alignItems:"center"},value:13,disabled:n.level<4,children:"\u7518\u8517"})]}),(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:14,disabled:n.level<5,children:"\u68c9\u82b1"}),(0,Be.jsx)(Ue.ZP,{value:25,disabled:n.level<5,children:"\u8349\u8393"}),(0,Be.jsx)(Ue.ZP,{value:27,disabled:n.level<5,children:"\u897f\u7ea2\u67ff"}),(0,Be.jsx)(Ue.ZP,{value:26,disabled:n.level<5,children:"\u53ef\u53ef"})]})]})}):"cow"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:j,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsx)("div",{className:"flexbc",children:(0,Be.jsx)(Ue.ZP,{value:7,children:"\u725b\u5976"})})})}):"chicken"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:j,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsx)("div",{className:"flexbc",children:(0,Be.jsx)(Ue.ZP,{value:8,children:"\u9e21\u86cb"})})})}):"sheep"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:j,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsx)("div",{className:"flexbc",children:(0,Be.jsx)(Ue.ZP,{value:9,children:"\u7ef5\u7f8a"})})})}):"feedmill"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:j,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:4,children:"\u725b\u9972\u6599"}),(0,Be.jsx)(Ue.ZP,{value:5,disabled:n.level<2,children:"\u9e21\u9972\u6599"}),(0,Be.jsx)(Ue.ZP,{value:6,disabled:n.level<3,children:"\u7f8a\u9972\u6599"})]})})}):"bakery"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:j,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:10,children:"\u9762\u5305"}),(0,Be.jsx)(Ue.ZP,{value:11,disabled:n.level<2,children:"\u66f2\u5947"}),(0,Be.jsx)(Ue.ZP,{value:12,disabled:n.level<3,children:"\u86cb\u7cd5"})]})})}):"textilemill"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:j,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:18,children:"\u68c9\u5e03"}),(0,Be.jsx)(Ue.ZP,{value:19,disabled:n.level<2,children:"\u7eba\u7eb1"}),(0,Be.jsx)(Ue.ZP,{value:20,disabled:n.level<3,children:"\u4e1d\u7ef8"})]})})}):"sugarmill"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:j,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:15,children:"\u7802\u7cd6"}),(0,Be.jsx)(Ue.ZP,{value:16,disabled:n.level<2,children:"\u7cd6\u6d46"}),(0,Be.jsx)(Ue.ZP,{value:17,disabled:n.level<3,children:"\u7126\u7cd6"})]})})}):"tailorshop"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:j,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:21,children:"\u886c\u886b"}),(0,Be.jsx)(Ue.ZP,{value:22,disabled:n.level<2,children:"\u6bdb\u8863"}),(0,Be.jsx)(Ue.ZP,{value:23,disabled:n.level<3,children:"\u5916\u5957"})]})})}):"dairyshop"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:j,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:28,children:"\u5976\u6cb9"}),(0,Be.jsx)(Ue.ZP,{value:29,disabled:n.level<2,children:"\u5976\u916a"}),(0,Be.jsx)(Ue.ZP,{value:30,disabled:n.level<3,children:"\u9ec4\u6cb9"}),(0,Be.jsx)(Ue.ZP,{value:31,disabled:n.level<3,children:"\u9178\u5976"})]})})}):"icecreamshop"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:j,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:32,children:"\u51b0\u6dc7\u6dcb"}),(0,Be.jsx)(Ue.ZP,{value:33,disabled:n.level<2,children:"\u51b0\u68d2"}),(0,Be.jsx)(Ue.ZP,{value:34,disabled:n.level<3,children:"\u51bb\u9178\u5976"})]})})}):"gemfactory"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:j,children:(0,Be.jsxs)(Je.Z,{direction:"vertical",children:[(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:"RUBY",children:"\u7ea2\u5b9d\u77f3"}),(0,Be.jsx)(Ue.ZP,{value:"BERYL",children:"\u7eff\u5b9d\u77f3"}),(0,Be.jsx)(Ue.ZP,{value:"TOPAZ",children:"\u9ec4\u7389"})]}),(0,Be.jsx)("div",{className:"flexbc",children:(0,Be.jsx)(Ue.ZP,{value:24,children:"\u7d2b\u6c34\u6676"})})]})}):(0,Be.jsx)(Be.Fragment,{})}),[n,B,j]);return(0,r.useEffect)((function(){v.current=x,x&&z()}),[x,z]),(0,Be.jsx)(Ye.Z,{title:"\u751f\u4ea7\u64cd\u4f5c",visible:x,width:"94%",bodyStyle:{padding:"0px 24px"},onOk:U,onCancel:L,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,Be.jsxs)(ue.Z,{size:"large",spinning:_,children:[(0,Be.jsx)(q,{}),(0,Be.jsxs)("div",{className:"rmt-3 flexsc",children:[(0,Be.jsx)(We.Z,{className:"",value:C,min:1,max:n.level,defaultValue:n.level,addonBefore:"\u6570 \u91cf",onChange:H}),(0,Be.jsx)(se.Z,{disabled:C>=n.level,onClick:function(){return S(C+1)},children:"+"}),(0,Be.jsx)(se.Z,{disabled:C<=1,onClick:function(){return S(C-1)},children:"-"}),(0,Be.jsx)(Ve.Z,{style:{visibility:"hidden"},className:"rml-2"})]}),(0,Be.jsxs)("div",{className:"rmt-3 flexsc",children:[(0,Be.jsx)(We.Z,{className:"",value:T,min:1,max:12,defaultValue:12,addonBefore:"\u5468 \u671f",onChange:M}),(0,Be.jsx)(se.Z,{disabled:T>=12,onClick:function(){return O(T+1)},children:"+"}),(0,Be.jsx)(se.Z,{disabled:T<=1,onClick:function(){return O(T-1)},children:"-"}),(0,Be.jsx)(qe.Z,{placement:"left",title:"CPU\u6d88\u8017\u6bd4\u8f83\u591a\uff0c\u5efa\u8bae\u6bcf\u6b21\u5468\u671f\u90fd\u9009\u6700\u5927\u503c12",trigger:"click",children:(0,Be.jsx)(Ve.Z,{style:{color:"#1890ff"},className:"rml-2"})})]}),(0,Be.jsxs)("div",{className:"rmt-2 flexsc",children:["\u5b8c\u6210\u65f6\u95f4\uff1a",(0,Be.jsx)(J,{})]}),(0,Be.jsxs)("div",{className:"rmt-2 rmb-3 flexsc",children:["\u63d0\u793a\u4fe1\u606f\uff1a",(0,Be.jsx)(W,{})]})]})})}var en=(0,r.memo)($e),nn=t(14923),tn=t(84848);function rn(){console.log("SortList");var e=(0,s.I0)(),n=(0,s.v9)((function(e){return e.app.sort.harvestSort})),t=(0,s.v9)((function(e){return e.app.sort.harvestSortUp})),a=(0,s.v9)((function(e){return e.app.sort.harvestSortDown})),c=(0,s.v9)((function(e){return e.app.sort.levelSort})),i=(0,s.v9)((function(e){return e.app.sort.levelSortUp})),l=(0,s.v9)((function(e){return e.app.sort.levelSortDown})),o=(0,s.v9)((function(e){return e.app.sort.produceSort})),u=(0,s.v9)((function(e){return e.app.sort.produceSortUp})),d=(0,s.v9)((function(e){return e.app.sort.produceSortDown})),f=(0,s.v9)((function(e){return e.app.sort.countDownSort})),p=(0,s.v9)((function(e){return e.app.sort.countDownSortUp})),h=(0,s.v9)((function(e){return e.app.sort.countDownSortDown})),x=(0,s.v9)((function(e){return e.app.nfts})),m=(0,s.v9)((function(e){return e.app.rentNfts})),v=(0,r.useCallback)((function(e){for(var n in x)x[n].length&&(0===e?x[n].sort((function(e,n){return e.id-n.id})):1===e?x[n].sort((function(e,n){var t=e.task.exist-n.task.exist,r=e.task.countDown-n.task.countDown;return 0!==t?-t:0===t?r:0})):2===e&&x[n].sort((function(e,n){var t=e.task.exist-n.task.exist,r=e.task.countDown-n.task.countDown;return 0!==t?t:0===t?r:0})))}),[x]),b=(0,r.useCallback)((function(e){for(var n in m)m[n].length&&(0===e?m[n].sort((function(e,n){return e.id-n.id})):1===e?m[n].sort((function(e,n){var t=e.task.exist-n.task.exist,r=e.task.countDown-n.task.countDown;return 0!==t?-t:0===t?r:0})):2===e&&m[n].sort((function(e,n){var t=e.task.exist-n.task.exist,r=e.task.countDown-n.task.countDown;return 0!==t?t:0===t?r:0})))}),[m]),g=(0,r.useCallback)((function(e){for(var n in x)x[n].length&&(0===e?x[n].sort((function(e,n){return e.id-n.id})):1===e?x[n].sort((function(e,n){var t=e.task.exist-n.task.exist,r=e.task.countDown-n.task.countDown;return 0!==t?t:0===t?r:0})):2===e&&x[n].sort((function(e,n){var t=e.task.exist-n.task.exist,r=e.task.countDown-n.task.countDown;return 0!==t?-t:0===t?r:0})))}),[x]),k=(0,r.useCallback)((function(e){for(var n in m)m[n].length&&(0===e?m[n].sort((function(e,n){return e.id-n.id})):1===e?m[n].sort((function(e,n){var t=e.task.exist-n.task.exist,r=e.task.countDown-n.task.countDown;return 0!==t?t:0===t?r:0})):2===e&&m[n].sort((function(e,n){var t=e.task.exist-n.task.exist,r=e.task.countDown-n.task.countDown;return 0!==t?-t:0===t?r:0})))}),[m]),j=(0,r.useCallback)((function(e){for(var n in x)x[n].length&&(0===e?x[n].sort((function(e,n){return e.id-n.id})):1===e?x[n].sort((function(e,n){return e.task.countDown-n.task.countDown})):2===e&&x[n].sort((function(e,n){return n.task.countDown-e.task.countDown})))}),[x]),Z=(0,r.useCallback)((function(e){for(var n in m)m[n].length&&(0===e?m[n].sort((function(e,n){return e.id-n.id})):1===e?m[n].sort((function(e,n){return e.task.countDown-n.task.countDown})):2===e&&m[n].sort((function(e,n){return n.task.countDown-e.task.countDown})))}),[m]),w=(0,r.useCallback)((function(e){for(var n in x)x[n].length&&(0===e?x[n].sort((function(e,n){return e.id-n.id})):1===e?x[n].sort((function(e,n){return n.level-e.level})):2===e&&x[n].sort((function(e,n){return e.level-n.level})))}),[x]),y=(0,r.useCallback)((function(e){for(var n in m)m[n].length&&(0===e?m[n].sort((function(e,n){return e.id-n.id})):1===e?m[n].sort((function(e,n){return n.level-e.level})):2===e&&m[n].sort((function(e,n){return e.level-n.level})))}),[m]),C=(0,r.useCallback)((function(){0===n?(e(M({harvestSort:1,harvestSortUp:"#1890ff",harvestSortDown:"#bfbfbf"})),v(1),b(1)):1===n?(e(M({harvestSort:2,harvestSortUp:"#bfbfbf",harvestSortDown:"#1890ff"})),v(2),b(2)):2===n&&(e(M({harvestSort:0,harvestSortUp:"#bfbfbf",harvestSortDown:"#bfbfbf"})),v(0),b(0)),e(G(x,m))}),[n,x,m,e,v,b]),S=(0,r.useCallback)((function(){0===c?(e(M({levelSort:1,levelSortUp:"#1890ff",levelSortDown:"#bfbfbf"})),w(1),y(1)):1===c?(e(M({levelSort:2,levelSortUp:"#bfbfbf",levelSortDown:"#1890ff"})),w(2),y(2)):2===c&&(e(M({levelSort:0,levelSortUp:"#bfbfbf",levelSortDown:"#bfbfbf"})),w(0),y(0)),e(G(x,m))}),[c,x,m,e,w,y]),N=(0,r.useCallback)((function(){0===o?(e(M({produceSort:1,produceSortUp:"#1890ff",produceSortDown:"#bfbfbf"})),g(1),k(1)):1===o?(e(M({produceSort:2,produceSortUp:"#bfbfbf",produceSortDown:"#1890ff"})),g(2),k(2)):2===o&&(e(M({produceSort:0,produceSortUp:"#bfbfbf",produceSortDown:"#bfbfbf"})),g(0),k(0)),e(G(x,m))}),[o,x,m,e,g,k]),P=(0,r.useCallback)((function(){0===f?(e(M({countDownSort:1,countDownSortUp:"#1890ff",countDownSortDown:"#bfbfbf"})),j(1),Z(1)):1===f?(e(M({countDownSort:2,countDownSortUp:"#bfbfbf",countDownSortDown:"#1890ff"})),j(2),Z(2)):2===f&&(e(M({countDownSort:0,countDownSortUp:"#bfbfbf",countDownSortDown:"#bfbfbf"})),j(0),Z(0)),e(G(x,m))}),[f,x,m,e,j,Z]);return(0,Be.jsxs)("div",{className:"flexec",children:[(0,Be.jsxs)("div",{className:"flexcc hover-pointer",onClick:C,children:[(0,Be.jsx)("span",{className:"rml-4",style:{fontSize:"13px"},children:"\u5f85\u6536\u5272"}),(0,Be.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[(0,Be.jsx)(nn.Z,{style:{fontSize:"10px",marginBottom:"-1.5px",color:t}}),(0,Be.jsx)(tn.Z,{style:{fontSize:"10px",marginTop:"-1.5px",color:a}})]})]}),(0,Be.jsxs)("div",{className:"flexcc hover-pointer",onClick:N,children:[(0,Be.jsx)("span",{className:"rml-4",style:{fontSize:"13px"},children:"\u5f85\u751f\u4ea7"}),(0,Be.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[(0,Be.jsx)(nn.Z,{style:{fontSize:"10px",marginBottom:"-1.5px",color:u}}),(0,Be.jsx)(tn.Z,{style:{fontSize:"10px",marginTop:"-1.5px",color:d}})]})]}),(0,Be.jsxs)("div",{className:"flexcc hover-pointer",onClick:P,children:[(0,Be.jsx)("span",{className:"rml-4",style:{fontSize:"13px"},children:"\u5012\u8ba1\u65f6"}),(0,Be.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[(0,Be.jsx)(nn.Z,{style:{fontSize:"10px",marginBottom:"-1.5px",color:p}}),(0,Be.jsx)(tn.Z,{style:{fontSize:"10px",marginTop:"-1.5px",color:h}})]})]}),(0,Be.jsxs)("div",{className:"flexcc hover-pointer",onClick:S,children:[(0,Be.jsx)("span",{className:"rml-4",style:{fontSize:"13px"},children:"\u7b49\u7ea7"}),(0,Be.jsxs)("div",{className:" rmr-3 d-flex flex-column justify-content-center align-items-center",children:[(0,Be.jsx)(nn.Z,{style:{fontSize:"10px",marginBottom:"-1.5px",color:i}}),(0,Be.jsx)(tn.Z,{style:{fontSize:"10px",marginTop:"-1.5px",color:l}})]})]})]})}var an=(0,r.memo)(rn),sn=t(2649),cn=t(47528),ln=t(83373),on=t(99581),un=t(58361);function dn(e){console.log("MyNft");var n=(0,s.v9)((function(e){return e.app.nftChinese})),t=(0,s.v9)((function(e){return e.app.chinese})),a=(0,s.v9)((function(e){return e.app.account})),c=(0,s.v9)((function(e){return e.app.delay})),u=(0,s.v9)((function(e){return e.app.nfts})),f=(0,s.v9)((function(e){return e.app.rentNfts})),p=(0,s.v9)((function(e){return e.app.updateTab})),x=(0,s.v9)((function(e){return e.app.global})),m=(0,r.useReducer)((function(e){return!e}))[1],v=e.loading,b=(0,r.useState)({level:1,id:1,collection:"land",end_time:"2106-02-07T06:28:15",require_time:0}),g=(0,o.Z)(b,2),k=g[0],j=g[1],Z=(0,r.useState)(!1),w=(0,o.Z)(Z,2),y=w[0],C=w[1],S=(0,r.useRef)([]),N=(0,r.useState)([]),P=(0,o.Z)(N,2),T=P[0],O=P[1],D=(0,r.useRef)({}),E=(0,r.useRef)("1"),_=(0,s.I0)(),I=(0,r.useCallback)((function(e){j(e),C(!0)}),[]),R=(0,r.useCallback)((function(e){return e.exist?0===e.countDown?"\u5f85\u6536\u5272":e.countDown>0?"\u751f\u4ea7\u4e2d":void 0:"\u5f85\u751f\u4ea7"}),[]),A=(0,r.useCallback)((function(e){var n=e.target.checked,t=e.target.data;n?S.current.includes(t.id)||S.current.push(t.id):S.current.splice(S.current.indexOf(t.id),1),O((0,i.Z)(S.current))}),[]),z=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,s,i,l,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfsnftassets",scope:a.name+" ",table:"assets",json:!0,lower_bound:n,upper_bound:n},e.next=3,Le.getTableRows(t);case 3:if(r=e.sent,s=(0,o.Z)(r,2),i=s[0],l=s[1],!i){e.next=11;break}return ne.ZP.error("\u83b7\u53d6assets\u5931\u8d25",c),_(F("\u83b7\u53d6assets\u5931\u8d25")),e.abrupt("return");case 11:if((u=l.rows||[]).length){e.next=16;break}return ne.ZP.error("\u83b7\u53d6assets\u5931\u8d25",c),_(F("\u83b7\u53d6assets\u5931\u8d25")),e.abrupt("return");case 16:D.current=u[0],D.current.level=null,D.current.task={countDown:0,exist:!1},D.current.multiple=1,D.current.round=1,D.current.spinning=!1;case 22:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[_,c,a]),Y=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,i,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfsmetaverse",scope:n,table:"stats",json:!0},e.next=3,Le.getTableRows(t);case 3:if(r=e.sent,a=(0,o.Z)(r,2),s=a[0],i=a[1],!s){e.next=11;break}return ne.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",c),_(F("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 11:if((l=i.rows||[]).length){e.next=16;break}return ne.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",c),_(F("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 16:D.current.level=l[0].val,D.current.multiple=D.current.level;case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[_,c]),B=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var r,a,s,i,l,u,f,p,x;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfsmetaverse",scope:"dfsmetaverse",table:"tasks",lower_bound:n,upper_bound:n,json:!0},e.next=3,Le.getTableRows(r);case 3:if(a=e.sent,s=(0,o.Z)(a,2),i=s[0],l=s[1],!i){e.next=11;break}return ne.ZP.error("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25",c),_(F("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25")),e.abrupt("return");case 11:if((u=l.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:D.current.task=u[0],D.current.task.create_time=h()("".concat(D.current.task.create_time,".000+0000")).format(),f=h()("".concat(D.current.task.mature_time,".000+0000")),D.current.task.mature_time=f.format(),D.current.task.end_time=f.format("YYYY-MM-DD HH:mm:ss"),p=f.diff(h()()),D.current.task.countDown=p<=0?0:p,D.current.task.exist=!0,x=D.current.task.product.split(" "),D.current.task.product={num:parseInt(x[0]).toFixed(0),name:t[x[1]]};case 24:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[_,c,t]),H=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.spinning=!0,m(),e.next=4,z(n.id);case 4:return e.next=6,Y(n.id);case 6:return e.next=8,B(n.id);case 8:n.spinning=!1,t=0;case 10:if(!(t<u[n.collection].length)){e.next=17;break}if(u[n.collection][t].id!==n.id){e.next=14;break}return u[n.collection][t]=D.current,e.abrupt("break",17);case 14:t++,e.next=10;break;case 17:_(L(u)),m();case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[z,Y,B,m,_,u]),M=(0,r.useCallback)((function(){if("1"===E.current)S.current=[];else if("2"===E.current)u.land.forEach((function(e){S.current.includes(e.id)&&S.current.splice(S.current.indexOf(e.id),1)}));else if("3"===E.current)for(var e in u)!u[e].length||"cow"!==u[e][0].collection&&"chicken"!==u[e][0].collection&&"sheep"!==u[e][0].collection||u[e].forEach((function(e){S.current.includes(e.id)&&S.current.splice(S.current.indexOf(e.id),1)}));else if("4"===E.current)for(var n in u)u[n].length&&"cow"!==u[n][0].collection&&"chicken"!==u[n][0].collection&&"sheep"!==u[n][0].collection&&"land"!==u[n][0].collection&&u[n].forEach((function(e){S.current.includes(e.id)&&S.current.splice(S.current.indexOf(e.id),1)}));else{var t=0;for(var r in u)if(u[r].length){if(t===E.current-5){u[r].forEach((function(e){S.current.includes(e.id)&&S.current.splice(S.current.indexOf(e.id),1)}));break}t++}}O((0,i.Z)(S.current))}),[u]),J=(0,r.useCallback)((function(e){for(var n in u)if(u[n].length)for(var t=0;t<u[n].length;t++)e.includes(u[n][t].id)&&(u[n][t].owner=a.name,u[n][t].renting=1,u[n][t].end_time="2106-02-07T06:28:15",u[n][t].task.exist?(u[n][t].producing=1,u[n][t].renter=a.name,u[n][t].reward_fee="0.0000 DCASH"):(u[n][t].producing=0,u[n][t].renter="eosio.null",u[n][t].reward_fee=x.reward_fee),f[n].unshift(u[n][t]),u[n].splice(t,1),t--);_(G(u,f)),_(U("2")),M()}),[_,M,u,f,a,x]),W=(0,r.useCallback)((function(e){"1"===p&&_(U("0")),E.current=e}),[p,_]),q=(0,r.useCallback)((function(){if("1"===E.current)for(var e in u)u[e].forEach((function(e){S.current.includes(e.id)||S.current.push(e.id)}));else if("2"===E.current)u.land.forEach((function(e){S.current.includes(e.id)||S.current.push(e.id)}));else if("3"===E.current)for(var n in u)!u[n].length||"cow"!==u[n][0].collection&&"chicken"!==u[n][0].collection&&"sheep"!==u[n][0].collection||u[n].forEach((function(e){S.current.includes(e.id)||S.current.push(e.id)}));else if("4"===E.current)for(var t in u)u[t].length&&"cow"!==u[t][0].collection&&"chicken"!==u[t][0].collection&&"sheep"!==u[t][0].collection&&"land"!==u[t][0].collection&&u[t].forEach((function(e){S.current.includes(e.id)||S.current.push(e.id)}));else{var r=0;for(var a in u)if(u[a].length){if(r===E.current-5){u[a].forEach((function(e){S.current.includes(e.id)||S.current.push(e.id)}));break}r++}}O((0,i.Z)(S.current))}),[u]),V=(0,r.useCallback)((function(e){C(!1),e&&(k.spinning=!0,setTimeout((function(){return H(k)}),c))}),[k,c,H]),K=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,s,i,l,u,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.name,r=a.permissions,s={actions:[{account:"dfsmetaverse",name:"harvest",authorization:[{actor:t,permission:r}],data:{taskid:n.id}}]},n.spinning=!0,m(),e.next=7,Le.transact(s);case 7:if(i=e.sent,l=(0,o.Z)(i,2),u=l[0],f=l[1],!u){e.next=18;break}return ne.ZP.error(Xe(u.toString()),5),console.log(u),n.spinning=!1,m(),_(F(Xe(u.toString()))),e.abrupt("return");case 18:f&&(ne.ZP.success("Success"),console.log(f),setTimeout((function(){return H(n)}),c));case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[a,_,c,H,m]),Q=(0,r.useCallback)((function(e,n){for(var t in u)u[t].length&&u[t].forEach((function(t){e.includes(t.id)&&(t.spinning=n)}))}),[u]),X=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n,t){var r,s,i,l,u,f,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.name,s=a.permissions,i={actions:[]},n?S.current.forEach((function(e){i.actions.push({account:"dfsnftassets",name:"transfer",authorization:[{actor:r,permission:s}],data:{from:r,to:"dfstownlease",assetid:e,memo:"deposit"}})})):i.actions.push({account:"dfsnftassets",name:"transfer",authorization:[{actor:r,permission:s}],data:{from:r,to:"dfstownlease",assetid:t.id,memo:"deposit"}}),i.actions.push({account:"dfstownlease",name:"deposit",authorization:[{actor:r,permission:s}],data:{owner:r,assetid_array:1===n?S.current:[t.id]}}),n?Q(S.current,!0):t.spinning=!0,m(),e.next=9,Le.transact(i);case 9:if(l=e.sent,u=(0,o.Z)(l,2),f=u[0],p=u[1],!f){e.next=20;break}return ne.ZP.error(Xe(f.toString()),c),console.log(f),n?Q(S.current,!1):t.spinning=!1,m(),_(F(Xe(f.toString()))),e.abrupt("return");case 20:p&&(ne.ZP.success("Success"),console.log(p),n?(Q(S.current,!1),J(S.current)):(t.spinning=!1,J([t.id])),m());case 21:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[a,_,c,Q,J,m]),$=(0,r.useCallback)((function(e){return(0,Be.jsx)(ue.Z,{size:"large",spinning:e.elem.spinning,children:(0,Be.jsx)(ae.Z,{style:0!==e.index?{marginTop:10}:{marginTop:0},hoverable:!0,actions:[(0,Be.jsx)(se.Z,{type:"link",size:"small",onClick:function(){return X(0,e.elem)},children:"\u51fa\u79df"}),(0,Be.jsx)(se.Z,{type:"link",size:"small",disabled:e.elem.task.exist,onClick:function(){return I(e.elem)},children:"\u751f\u4ea7"}),(0,Be.jsx)(se.Z,{type:"link",size:"small",onClick:function(){return H(e.elem)},children:"\u5237\u65b0"}),(0,Be.jsx)(oe.Z,{dot:e.elem.task.exist&&0===e.elem.task.countDown,children:(0,Be.jsx)(se.Z,{type:"link",size:"small",disabled:!e.elem.task.exist,onClick:function(){return K(e.elem)},children:"\u6536\u5272"})})],children:(0,Be.jsx)(ae.Z.Meta,{className:"land"===e.elem.collection?"land":"",avatar:(0,Be.jsx)(oe.Z,{count:e.elem.level,style:{backgroundColor:"#1890ff"},children:(0,Be.jsx)(sn.C,{shape:"square",src:"https://cdn.jsdelivr.net/gh/defis-net/material3/Town/shop/".concat(e.elem.collection,".png")})}),title:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(cn.Z,{color:"blue",children:n[e.elem.collection]}),(0,Be.jsxs)("div",{className:"flexcc",children:[(0,Be.jsxs)(cn.Z,{color:"blue",children:["#",e.elem.id]}),(0,Be.jsx)(le.Z,{data:e.elem,checked:S.current.includes(e.elem.id),onChange:A})]})]}),description:(0,Be.jsxs)("div",{children:[(0,Be.jsxs)("div",{className:"flexsc",children:[(0,Be.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u72b6\u6001\uff1a",R(e.elem.task)]}),(0,Be.jsxs)("div",{style:{width:"53%"},className:"flexsc flex-grow-1 fs-small",children:["\u5012\u8ba1\u65f6\u95f4\uff1a",(0,Be.jsx)(ln.Z.Countdown,{valueStyle:{fontSize:"13px",color:"rgba(0, 0, 0, 0.45)"},value:e.elem.task.mature_time,format:"HH:mm:ss"})]})]}),(0,Be.jsxs)("div",{className:"flexsc",children:[(0,Be.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u4ea7\u54c1\uff1a",e.elem.task.exist?e.elem.task.product.num+"\u4e2a"+e.elem.task.product.name:"\u65e0"]}),(0,Be.jsxs)("div",{style:{width:"53%"},className:"flex-grow-1 fs-small",children:["\u5b8c\u6210\u65f6\u95f4\uff1a",e.elem.task.exist?e.elem.task.end_time.slice(5,10)+" "+e.elem.task.end_time.slice(11,16):"\u65e0"]})]})]})})})})}),[R,I,X,K,A,H,n]),ee=(0,r.useCallback)((function(e){var t=0;if("\u5168\u90e8"===e.name)for(var r in u)t+=u[r].length;else if("\u519c\u573a"===e.name)t=u.land.length;else if("\u7267\u573a"===e.name)for(var a in u)!u[a].length||"cow"!==u[a][0].collection&&"chicken"!==u[a][0].collection&&"sheep"!==u[a][0].collection||(t+=u[a].length);else{if("\u5de5\u5382"!==e.name)return t+=u[e.name].length,(0,Be.jsx)(oe.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:t,children:n[e.name]});for(var s in u)u[s].length&&"cow"!==u[s][0].collection&&"chicken"!==u[s][0].collection&&"sheep"!==u[s][0].collection&&"land"!==u[s][0].collection&&(t+=u[s].length)}return(0,Be.jsx)(oe.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:t,children:e.name})}),[u,n]),te=(0,r.useCallback)((function(){var e=[],n=function(n){u[n].length&&e.push((0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(ee,{name:u[n][0].collection}),children:[(0,Be.jsx)(an,{}),u[n].map((function(t,r){return(0,Be.jsx)($,{elem:t,index:r},e.length*u[n].length+r)}))]},String(e.length+5)))};for(var t in u)n(t);return e}),[u]),re=(0,r.useCallback)((function(){var e=[];for(var n in u)u[n].length&&u[n].forEach((function(n){e.push((0,Be.jsx)($,{elem:n,index:e.length},e.length))}));return e}),[u]),ce=(0,r.useCallback)((function(){var e=[];return u.land.forEach((function(n){e.push((0,Be.jsx)($,{elem:n,index:e.length},e.length))})),e}),[u]),ie=(0,r.useCallback)((function(){var e=[];for(var n in u)!u[n].length||"cow"!==u[n][0].collection&&"chicken"!==u[n][0].collection&&"sheep"!==u[n][0].collection||u[n].forEach((function(n){e.push((0,Be.jsx)($,{elem:n,index:e.length},e.length))}));return e}),[u]),fe=(0,r.useCallback)((function(){var e=[];for(var n in u)u[n].length&&"cow"!==u[n][0].collection&&"chicken"!==u[n][0].collection&&"sheep"!==u[n][0].collection&&"land"!==u[n][0].collection&&u[n].forEach((function(n){e.push((0,Be.jsx)($,{elem:n,index:e.length},e.length))}));return e}),[u]);return(0,Be.jsxs)(Be.Fragment,{children:[T.length>0?(0,Be.jsx)(on.Z,{style:{zIndex:100,position:"absolute",top:35,right:0},children:(0,Be.jsxs)("div",{children:[(0,Be.jsx)(se.Z,{className:"rmt-1 rml-1",type:"primary",size:"small",shape:"round",onClick:q,children:"\u5168\u9009"}),(0,Be.jsx)(se.Z,{className:"rmt-1 rml-1",type:"primary",size:"small",shape:"round",onClick:M,children:"\u53d6\u6d88"}),(0,Be.jsxs)(se.Z,{className:"rmt-1 rml-1",type:"primary",size:"small",shape:"round",onClick:function(){return X(1)},children:["\u51fa\u79df",T.length]})]})}):(0,Be.jsx)(Be.Fragment,{}),(0,Be.jsxs)(de.Z,{tabBarStyle:{margin:"0 0 0 0"},defaultActiveKey:"1",onChange:W,children:[(0,Be.jsx)(de.Z.TabPane,{},"100"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(ee,{name:"\u5168\u90e8"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(re,{}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"1"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(ee,{name:"\u519c\u573a"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(ce,{}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"2"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(ee,{name:"\u7267\u573a"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(ie,{}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"3"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(ee,{name:"\u5de5\u5382"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(fe,{}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"4"),te(),(0,Be.jsx)(de.Z.TabPane,{},"101")]}),(0,Be.jsx)(en,{visible:y,curCard:k,handleCloseDialog:V})]})}var fn=(0,r.memo)(dn),pn=t(93020);function hn(e){var n=e.curCard,t=(0,s.I0)(),a=(0,s.v9)((function(e){return e.app.account})),c=(0,s.v9)((function(e){return e.app.works})),i=(0,s.v9)((function(e){return e.app.assets})),u=(0,s.v9)((function(e){return e.app.chinese})),f=(0,s.v9)((function(e){return e.app.global})),p=(0,r.useState)(!1),x=(0,o.Z)(p,2),m=x[0],v=x[1],b=(0,r.useRef)(m),g=(0,r.useRef)(0),k=(0,r.useRef)(!1),j=(0,r.useState)(1),Z=(0,o.Z)(j,2),w=Z[0],y=Z[1],C=(0,r.useState)(1),S=(0,o.Z)(C,2),N=S[0],P=S[1],T=(0,r.useState)(12),O=(0,o.Z)(T,2),D=O[0],E=O[1],_=(0,r.useState)(!1),I=(0,o.Z)(_,2),R=I[0],A=I[1],z=(0,r.useRef)([]);console.log("ProduceModal render"),(0,r.useEffect)((function(){v(e.visible)}),[e.visible]);var L=(0,r.useCallback)((function(){var e=f.rent_fee.split(" ")[0],n=f.service_fee.split(" ")[0],t=f.reward_fee.split(" ")[0];return Qe()(e).add(n).mul(N).mul(D).add(t).toFixed(4,3)+" DCASH"}),[f,N,D]),Y=(0,r.useCallback)((function(){var e=f.rent_fee.split(" ")[0],n=f.service_fee.split(" ")[0],t=f.reward_fee.split(" ")[0];return Qe()(e).add(n).mul(N).mul(D).add(t).div(N).div(D).toFixed(4,3)+" DCASH / \u4e2a"}),[f,N,D]),G=(0,r.useCallback)((function(){var e=f.rent_fee.split(" ")[0];return Qe()(e).mul(N).mul(D).toFixed(4,3)+" DCASH"}),[f,N,D]),U=(0,r.useCallback)((function(){var e=f.service_fee.split(" ")[0];return Qe()(e).mul(N).mul(D).toFixed(4,3)+" DCASH"}),[f,N,D]),B=(0,r.useCallback)((0,l.Z)(d().mark((function e(){var n,t,r,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie();case 2:if(n=e.sent,t=(0,o.Z)(n,2),r=t[0],a=t[1],!r){e.next=9;break}return ne.ZP.error("\u83b7\u53d6\u4ef7\u683c\u5931\u8d25",5),e.abrupt("return");case 9:a.forEach((function(e){"USDC"===e.coin?z.current[0]=e.price:"DFG"===e.coin?z.current[1]=e.price:"TAG"===e.coin&&(z.current[2]=e.price)}));case 10:case"end":return e.stop()}}),e)}))),[]),H=(0,r.useCallback)((0,l.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("gemfactory"!==n.collection){e.next=6;break}return e.next=3,B();case 3:y("RUBY"),e.next=7;break;case 6:"land"===n.collection?y(1):"cow"===n.collection?y(7):"chicken"===n.collection?y(8):"sheep"===n.collection?y(9):"feedmill"===n.collection?y(4):"bakery"===n.collection?y(10):"textilemill"===n.collection?y(18):"sugarmill"===n.collection?y(15):"tailorshop"===n.collection?y(21):"dairyshop"===n.collection?y(28):"icecreamshop"===n.collection&&y(32);case 7:P(n.level);case 8:case"end":return e.stop()}}),e)}))),[B,n]),M=(0,r.useCallback)((function(){A(!1),v(!1),e.handleCloseDialog(!1)}),[e]),J=(0,r.useCallback)((0,l.Z)(d().mark((function r(){var s,c,i,l,u,p,h,x,m,b,j,Z,y,C;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(g.current<=0)){r.next=4;break}ne.ZP.error("\u8d85\u8fc7\u79df\u7528\u671f\u9650",5),r.next=32;break;case 4:if(!k.current){r.next=7;break}return ne.ZP.error("\u8d44\u4ea7\u4e0d\u8db3",5),r.abrupt("return");case 7:return s=a.name,c=a.permissions,i=f.rent_fee.split(" ")[0],l=f.service_fee.split(" ")[0],u=f.reward_fee.split(" ")[0],p=Qe()(i).add(l).mul(N).mul(D).add(u).toFixed(4,3)+" DCASH",h="",x="",m="","RUBY"===w?(h=Qe()(N).mul(D).div(z.current.price[0]).toFixed(4,3)+" USDC",x=N.toFixed(4)+" "+w,m="usdxusdxusdx"):"BERYL"===w?(h=Qe()(N).mul(D).div(z.current.price[1]).toFixed(4,3)+" DFG",x=N.toFixed(4)+" "+w,m="dfxtokenmain"):"TOPAZ"===w&&(h=Qe()(N).mul(D).div(z.current.price[2]).toFixed(8,3)+" TAG",x=N.toFixed(4)+" "+w,m="tagtokenmain"),b={actions:[{account:m,name:"transfer",authorization:[{actor:s,permission:c}],data:{from:s,to:"dfsmetaverse",quantity:h,memo:"deposit"}},{account:"dfsfarmitems",name:"transfer",authorization:[{actor:s,permission:c}],data:{from:s,to:"dfstownlease",quantity:p,memo:"fee"}},{account:"dfstownlease",name:"makegem",authorization:[{actor:s,permission:c}],data:{user:s,assetid:n.id,gem:x,round:D}}]},A(!0),r.next=21,Le.transact(b);case 21:if(j=r.sent,Z=(0,o.Z)(j,2),y=Z[0],C=Z[1],!y){r.next=31;break}return ne.ZP.error(Xe(y.toString()),5),console.log(y),A(!1),t(F(Xe(y.toString()))),r.abrupt("return");case 31:C&&(A(!1),ne.ZP.success("Success"),v(!1),e.handleCloseDialog(!0),console.log(C));case 32:case"end":return r.stop()}}),r)}))),[w,N,D,a,f,n,t,e]),W=(0,r.useCallback)((0,l.Z)(d().mark((function r(){var s,i,l,u,p,h,x,m,b,j,Z,y;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(g.current<=0)){r.next=4;break}ne.ZP.error("\u8d85\u8fc7\u79df\u7528\u671f\u9650",5),r.next=36;break;case 4:if(c[w-1].id===w){r.next=7;break}return ne.ZP.error("\u5de5\u4f5cid\u9519\u8bef",5),r.abrupt("return");case 7:if(!k.current){r.next=10;break}return ne.ZP.error("\u8d44\u4ea7\u4e0d\u8db3",5),r.abrupt("return");case 10:return(s=c[w-1].require_asset.slice()).forEach((function(e,n){var t=e.split(" ");t[0]=(parseInt(t[0])*N*D).toFixed(4),s[n]=t[0]+" "+t[1]})),i=a.name,l=a.permissions,u=f.rent_fee.split(" ")[0],p=f.service_fee.split(" ")[0],h=f.reward_fee.split(" ")[0],x=Qe()(u).add(p).mul(N).mul(D).add(h).toFixed(4,3)+" DCASH",m={actions:[]},s.forEach((function(e){m.actions.push({account:"dfsfarmitems",name:"transfer",authorization:[{actor:i,permission:l}],data:{from:i,to:"dfstownlease",quantity:e,memo:"deposit"}})})),m.actions.push({account:"dfsfarmitems",name:"transfer",authorization:[{actor:i,permission:l}],data:{from:i,to:"dfstownlease",quantity:x,memo:"fee"}}),m.actions.push({account:"dfstownlease",name:"produce",authorization:[{actor:i,permission:l}],data:{user:i,workid:w,assetid:n.id,multiple:N,round:D}}),A(!0),r.next=25,Le.transact(m);case 25:if(b=r.sent,j=(0,o.Z)(b,2),Z=j[0],y=j[1],!Z){r.next=35;break}return ne.ZP.error(Xe(Z.toString()),5),console.log(Z),A(!1),t(F(Xe(Z.toString()))),r.abrupt("return");case 35:y&&(A(!1),ne.ZP.success("Success"),v(!1),e.handleCloseDialog(!0),console.log(y));case 36:case"end":return r.stop()}}),r)}))),[w,c,N,D,a,f,n,t,e]),q=(0,r.useCallback)((function(){"RUBY"===w||"BERYL"===w||"TOPAZ"===w?J():W()}),[W,J,w]),V=(0,r.useCallback)((function(e){y(e.target.value)}),[]),K=(0,r.useCallback)((function(e){null!==e&&P(e)}),[]),Q=(0,r.useCallback)((function(e){null!==e&&E(e)}),[]),X=function(){if(c.length){var e;e="RUBY"===w||"BERYL"===w||"TOPAZ"===w?7200:c.filter((function(e){return e.id===w}))[0].require_time;var t=h()().add(D*e,"seconds"),r=t.format().slice(0,-6),a=h()("".concat(n.end_time,".000+0000")).diff(t);return g.current=a,(0,Be.jsx)("span",{className:a<=0?"text-red":"",children:r})}return(0,Be.jsx)("span",{})},$=function(){if(c.length){var e=[];if("RUBY"===w||"BERYL"===w||"TOPAZ"===w){var n="";"RUBY"===w?n=Qe()(N).mul(D).div(z.current[0]).toFixed(4,3)+" USDC":"BERYL"===w?n=Qe()(N).mul(D).div(z.current[1]).toFixed(4,3)+" DFG":"TOPAZ"===w&&(n=Qe()(N).mul(D).div(z.current[2]).toFixed(8,3)+" TAG");var t=n.split(" ");i[t[1]]-t[0]<0&&e.push(t[1])}else{c[w-1].require_asset.slice().forEach((function(n){var t=n.split(" ");(t[0]=(parseInt(t[0])*N*D).toFixed(4),"undefined"===typeof i[t[1]])?e.push(t[1]):i[t[1]]-t[0]<0&&e.push(t[1])}))}if(0===e.length)return k.current=!1,(0,Be.jsx)("span",{children:"\u65e0"});var r="";return e.forEach((function(e){r+=u[e]+" "})),k.current=!0,(0,Be.jsx)("span",{className:"text-red",children:r+"\u8d44\u4ea7\u4e0d\u8db3"})}return k.current=!1,(0,Be.jsx)("span",{children:"\u65e0"})},ee=(0,r.useCallback)((function(){return"land"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:V,value:w,children:(0,Be.jsxs)(Je.Z,{direction:"vertical",children:[(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:1,children:"\u9ea6\u5b50"}),(0,Be.jsx)(Ue.ZP,{value:2,disabled:n.level<2,children:"\u7389\u7c73"}),(0,Be.jsx)(Ue.ZP,{value:3,disabled:n.level<3,children:"\u80e1\u841d\u535c"}),(0,Be.jsx)(Ue.ZP,{value:13,disabled:n.level<4,children:"\u7518\u8517"})]}),(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:14,disabled:n.level<5,children:"\u68c9\u82b1"}),(0,Be.jsx)(Ue.ZP,{value:25,disabled:n.level<5,children:"\u8349\u8393"}),(0,Be.jsx)(Ue.ZP,{value:27,disabled:n.level<5,children:"\u897f\u7ea2\u67ff"}),(0,Be.jsx)(Ue.ZP,{value:26,disabled:n.level<5,children:"\u53ef\u53ef"})]})]})}):"cow"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:V,value:w,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsx)("div",{className:"flexbc",children:(0,Be.jsx)(Ue.ZP,{value:7,children:"\u725b\u5976"})})})}):"chicken"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:V,value:w,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsx)("div",{className:"flexbc",children:(0,Be.jsx)(Ue.ZP,{value:8,children:"\u9e21\u86cb"})})})}):"sheep"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:V,value:w,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsx)("div",{className:"flexbc",children:(0,Be.jsx)(Ue.ZP,{value:9,children:"\u7ef5\u7f8a"})})})}):"feedmill"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:V,value:w,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:4,children:"\u725b\u9972\u6599"}),(0,Be.jsx)(Ue.ZP,{value:5,disabled:n.level<2,children:"\u9e21\u9972\u6599"}),(0,Be.jsx)(Ue.ZP,{value:6,disabled:n.level<3,children:"\u7f8a\u9972\u6599"})]})})}):"bakery"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:V,value:w,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:10,children:"\u9762\u5305"}),(0,Be.jsx)(Ue.ZP,{value:11,disabled:n.level<2,children:"\u66f2\u5947"}),(0,Be.jsx)(Ue.ZP,{value:12,disabled:n.level<3,children:"\u86cb\u7cd5"})]})})}):"textilemill"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:V,value:w,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:18,children:"\u68c9\u5e03"}),(0,Be.jsx)(Ue.ZP,{value:19,disabled:n.level<2,children:"\u7eba\u7eb1"}),(0,Be.jsx)(Ue.ZP,{value:20,disabled:n.level<3,children:"\u4e1d\u7ef8"})]})})}):"sugarmill"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:V,value:w,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:15,children:"\u7802\u7cd6"}),(0,Be.jsx)(Ue.ZP,{value:16,disabled:n.level<2,children:"\u7cd6\u6d46"}),(0,Be.jsx)(Ue.ZP,{value:17,disabled:n.level<3,children:"\u7126\u7cd6"})]})})}):"tailorshop"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:V,value:w,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:21,children:"\u886c\u886b"}),(0,Be.jsx)(Ue.ZP,{value:22,disabled:n.level<2,children:"\u6bdb\u8863"}),(0,Be.jsx)(Ue.ZP,{value:23,disabled:n.level<3,children:"\u5916\u5957"})]})})}):"dairyshop"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:V,value:w,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:28,children:"\u5976\u6cb9"}),(0,Be.jsx)(Ue.ZP,{value:29,disabled:n.level<2,children:"\u5976\u916a"}),(0,Be.jsx)(Ue.ZP,{value:30,disabled:n.level<3,children:"\u9ec4\u6cb9"}),(0,Be.jsx)(Ue.ZP,{value:31,disabled:n.level<3,children:"\u9178\u5976"})]})})}):"icecreamshop"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:V,value:w,children:(0,Be.jsx)(Je.Z,{direction:"vertical",children:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:32,children:"\u51b0\u6dc7\u6dcb"}),(0,Be.jsx)(Ue.ZP,{value:33,disabled:n.level<2,children:"\u51b0\u68d2"}),(0,Be.jsx)(Ue.ZP,{value:34,disabled:n.level<3,children:"\u51bb\u9178\u5976"})]})})}):"gemfactory"===n.collection?(0,Be.jsx)(Ue.ZP.Group,{className:"width-100 rmt-3",onChange:V,value:w,children:(0,Be.jsxs)(Je.Z,{direction:"vertical",children:[(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsx)(Ue.ZP,{value:"RUBY",children:"\u7ea2\u5b9d\u77f3"}),(0,Be.jsx)(Ue.ZP,{value:"BERYL",children:"\u7eff\u5b9d\u77f3"}),(0,Be.jsx)(Ue.ZP,{value:"TOPAZ",children:"\u9ec4\u7389"})]}),(0,Be.jsx)("div",{className:"flexbc",children:(0,Be.jsx)(Ue.ZP,{value:24,children:"\u7d2b\u6c34\u6676"})})]})}):(0,Be.jsx)(Be.Fragment,{})}),[n,V,w]);return(0,r.useEffect)((function(){b.current=m,m&&H()}),[m,H]),(0,Be.jsx)(Ye.Z,{title:"\u751f\u4ea7\u64cd\u4f5c",visible:m,width:"94%",bodyStyle:{padding:"0px 24px"},onOk:q,onCancel:M,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,Be.jsxs)(ue.Z,{size:"large",spinning:R,children:[(0,Be.jsx)(ee,{}),(0,Be.jsxs)("div",{className:"rmt-3 flexsc",children:[(0,Be.jsx)(We.Z,{className:"",value:N,min:1,max:n.level,defaultValue:n.level,addonBefore:"\u6570 \u91cf",onChange:K}),(0,Be.jsx)(se.Z,{disabled:N>=n.level,onClick:function(){return P(N+1)},children:"+"}),(0,Be.jsx)(se.Z,{disabled:N<=1,onClick:function(){return P(N-1)},children:"-"}),(0,Be.jsx)(Ve.Z,{style:{visibility:"hidden"},className:"rml-2"})]}),(0,Be.jsxs)("div",{className:"rmt-3 flexsc",children:[(0,Be.jsx)(We.Z,{className:"",value:D,min:1,max:12,defaultValue:12,addonBefore:"\u5468 \u671f",onChange:Q}),(0,Be.jsx)(se.Z,{disabled:D>=12,onClick:function(){return E(D+1)},children:"+"}),(0,Be.jsx)(se.Z,{disabled:D<=1,onClick:function(){return E(D-1)},children:"-"}),(0,Be.jsx)(qe.Z,{placement:"left",title:"CPU\u6d88\u8017\u6bd4\u8f83\u591a\uff0c\u5efa\u8bae\u6bcf\u6b21\u5468\u671f\u90fd\u9009\u6700\u5927\u503c12",trigger:"click",children:(0,Be.jsx)(Ve.Z,{style:{color:"#1890ff"},className:"rml-2"})})]}),(0,Be.jsxs)("div",{className:"rmt-2 flexsc",children:["\u5b8c\u6210\u65f6\u95f4\uff1a",(0,Be.jsx)(X,{})]}),n.end_time?(0,Be.jsxs)("div",{className:"rmt-2 flexsc",children:["\u79df\u7528\u671f\u9650\uff1a",h()("".concat(n.end_time,".000+0000")).format().slice(0,-6)]}):(0,Be.jsx)(Be.Fragment,{}),(0,Be.jsxs)("div",{className:"rmt-2 flexsc",children:["\u79df\u7528\u8d39\u7528\uff1a",L(),(0,Be.jsx)(pn.Z,{trigger:"click",content:(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsxs)("div",{children:["\u79df\u7528\u8d39\uff1a",G()]}),(0,Be.jsxs)("div",{children:["\u670d\u52a1\u8d39\uff1a",U()]}),(0,Be.jsxs)("div",{children:["\u5956\u52b1\u8d39\uff1a",f.reward_fee]}),(0,Be.jsxs)("div",{children:["\u603b\u8d39\u7528\uff1a",L()]})]}),children:(0,Be.jsx)(Ve.Z,{style:{color:"#1890ff"},className:"rml-2"})})]}),(0,Be.jsxs)("div",{className:"rmt-2 flexsc",children:["\u5e73\u5747\u8d39\u7528\uff1a",Y()]}),(0,Be.jsxs)("div",{className:"rmt-2 rmb-3 flexsc",children:["\u63d0\u793a\u4fe1\u606f\uff1a",(0,Be.jsx)($,{})]})]})})}var xn=(0,r.memo)(hn),mn=t(99214),vn=t(97943);function bn(e){var n=(0,s.I0)(),t=(0,s.v9)((function(e){return e.app.account})),a=e.curCard,c=e.flag,i=e.check,u=(0,r.useState)(!1),f=(0,o.Z)(u,2),p=f[0],x=f[1],m=(0,r.useRef)(p),v=(0,r.useState)(0),b=(0,o.Z)(v,2),g=b[0],k=b[1],j=(0,r.useState)(0),Z=(0,o.Z)(j,2),w=Z[0],y=Z[1],C=(0,r.useState)(!1),S=(0,o.Z)(C,2),N=S[0],P=S[1],T=(0,r.useState)(1),O=(0,o.Z)(T,2),D=O[0],E=O[1],_=(0,r.useState)(h()()),I=(0,o.Z)(_,2),R=I[0],A=I[1],z=(0,r.useState)(h()()),L=(0,o.Z)(z,2),Y=L[0],G=L[1];console.log("DueDateModal render"),(0,r.useEffect)((function(){x(e.visible)}),[e.visible]);var U=(0,r.useCallback)((function(){A(h()()),G(h()())}),[]),B=(0,r.useCallback)((function(){P(!1),x(!1),e.handleCloseDialog(!1)}),[e]),H=(0,r.useCallback)((function(e){A(e),y(e.diff(h()())/1e3)}),[]),M=(0,r.useCallback)((function(e){G(e),k(e.diff(h()())/1e3)}),[]),J=(0,r.useCallback)((function(e){E(e.target.value)}),[]),W=(0,r.useCallback)((0,l.Z)(d().mark((function r(){var s,l,u,f,p,h,m,v;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=0,1!==D){r.next=13;break}if(!(w<0)){r.next=7;break}return ne.ZP.error("\u65e5\u671f\u4e0d\u6b63\u786e",5),r.abrupt("return");case 7:if(!(0===w&&g<=0)){r.next=12;break}return ne.ZP.error("\u65e5\u671f\u4e0d\u6b63\u786e",5),r.abrupt("return");case 12:0===w&&g>0?s=g:w>0&&(s=w+g);case 13:return l=t.name,u=t.permissions,f={},f=c?{actions:[{account:"dfstownlease",name:"setrent",authorization:[{actor:l,permission:u}],data:{owner:l,assetid_array:i,renting:1,end_time:parseInt(s)}}]}:{actions:[{account:"dfstownlease",name:"setrent",authorization:[{actor:l,permission:u}],data:{owner:l,assetid_array:[a.id],renting:a.renting,end_time:parseInt(s)}}]},P(!0),r.next=20,Le.transact(f);case 20:if(p=r.sent,h=(0,o.Z)(p,2),m=h[0],v=h[1],!m){r.next=30;break}return ne.ZP.error(Xe(m.toString()),5),console.log(m),P(!1),n(F(Xe(m.toString()))),r.abrupt("return");case 30:v&&(P(!1),ne.ZP.success("Success"),x(!1),e.handleCloseDialog(!0),console.log(v));case 31:case"end":return r.stop()}}),r)}))),[w,g,t,a,D,i,c,n,e]);return(0,r.useEffect)((function(){m.current=p,p&&U()}),[p,U]),(0,Be.jsx)(Ye.Z,{title:"\u671f\u9650\u64cd\u4f5c",visible:p,width:"94%",style:{top:"5px"},bodyStyle:{padding:"0px 24px"},onOk:W,onCancel:B,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,Be.jsxs)(ue.Z,{size:"large",spinning:N,children:[(0,Be.jsxs)("div",{className:"rmt-3 flexsc",children:["\u5f53\u524d\u671f\u9650\uff1a",a.end_time]}),(0,Be.jsxs)("div",{className:"rmt-3 flexsc",children:["\u65e5\u671f\u9009\u62e9\uff1a",(0,Be.jsx)(mn.Z,{disabled:2===D,value:R,onChange:H})]}),(0,Be.jsxs)("div",{className:"rmt-3 flexsc",children:["\u65f6\u95f4\u9009\u62e9\uff1a",(0,Be.jsx)(vn.Z,{className:"w-150",disabled:2===D,value:Y,format:"HH:mm",onChange:M})]}),(0,Be.jsx)("div",{className:"rmt-3 rmb-3 flexsc",children:(0,Be.jsxs)(Ue.ZP.Group,{onChange:J,defaultValue:2,value:D,children:[(0,Be.jsx)(Ue.ZP,{style:{margin:"0"},value:1,children:"\u6709\u9650\u5236"}),(0,Be.jsx)(Ue.ZP,{style:{margin:"0"},value:2,children:"\u65e0\u9650\u5236"})]})})]})})}var gn=(0,r.memo)(bn),kn=t(73956),jn=t(38999);function Zn(e){console.log("MyLease");var n=(0,s.I0)(),t=(0,s.v9)((function(e){return e.app.account})),a=(0,s.v9)((function(e){return e.app.nftChinese})),c=(0,s.v9)((function(e){return e.app.chinese})),u=(0,s.v9)((function(e){return e.app.delay})),f=(0,s.v9)((function(e){return e.app.rentNfts})),p=(0,s.v9)((function(e){return e.app.nfts})),x=(0,s.v9)((function(e){return e.app.updateTab})),m=(0,r.useReducer)((function(e){return!e}))[1],v=e.loading,b=(0,r.useState)({level:1,id:1,collection:"land",end_time:"2106-02-07T06:28:15",require_time:0}),g=(0,o.Z)(b,2),k=g[0],j=g[1],Z=(0,r.useState)(!1),w=(0,o.Z)(Z,2),y=w[0],C=w[1],S=(0,r.useState)(!1),N=(0,o.Z)(S,2),P=N[0],T=N[1],O=(0,r.useRef)([]),D=(0,r.useRef)([]),E=(0,r.useRef)([]),_=(0,r.useRef)(0),I=(0,r.useState)([]),R=(0,o.Z)(I,2),A=R[0],z=R[1],L=(0,r.useRef)("1"),B=(0,r.useRef)({}),H=(0,r.useCallback)((function(e){j(e),C(!0)}),[]),M=(0,r.useCallback)((function(e,n){e?(_.current=e,T(!0)):(_.current=e,j(n),T(!0))}),[]),J=(0,r.useCallback)((function(e){return e.exist?0===e.countDown?"\u5f85\u6536\u5272":e.countDown>0?"\u751f\u4ea7\u4e2d":void 0:"\u5f85\u751f\u4ea7"}),[]),W=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var r,a,s,c,i,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfstownlease",scope:"dfstownlease",table:"assets",json:!0,lower_bound:t,upper_bound:t},e.next=3,Le.getTableRows(r);case 3:if(a=e.sent,s=(0,o.Z)(a,2),c=s[0],i=s[1],!c){e.next=11;break}return ne.ZP.error("\u83b7\u53d6rent assets\u5931\u8d25",u),n(F("\u83b7\u53d6rent assets\u5931\u8d25")),e.abrupt("return");case 11:if((l=i.rows||[]).length){e.next=16;break}return ne.ZP.error("\u83b7\u53d6rent assets\u5931\u8d25",u),n(F("\u83b7\u53d6rent assets\u5931\u8d25")),e.abrupt("return");case 16:B.current=l[0],B.current.level=null,B.current.task={countDown:0,exist:!1},B.current.multiple=1,B.current.round=1,B.current.spinning=!1;case 22:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,u]),q=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var r,a,s,c,i,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfsmetaverse",scope:t,table:"stats",json:!0},e.next=3,Le.getTableRows(r);case 3:if(a=e.sent,s=(0,o.Z)(a,2),c=s[0],i=s[1],!c){e.next=11;break}return ne.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",u),n(F("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 11:if((l=i.rows||[]).length){e.next=16;break}return ne.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",u),n(F("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 16:B.current.level=l[0].val,B.current.multiple=B.current.level;case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,u]),V=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var r,a,s,i,l,f,p,x,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfsmetaverse",scope:"dfsmetaverse",table:"tasks",lower_bound:t,upper_bound:t,json:!0},e.next=3,Le.getTableRows(r);case 3:if(a=e.sent,s=(0,o.Z)(a,2),i=s[0],l=s[1],!i){e.next=11;break}return ne.ZP.error("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25",u),n(F("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25")),e.abrupt("return");case 11:if((f=l.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:B.current.task=f[0],B.current.task.create_time=h()("".concat(B.current.task.create_time,".000+0000")).format(),p=h()("".concat(B.current.task.mature_time,".000+0000")),B.current.task.mature_time=p.format(),B.current.task.end_time=p.format("YYYY-MM-DD HH:mm:ss"),x=p.diff(h()()),B.current.task.countDown=x<=0?0:x,B.current.task.exist=!0,m=B.current.task.product.split(" "),B.current.task.product={num:parseInt(m[0]).toFixed(0),name:c[m[1]]};case 24:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,u,c]),K=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.spinning=!0,m(),e.next=4,W(t.id);case 4:return e.next=6,q(t.id);case 6:return e.next=8,V(t.id);case 8:t.spinning=!1,r=0;case 10:if(!(r<f[t.collection].length)){e.next=17;break}if(f[t.collection][r].id!==t.id){e.next=14;break}return f[t.collection][r]=B.current,e.abrupt("break",17);case 14:r++,e.next=10;break;case 17:n(Y(f)),m();case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[W,q,V,m,n,f]),Q=(0,r.useCallback)((function(){if("1"===L.current)O.current=[],E.current=[],D.current=[];else if("2"===L.current)f.land.forEach((function(e){O.current.includes(e.id)&&(O.current.splice(O.current.indexOf(e.id),1),E.current.includes(e.id)?E.current.splice(E.current.indexOf(e.id),1):D.current.splice(D.current.indexOf(e.id),1))}));else if("3"===L.current)for(var e in f)!f[e].length||"cow"!==f[e][0].collection&&"chicken"!==f[e][0].collection&&"sheep"!==f[e][0].collection||f[e].forEach((function(e){O.current.includes(e.id)&&(O.current.splice(O.current.indexOf(e.id),1),E.current.includes(e.id)?E.current.splice(E.current.indexOf(e.id),1):D.current.splice(D.current.indexOf(e.id),1))}));else if("4"===L.current)for(var n in f)f[n].length&&"cow"!==f[n][0].collection&&"chicken"!==f[n][0].collection&&"sheep"!==f[n][0].collection&&"land"!==f[n][0].collection&&f[n].forEach((function(e){O.current.includes(e.id)&&(O.current.splice(O.current.indexOf(e.id),1),E.current.includes(e.id)?E.current.splice(E.current.indexOf(e.id),1):D.current.splice(D.current.indexOf(e.id),1))}));else{var t=0;for(var r in f)if(f[r].length){if(t===L.current-5){f[r].forEach((function(e){O.current.includes(e.id)&&(O.current.splice(O.current.indexOf(e.id),1),E.current.includes(e.id)?E.current.splice(E.current.indexOf(e.id),1):D.current.splice(D.current.indexOf(e.id),1))}));break}t++}}z((0,i.Z)(O.current))}),[f]),X=(0,r.useCallback)((function(e){for(var t in f)if(f[t].length)for(var r=0;r<f[t].length;r++)e.includes(f[t][r].id)&&(p[t].unshift(f[t][r]),f[t].splice(r,1),r--);n(G(p,f)),n(U("1")),Q()}),[f,p,n,Q]),$=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var r,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=25;break}return e.next=4,W(t[r]);case 4:return e.next=6,q(t[r]);case 6:return e.next=8,V(t[r]);case 8:e.t0=d().keys(f);case 9:if((e.t1=e.t0()).done){e.next=22;break}if(a=e.t1.value,!f[a].length){e.next=20;break}s=0;case 13:if(!(s<f[a].length)){e.next=20;break}if(f[a][s].id!==t[r]){e.next=17;break}return f[a][s]=B.current,e.abrupt("break",20);case 17:s++,e.next=13;break;case 20:e.next=9;break;case 22:r++,e.next=1;break;case 25:n(Y(f)),Q(),m();case 28:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[W,q,V,m,n,f,Q]),ee=(0,r.useCallback)((function(e){C(!1),e&&(k.spinning=!0,setTimeout((function(){return K(k)}),u))}),[k,u,K]),te=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var a,s,c,i,l,f,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,s=t.permissions,c={actions:[{account:"dfstownlease",name:"harvest",authorization:[{actor:a,permission:s}],data:{user:a,taskid:r.id}}]},r.spinning=!0,m(),e.next=7,Le.transact(c);case 7:if(i=e.sent,l=(0,o.Z)(i,2),f=l[0],p=l[1],!f){e.next=18;break}return ne.ZP.error(Xe(f.toString()),5),console.log(f),r.spinning=!1,m(),n(F(Xe(f.toString()))),e.abrupt("return");case 18:p&&(ne.ZP.success("Success"),console.log(p),setTimeout((function(){return K(r)}),u));case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,n,u,K,m]),re=(0,r.useCallback)((function(e,n){for(var t in f)f[t].length&&f[t].forEach((function(t){e.includes(t.id)&&(t.spinning=n)}))}),[f]),ce=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r,a){var s,c,i,l,f,p,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.name,c=t.permissions,i={actions:[{account:"dfstownlease",name:"withdraw",authorization:[{actor:s,permission:c}],data:{owner:s,assetid_array:1===r?O.current:[a.id]}}]},r?re(O.current,!0):a.spinning=!0,m(),e.next=7,Le.transact(i);case 7:if(l=e.sent,f=(0,o.Z)(l,2),p=f[0],h=f[1],!p){e.next=18;break}return ne.ZP.error(Xe(p.toString()),u),console.log(p),r?re(O.current,!1):a.spinning=!1,m(),n(F(Xe(p.toString()))),e.abrupt("return");case 18:h&&(ne.ZP.success("Success"),console.log(h),r?(re(O.current,!1),X(O.current)):(a.spinning=!1,X([a.id])),m());case 19:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[t,n,u,X,re,m]),ie=(0,r.useCallback)((function(e){T(!1),e&&(_.current?(re(O.current,!0),m(),setTimeout((function(){return $(O.current)}),u)):(k.spinning=!0,setTimeout((function(){return K(k)}),u)))}),[k,u,K,m,re,$]),fe=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r,a){var s,c,i,l,f,p,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.name,c=t.permissions,i={},0===r?i={actions:[{account:"dfstownlease",name:"setrent",authorization:[{actor:s,permission:c}],data:{owner:s,assetid_array:[a.id],renting:a.renting?0:1,end_time:0}}]}:1===r?i={actions:[{account:"dfstownlease",name:"setrent",authorization:[{actor:s,permission:c}],data:{owner:s,assetid_array:E.current,renting:0,end_time:0}}]}:2===r&&(i={actions:[{account:"dfstownlease",name:"setrent",authorization:[{actor:s,permission:c}],data:{owner:s,assetid_array:D.current,renting:1,end_time:0}}]}),0===r?a.spinning=!0:1===r?re(E.current,!0):2===r&&re(D.current,!0),m(),e.next=8,Le.transact(i);case 8:if(l=e.sent,f=(0,o.Z)(l,2),p=f[0],h=f[1],!p){e.next=19;break}return ne.ZP.error(Xe(p.toString()),5),console.log(p),0===r?a.spinning=!1:1===r?re(E.current,!1):2===r&&re(D.current,!1),m(),n(F(Xe(p.toString()))),e.abrupt("return");case 19:h&&(ne.ZP.success("Success"),console.log(h),0===r?setTimeout((function(){return K(a)}),u):1===r?setTimeout((function(){return $(E.current)}),u):2===r&&setTimeout((function(){return $(D.current)}),u));case 20:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[t,n,u,K,m,re,$]),pe=(0,r.useCallback)((function(e){var n=e.target.checked,t=e.target.data;n?O.current.includes(t.id)||(O.current.push(t.id),t.renting?E.current.push(t.id):D.current.push(t.id)):(O.current.splice(O.current.indexOf(t.id),1),t.renting?E.current.splice(E.current.indexOf(t.id),1):D.current.splice(D.current.indexOf(t.id),1)),z((0,i.Z)(O.current))}),[]),he=(0,r.useCallback)((function(e){"2"===x&&n(U("0")),L.current=e}),[x,n]),xe=(0,r.useCallback)((function(){if("1"===L.current)for(var e in f)f[e].forEach((function(e){O.current.includes(e.id)||(O.current.push(e.id),e.renting?E.current.push(e.id):D.current.push(e.id))}));else if("2"===L.current)f.land.forEach((function(e){O.current.includes(e.id)||(O.current.push(e.id),e.renting?E.current.push(e.id):D.current.push(e.id))}));else if("3"===L.current)for(var n in f)!f[n].length||"cow"!==f[n][0].collection&&"chicken"!==f[n][0].collection&&"sheep"!==f[n][0].collection||f[n].forEach((function(e){O.current.includes(e.id)||(O.current.push(e.id),e.renting?E.current.push(e.id):D.current.push(e.id))}));else if("4"===L.current)for(var t in f)f[t].length&&"cow"!==f[t][0].collection&&"chicken"!==f[t][0].collection&&"sheep"!==f[t][0].collection&&"land"!==f[t][0].collection&&f[t].forEach((function(e){O.current.includes(e.id)||(O.current.push(e.id),e.renting?E.current.push(e.id):D.current.push(e.id))}));else{var r=0;for(var a in f)if(f[a].length){if(r===L.current-5){f[a].forEach((function(e){O.current.includes(e.id)||(O.current.push(e.id),e.renting?E.current.push(e.id):D.current.push(e.id))}));break}r++}}z((0,i.Z)(O.current))}),[f]),me=(0,r.useCallback)((function(e){var n=e.elem.renting,t=e.elem.end_time,r=h()("".concat(t,".000+0000")),s=h()("".concat(t,".000+0000")).format("MM-DD HH:mm"),c=r.diff(h()()),i=function(){return!!e.elem.task.exist||(!n||c<=0)},l=function(){return i()?(0,Be.jsx)(oe.Z,{dot:e.elem.task.exist&&0===e.elem.task.countDown,children:(0,Be.jsx)(se.Z,{type:"link",size:"small",disabled:!e.elem.task.exist,onClick:function(){return te(e.elem)},children:"\u6536\u5272"})}):(0,Be.jsx)(se.Z,{type:"link",size:"small",disabled:i(),onClick:function(){return H(e.elem)},children:"\u751f\u4ea7"})};return(0,Be.jsx)(ue.Z,{size:"large",spinning:e.elem.spinning,children:(0,Be.jsx)(ae.Z,{style:0!==e.index?{marginTop:10}:{marginTop:0},hoverable:!0,actions:[(0,Be.jsx)(se.Z,{type:"link",size:"small",disabled:e.elem.task.exist&&e.elem.renter!==e.elem.owner,onClick:function(){return ce(0,e.elem)},children:"\u53d6\u56de"}),(0,Be.jsx)(l,{}),(0,Be.jsx)(se.Z,{type:"link",size:"small",onClick:function(){return K(e.elem)},children:"\u5237\u65b0"}),(0,Be.jsx)(se.Z,{type:"link",size:"small",onClick:function(){return fe(0,e.elem)},children:n?"\u9501\u5b9a":"\u89e3\u9501"}),(0,Be.jsx)(se.Z,{type:"link",size:"small",onClick:function(){return M(0,e.elem)},children:"\u671f\u9650"})],children:(0,Be.jsx)(ae.Z.Meta,{className:"land"===e.elem.collection?"land":"",avatar:(0,Be.jsx)(oe.Z,{count:e.elem.level,style:{backgroundColor:"#1890ff"},children:(0,Be.jsx)(sn.C,{shape:"square",src:"https://cdn.jsdelivr.net/gh/defis-net/material3/Town/shop/".concat(e.elem.collection,".png")})}),title:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsxs)("div",{children:[(0,Be.jsx)(cn.Z,{color:"blue",children:a[e.elem.collection]}),n?(0,Be.jsx)(cn.Z,{color:"green",children:(0,Be.jsx)(kn.Z,{})}):(0,Be.jsx)(cn.Z,{color:"red",children:(0,Be.jsx)(jn.Z,{})}),"2106-02-07T06:28:15"!==t&&n?c>0?(0,Be.jsx)(cn.Z,{color:"green",children:s}):(0,Be.jsx)(cn.Z,{color:"red",children:s}):""]}),(0,Be.jsxs)("div",{className:"flexcc",children:[(0,Be.jsxs)(cn.Z,{color:"blue",children:["#",e.elem.id]}),(0,Be.jsx)(le.Z,{style:{zIndex:100},data:e.elem,checked:O.current.includes(e.elem.id),onChange:pe})]})]}),description:(0,Be.jsxs)("div",{children:[(0,Be.jsxs)("div",{className:"flexsc",children:[(0,Be.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u72b6\u6001\uff1a",J(e.elem.task)]}),(0,Be.jsxs)("div",{style:{width:"53%"},className:"flexsc flex-grow-1 fs-small",children:["\u5012\u8ba1\u65f6\u95f4\uff1a",(0,Be.jsx)(ln.Z.Countdown,{valueStyle:{fontSize:"13px",color:"rgba(0, 0, 0, 0.45)"},value:e.elem.task.mature_time,format:"HH:mm:ss"})]})]}),(0,Be.jsxs)("div",{className:"flexsc",children:[(0,Be.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u4ea7\u54c1\uff1a",e.elem.task.exist?e.elem.task.product.num+"\u4e2a"+e.elem.task.product.name:"\u65e0"]}),(0,Be.jsxs)("div",{style:{width:"53%"},className:"flex-grow-1 fs-small",children:["\u5b8c\u6210\u65f6\u95f4\uff1a",e.elem.task.exist?e.elem.task.end_time.slice(5,10)+" "+e.elem.task.end_time.slice(11,16):"\u65e0"]})]})]})})})})}),[J,H,te,ce,fe,pe,M,a,K]),ve=(0,r.useCallback)((function(e){var n=0;if("\u5168\u90e8"===e.name)for(var r in f){var s=0;f[r].forEach((function(e){e.owner===t.name&&(s+=1)})),n+=s}else if("\u519c\u573a"===e.name)f.land.forEach((function(e){e.owner===t.name&&(n+=1)}));else if("\u7267\u573a"===e.name)for(var c in f){var i=0;!f[c].length||"cow"!==f[c][0].collection&&"chicken"!==f[c][0].collection&&"sheep"!==f[c][0].collection||(f[c].forEach((function(e){e.owner===t.name&&(i+=1)})),n+=i)}else{if("\u5de5\u5382"!==e.name)return f[e.name].forEach((function(e){e.owner===t.name&&(n+=1)})),(0,Be.jsx)(oe.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:n,children:a[e.name]});for(var l in f){var o=0;f[l].length&&"cow"!==f[l][0].collection&&"chicken"!==f[l][0].collection&&"sheep"!==f[l][0].collection&&"land"!==f[l][0].collection&&(f[l].forEach((function(e){e.owner===t.name&&(o+=1)})),n+=o)}}return(0,Be.jsx)(oe.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:n,children:e.name})}),[f,a,t]),be=(0,r.useCallback)((function(){var e=[],n=function(n){if(f[n].length){var r=[];f[n].forEach((function(a,s){a.owner===t.name&&r.push((0,Be.jsx)(me,{elem:a,index:r.length},e.length*f[n].length+s))})),r.length&&e.push((0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(ve,{name:f[n][0].collection}),children:[(0,Be.jsx)(an,{}),r]},String(e.length+5)))}};for(var r in f)n(r);return e}),[f,t.name]),ge=(0,r.useCallback)((function(){var e=[];for(var n in f)f[n].length&&f[n].forEach((function(n){n.owner===t.name&&e.push((0,Be.jsx)(me,{elem:n,index:e.length},e.length))}));return e}),[f,t.name]),ke=(0,r.useCallback)((function(){var e=[];return f.land.forEach((function(n){n.owner===t.name&&e.push((0,Be.jsx)(me,{elem:n,index:e.length},e.length))})),e}),[f,t.name]),je=(0,r.useCallback)((function(){var e=[];for(var n in f)!f[n].length||"cow"!==f[n][0].collection&&"chicken"!==f[n][0].collection&&"sheep"!==f[n][0].collection||f[n].forEach((function(n){n.owner===t.name&&e.push((0,Be.jsx)(me,{elem:n,index:e.length},e.length))}));return e}),[f,t.name]),Ze=(0,r.useCallback)((function(){var e=[];for(var n in f)f[n].length&&"cow"!==f[n][0].collection&&"chicken"!==f[n][0].collection&&"sheep"!==f[n][0].collection&&"land"!==f[n][0].collection&&f[n].forEach((function(n){n.owner===t.name&&e.push((0,Be.jsx)(me,{elem:n,index:e.length},e.length))}));return e}),[f,t.name]);return(0,Be.jsxs)(Be.Fragment,{children:[A.length>0?(0,Be.jsx)(on.Z,{style:{zIndex:100,position:"absolute",top:80,right:0},children:(0,Be.jsxs)("div",{children:[(0,Be.jsxs)("div",{children:[(0,Be.jsx)(se.Z,{className:"rmt-1 mr-7",type:"primary",size:"small",shape:"round",onClick:Q,children:"\u53d6\u6d88"}),(0,Be.jsxs)(se.Z,{className:"rmt-1 mr-7",type:"primary",size:"small",shape:"round",onClick:function(){return M(1)},children:["\u671f\u9650",A.length]}),(0,Be.jsxs)(se.Z,{className:"rmt-1 mr-7",type:"primary",size:"small",shape:"round",onClick:function(){return fe(1)},children:["\u9501\u5b9a",E.current.length]}),(0,Be.jsxs)(se.Z,{className:"rmt-1 mr-7",type:"primary",size:"small",shape:"round",onClick:function(){return fe(2)},children:["\u89e3\u9501",D.current.length]}),(0,Be.jsxs)(se.Z,{className:"rmt-1 mr-7",type:"primary",size:"small",shape:"round",onClick:function(){return ce(1)},children:["\u53d6\u56de",A.length]})]}),(0,Be.jsx)("div",{children:(0,Be.jsx)(se.Z,{className:"rmt-5 mr-7",type:"primary",size:"small",shape:"round",onClick:xe,children:"\u5168\u9009"})})]})}):(0,Be.jsx)(Be.Fragment,{}),(0,Be.jsxs)(de.Z,{tabBarStyle:{margin:"0 0 0 0"},defaultActiveKey:"1",onChange:he,children:[(0,Be.jsx)(de.Z.TabPane,{},"100"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(ve,{name:"\u5168\u90e8"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(ge,{}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"1"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(ve,{name:"\u519c\u573a"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(ke,{}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"2"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(ve,{name:"\u7267\u573a"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(je,{}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"3"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(ve,{name:"\u5de5\u5382"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(Ze,{}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"4"),be(),(0,Be.jsx)(de.Z.TabPane,{},"101")]}),(0,Be.jsx)(xn,{visible:y,curCard:k,handleCloseDialog:ee}),(0,Be.jsx)(gn,{visible:P,flag:_.current,check:A,curCard:k,handleCloseDialog:ie})]})}var wn=(0,r.memo)(Zn);function yn(e){console.log("MyRent");var n=(0,s.I0)(),t=(0,s.v9)((function(e){return e.app.account})),a=(0,s.v9)((function(e){return e.app.nftChinese})),c=(0,s.v9)((function(e){return e.app.chinese})),i=(0,s.v9)((function(e){return e.app.delay})),u=(0,s.v9)((function(e){return e.app.rentNfts})),f=(0,s.v9)((function(e){return e.app.updateTab})),p=(0,r.useReducer)((function(e){return!e}))[1],x=e.loading,m=(0,r.useState)({level:1,id:1,collection:"land",end_time:"2106-02-07T06:28:15",require_time:0}),v=(0,o.Z)(m,2),b=v[0],g=v[1],k=(0,r.useState)(!1),j=(0,o.Z)(k,2),Z=j[0],w=j[1],y=(0,r.useRef)({}),C=(0,r.useCallback)((function(e){g(e),w(!0)}),[]),S=(0,r.useCallback)((function(e){return e.exist?0===e.countDown?"\u5f85\u6536\u5272":e.countDown>0?"\u751f\u4ea7\u4e2d":void 0:"\u5f85\u751f\u4ea7"}),[]),N=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var r,a,s,c,l,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfstownlease",scope:"dfstownlease",table:"assets",json:!0,lower_bound:t,upper_bound:t},e.next=3,Le.getTableRows(r);case 3:if(a=e.sent,s=(0,o.Z)(a,2),c=s[0],l=s[1],!c){e.next=11;break}return ne.ZP.error("\u83b7\u53d6rent assets\u5931\u8d25",i),n(F("\u83b7\u53d6rent assets\u5931\u8d25")),e.abrupt("return");case 11:if((u=l.rows||[]).length){e.next=16;break}return ne.ZP.error("\u83b7\u53d6rent assets\u5931\u8d25",i),n(F("\u83b7\u53d6rent assets\u5931\u8d25")),e.abrupt("return");case 16:y.current=u[0],y.current.level=null,y.current.task={countDown:0,exist:!1},y.current.multiple=1,y.current.round=1,y.current.spinning=!1;case 22:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,i]),P=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var r,a,s,c,l,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfsmetaverse",scope:t,table:"stats",json:!0},e.next=3,Le.getTableRows(r);case 3:if(a=e.sent,s=(0,o.Z)(a,2),c=s[0],l=s[1],!c){e.next=11;break}return ne.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",i),n(F("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 11:if((u=l.rows||[]).length){e.next=16;break}return ne.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",i),n(F("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 16:y.current.level=u[0].val,y.current.multiple=y.current.level;case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,i]),T=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var r,a,s,l,u,f,p,x,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfsmetaverse",scope:"dfsmetaverse",table:"tasks",lower_bound:t,upper_bound:t,json:!0},e.next=3,Le.getTableRows(r);case 3:if(a=e.sent,s=(0,o.Z)(a,2),l=s[0],u=s[1],!l){e.next=11;break}return ne.ZP.error("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25",i),n(F("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25")),e.abrupt("return");case 11:if((f=u.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:y.current.task=f[0],y.current.task.create_time=h()("".concat(y.current.task.create_time,".000+0000")).format(),p=h()("".concat(y.current.task.mature_time,".000+0000")),y.current.task.mature_time=p.format(),y.current.task.end_time=p.format("YYYY-MM-DD HH:mm:ss"),x=p.diff(h()()),y.current.task.countDown=x<=0?0:x,y.current.task.exist=!0,m=y.current.task.product.split(" "),y.current.task.product={num:parseInt(m[0]).toFixed(0),name:c[m[1]]};case 24:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,i,c]),O=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.spinning=!0,p(),e.next=4,N(t.id);case 4:return e.next=6,P(t.id);case 6:return e.next=8,T(t.id);case 8:t.spinning=!1,r=0;case 10:if(!(r<u[t.collection].length)){e.next=17;break}if(u[t.collection][r].id!==t.id){e.next=14;break}return u[t.collection][r]=y.current,e.abrupt("break",17);case 14:r++,e.next=10;break;case 17:n(Y(u)),p();case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[N,P,T,p,n,u]),D=(0,r.useCallback)((function(e){w(!1),e&&(b.spinning=!0,setTimeout((function(){return O(b)}),i))}),[b,i,O]),E=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var a,s,c,l,u,f,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,s=t.permissions,c={actions:[{account:"dfstownlease",name:"harvest",authorization:[{actor:a,permission:s}],data:{user:a,taskid:r.id}}]},r.spinning=!0,p(),e.next=7,Le.transact(c);case 7:if(l=e.sent,u=(0,o.Z)(l,2),f=u[0],h=u[1],!f){e.next=18;break}return ne.ZP.error(Xe(f.toString()),5),console.log(f),r.spinning=!1,p(),n(F(Xe(f.toString()))),e.abrupt("return");case 18:h&&(ne.ZP.success("Success"),console.log(h),setTimeout((function(){return O(r)}),i));case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,n,i,O,p]),_=(0,r.useCallback)((function(e){var n=e.elem.renting,t=e.elem.end_time,r=h()("".concat(t,".000+0000")),s=h()("".concat(t,".000+0000")).format("MM-DD HH:mm"),c=r.diff(h()());return(0,Be.jsx)(ue.Z,{size:"large",spinning:e.elem.spinning,children:(0,Be.jsx)(ae.Z,{style:0!==e.index?{marginTop:10}:{marginTop:0},hoverable:!0,actions:[(0,Be.jsx)(se.Z,{type:"link",size:"small",disabled:!!e.elem.task.exist||!n||c<=0,onClick:function(){return C(e.elem)},children:"\u751f\u4ea7"}),(0,Be.jsx)(se.Z,{type:"link",size:"small",onClick:function(){return O(e.elem)},children:"\u5237\u65b0"}),(0,Be.jsx)(oe.Z,{dot:e.elem.task.exist&&0===e.elem.task.countDown,children:(0,Be.jsx)(se.Z,{type:"link",size:"small",disabled:!e.elem.task.exist,onClick:function(){return E(e.elem)},children:"\u6536\u5272"})})],children:(0,Be.jsx)(ae.Z.Meta,{className:"land"===e.elem.collection?"land":"",avatar:(0,Be.jsx)(oe.Z,{count:e.elem.level,style:{backgroundColor:"#1890ff"},children:(0,Be.jsx)(sn.C,{shape:"square",src:"https://cdn.jsdelivr.net/gh/defis-net/material3/Town/shop/".concat(e.elem.collection,".png")})}),title:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsxs)("div",{children:[(0,Be.jsx)(cn.Z,{color:"blue",children:a[e.elem.collection]}),n?(0,Be.jsx)(cn.Z,{color:"green",children:(0,Be.jsx)(kn.Z,{})}):(0,Be.jsx)(cn.Z,{color:"red",children:(0,Be.jsx)(jn.Z,{})}),"2106-02-07T06:28:15"!==t&&n?c>0?(0,Be.jsx)(cn.Z,{color:"green",children:s}):(0,Be.jsx)(cn.Z,{color:"red",children:s}):""]}),(0,Be.jsxs)(cn.Z,{style:{marginRight:"0"},color:"blue",children:["#",e.elem.id]})]}),description:(0,Be.jsxs)("div",{children:[(0,Be.jsxs)("div",{className:"flexsc",children:[(0,Be.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u72b6\u6001\uff1a",S(e.elem.task)]}),(0,Be.jsxs)("div",{style:{width:"53%"},className:"flexsc flex-grow-1 fs-small",children:["\u5012\u8ba1\u65f6\u95f4\uff1a",(0,Be.jsx)(ln.Z.Countdown,{valueStyle:{fontSize:"13px",color:"rgba(0, 0, 0, 0.45)"},value:e.elem.task.mature_time,format:"HH:mm:ss"})]})]}),(0,Be.jsxs)("div",{className:"flexsc",children:[(0,Be.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u4ea7\u54c1\uff1a",e.elem.task.exist?e.elem.task.product.num+"\u4e2a"+e.elem.task.product.name:"\u65e0"]}),(0,Be.jsxs)("div",{style:{width:"53%"},className:"flex-grow-1 fs-small",children:["\u5b8c\u6210\u65f6\u95f4\uff1a",e.elem.task.exist?e.elem.task.end_time.slice(5,10)+" "+e.elem.task.end_time.slice(11,16):"\u65e0"]})]})]})})})})}),[S,C,E,a,O]),I=(0,r.useCallback)((function(e){var n=0;if("\u5168\u90e8"===e.name)for(var r in u){var s=0;u[r].forEach((function(e){e.renter===t.name&&(s+=1)})),n+=s}else if("\u519c\u573a"===e.name)u.land.forEach((function(e){e.renter===t.name&&(n+=1)}));else if("\u7267\u573a"===e.name)for(var c in u){var i=0;!u[c].length||"cow"!==u[c][0].collection&&"chicken"!==u[c][0].collection&&"sheep"!==u[c][0].collection||(u[c].forEach((function(e){e.renter===t.name&&(i+=1)})),n+=i)}else{if("\u5de5\u5382"!==e.name)return u[e.name].forEach((function(e){e.renter===t.name&&(n+=1)})),(0,Be.jsx)(oe.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:n,children:a[e.name]});for(var l in u){var o=0;u[l].length&&"cow"!==u[l][0].collection&&"chicken"!==u[l][0].collection&&"sheep"!==u[l][0].collection&&"land"!==u[l][0].collection&&(u[l].forEach((function(e){e.renter===t.name&&(o+=1)})),n+=o)}}return(0,Be.jsx)(oe.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:n,children:e.name})}),[u,a,t]),R=(0,r.useCallback)((function(){var e=[],n=function(n){if(u[n].length){var r=[];u[n].forEach((function(a,s){a.renter===t.name&&r.push((0,Be.jsx)(_,{elem:a,index:r.length},e.length*u[n].length+s))})),r.length&&e.push((0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(I,{name:u[n][0].collection}),children:[(0,Be.jsx)(an,{}),r]},String(e.length+5)))}};for(var r in u)n(r);return e}),[u,t.name]),A=(0,r.useCallback)((function(){var e=[];for(var n in u)u[n].length&&u[n].forEach((function(n){n.renter===t.name&&e.push((0,Be.jsx)(_,{elem:n,index:e.length},e.length))}));return e}),[u,t.name]),z=(0,r.useCallback)((function(){var e=[];return u.land.forEach((function(n){n.renter===t.name&&e.push((0,Be.jsx)(_,{elem:n,index:e.length},e.length))})),e}),[u,t.name]),L=(0,r.useCallback)((function(){var e=[];for(var n in u)!u[n].length||"cow"!==u[n][0].collection&&"chicken"!==u[n][0].collection&&"sheep"!==u[n][0].collection||u[n].forEach((function(n){n.renter===t.name&&e.push((0,Be.jsx)(_,{elem:n,index:e.length},e.length))}));return e}),[u,t.name]),G=(0,r.useCallback)((function(){var e=[];for(var n in u)u[n].length&&"cow"!==u[n][0].collection&&"chicken"!==u[n][0].collection&&"sheep"!==u[n][0].collection&&"land"!==u[n][0].collection&&u[n].forEach((function(n){n.renter===t.name&&e.push((0,Be.jsx)(_,{elem:n,index:e.length},e.length))}));return e}),[u,t.name]),B=(0,r.useCallback)((function(){"3"===f&&n(U("0"))}),[f,n]);return(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsxs)(de.Z,{tabBarStyle:{margin:"0 0 0 0"},defaultActiveKey:"1",onChange:B,children:[(0,Be.jsx)(de.Z.TabPane,{},"100"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(I,{name:"\u5168\u90e8"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(A,{}),(0,Be.jsx)(un.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}})]},"1"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(I,{name:"\u519c\u573a"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(z,{}),(0,Be.jsx)(un.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}})]},"2"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(I,{name:"\u7267\u573a"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(L,{}),(0,Be.jsx)(un.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}})]},"3"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(I,{name:"\u5de5\u5382"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(G,{}),(0,Be.jsx)(un.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}})]},"4"),R(),(0,Be.jsx)(de.Z.TabPane,{},"101")]}),(0,Be.jsx)(xn,{visible:Z,curCard:b,handleCloseDialog:D})]})}var Cn=(0,r.memo)(yn),Sn=t(35796);function Nn(e){console.log("Market");var n=(0,s.I0)(),t=(0,s.v9)((function(e){return e.app.account})),a=(0,s.v9)((function(e){return e.app.nftChinese})),c=(0,s.v9)((function(e){return e.app.chinese})),i=(0,s.v9)((function(e){return e.app.delay})),u=(0,s.v9)((function(e){return e.app.global})),f=(0,s.v9)((function(e){return e.app.rentNfts})),p=(0,s.v9)((function(e){return e.app.updateTab})),x=(0,r.useReducer)((function(e){return!e}))[1],m=e.loading,v=(0,r.useState)({level:1,id:1,collection:"land",end_time:"2106-02-07T06:28:15",require_time:0}),b=(0,o.Z)(v,2),g=b[0],k=b[1],j=(0,r.useState)(!1),Z=(0,o.Z)(j,2),w=Z[0],y=Z[1],C=(0,r.useRef)({}),S=(0,r.useCallback)((function(e){k(e),y(!0)}),[]),N=(0,r.useCallback)((function(e){return e.exist?0===e.countDown?"\u5f85\u6536\u5272":e.countDown>0?"\u751f\u4ea7\u4e2d":void 0:"\u5f85\u751f\u4ea7"}),[]),P=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var r,a,s,c,l,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfstownlease",scope:"dfstownlease",table:"assets",json:!0,lower_bound:t,upper_bound:t},e.next=3,Le.getTableRows(r);case 3:if(a=e.sent,s=(0,o.Z)(a,2),c=s[0],l=s[1],!c){e.next=11;break}return ne.ZP.error("\u83b7\u53d6rent assets\u5931\u8d25",i),n(F("\u83b7\u53d6rent assets\u5931\u8d25")),e.abrupt("return");case 11:if((u=l.rows||[]).length){e.next=16;break}return ne.ZP.error("\u83b7\u53d6rent assets\u5931\u8d25",i),n(F("\u83b7\u53d6rent assets\u5931\u8d25")),e.abrupt("return");case 16:C.current=u[0],C.current.level=null,C.current.task={countDown:0,exist:!1},C.current.multiple=1,C.current.round=1,C.current.spinning=!1;case 22:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,i]),T=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var r,a,s,c,l,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfsmetaverse",scope:t,table:"stats",json:!0},e.next=3,Le.getTableRows(r);case 3:if(a=e.sent,s=(0,o.Z)(a,2),c=s[0],l=s[1],!c){e.next=11;break}return ne.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",i),n(F("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 11:if((u=l.rows||[]).length){e.next=16;break}return ne.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",i),n(F("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 16:C.current.level=u[0].val,C.current.multiple=C.current.level;case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,i]),O=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var r,a,s,l,u,f,p,x,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfsmetaverse",scope:"dfsmetaverse",table:"tasks",lower_bound:t,upper_bound:t,json:!0},e.next=3,Le.getTableRows(r);case 3:if(a=e.sent,s=(0,o.Z)(a,2),l=s[0],u=s[1],!l){e.next=11;break}return ne.ZP.error("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25",i),n(F("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25")),e.abrupt("return");case 11:if((f=u.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:C.current.task=f[0],C.current.task.create_time=h()("".concat(C.current.task.create_time,".000+0000")).format(),p=h()("".concat(C.current.task.mature_time,".000+0000")),C.current.task.mature_time=p.format(),C.current.task.end_time=p.format("YYYY-MM-DD HH:mm:ss"),x=p.diff(h()()),C.current.task.countDown=x<=0?0:x,C.current.task.exist=!0,m=C.current.task.product.split(" "),C.current.task.product={num:parseInt(m[0]).toFixed(0),name:c[m[1]]};case 24:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,i,c]),D=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.spinning=!0,x(),e.next=4,P(t.id);case 4:return e.next=6,T(t.id);case 6:return e.next=8,O(t.id);case 8:t.spinning=!1,r=0;case 10:if(!(r<f[t.collection].length)){e.next=17;break}if(f[t.collection][r].id!==t.id){e.next=14;break}return f[t.collection][r]=C.current,e.abrupt("break",17);case 14:r++,e.next=10;break;case 17:n(Y(f)),x();case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[P,T,O,x,n,f]),E=(0,r.useCallback)((function(e){y(!1),e&&(g.spinning=!0,setTimeout((function(){return D(g)}),i))}),[g,i,D]),_=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var a,s,c,l,u,f,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,s=t.permissions,c={actions:[{account:"dfstownlease",name:"harvest",authorization:[{actor:a,permission:s}],data:{user:a,taskid:r.id}}]},r.spinning=!0,x(),e.next=7,Le.transact(c);case 7:if(l=e.sent,u=(0,o.Z)(l,2),f=u[0],p=u[1],!f){e.next=18;break}return ne.ZP.error(Xe(f.toString()),5),console.log(f),r.spinning=!1,x(),n(F(Xe(f.toString()))),e.abrupt("return");case 18:p&&(ne.ZP.success("Success"),console.log(p),setTimeout((function(){return D(r)}),i));case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t,n,x,D,i]),I=(0,r.useCallback)((function(e){var n=e.elem.renting,t=e.elem.end_time,r=h()("".concat(t,".000+0000")),s=h()("".concat(t,".000+0000")).format("MM-DD HH:mm"),c=r.diff(h()());return(0,Be.jsx)(ue.Z,{size:"large",spinning:e.elem.spinning,children:(0,Be.jsx)(ae.Z,{style:0!==e.index?{marginTop:10}:{marginTop:0},hoverable:!0,actions:[(0,Be.jsx)(se.Z,{type:"link",size:"small",disabled:!!e.elem.task.exist||!n||c<=0,onClick:function(){return S(e.elem)},children:"\u751f\u4ea7"}),(0,Be.jsx)(se.Z,{type:"link",size:"small",onClick:function(){return D(e.elem)},children:"\u5237\u65b0"}),(0,Be.jsxs)("div",{className:"flexcc",children:[(0,Be.jsx)(oe.Z,{dot:e.elem.task.exist&&0===e.elem.task.countDown,children:(0,Be.jsx)(se.Z,{type:"link",size:"small",disabled:!e.elem.task.exist,onClick:function(){return _(e.elem)},children:"\u6536\u5272"})}),(0,Be.jsx)(qe.Z,{placement:"left",title:"\u4ee3\u7406\u7528\u6237\u6536\u5272\u4f1a\u6709\u5956\u52b1\uff0c\u5f53\u524d\u5956\u52b1\u4e3a\uff1a"+u.reward_fee,trigger:"click",children:(0,Be.jsx)(Sn.Z,{style:{color:"rgba(0, 0, 0, 0.25)"},className:"rml-2"})})]})],children:(0,Be.jsx)(ae.Z.Meta,{className:"land"===e.elem.collection?"land":"",avatar:(0,Be.jsx)(oe.Z,{count:e.elem.level,size:"default",style:{backgroundColor:"#1890ff"},children:(0,Be.jsx)(sn.C,{shape:"square",src:"https://cdn.jsdelivr.net/gh/defis-net/material3/Town/shop/".concat(e.elem.collection,".png")})}),title:(0,Be.jsxs)("div",{className:"flexbc",children:[(0,Be.jsxs)("div",{children:[(0,Be.jsx)(cn.Z,{color:"blue",children:a[e.elem.collection]}),n?(0,Be.jsx)(cn.Z,{color:"green",children:(0,Be.jsx)(kn.Z,{})}):(0,Be.jsx)(cn.Z,{color:"red",children:(0,Be.jsx)(jn.Z,{})}),"2106-02-07T06:28:15"!==t&&n?c>0?(0,Be.jsx)(cn.Z,{color:"green",children:s}):(0,Be.jsx)(cn.Z,{color:"red",children:s}):""]}),(0,Be.jsxs)(cn.Z,{style:{marginRight:"0"},color:"blue",children:["#",e.elem.id]})]}),description:(0,Be.jsxs)("div",{children:[(0,Be.jsxs)("div",{className:"flexsc",children:[(0,Be.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u72b6\u6001\uff1a",N(e.elem.task)]}),(0,Be.jsxs)("div",{style:{width:"53%"},className:"flexsc flex-grow-1 fs-small",children:["\u5012\u8ba1\u65f6\u95f4\uff1a",(0,Be.jsx)(ln.Z.Countdown,{valueStyle:{fontSize:"13px",color:"rgba(0, 0, 0, 0.45)"},value:e.elem.task.mature_time,format:"HH:mm:ss"})]})]}),(0,Be.jsxs)("div",{className:"flexsc",children:[(0,Be.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u4ea7\u54c1\uff1a",e.elem.task.exist?e.elem.task.product.num+"\u4e2a"+e.elem.task.product.name:"\u65e0"]}),(0,Be.jsxs)("div",{style:{width:"53%"},className:"flex-grow-1 fs-small",children:["\u5b8c\u6210\u65f6\u95f4\uff1a",e.elem.task.exist?e.elem.task.end_time.slice(5,10)+" "+e.elem.task.end_time.slice(11,16):"\u65e0"]})]})]})})})})}),[N,S,_,a,u,D]),R=(0,r.useCallback)((function(e){var n=0;if("\u5168\u90e8"===e.name)for(var t in f)n+=f[t].length;else if("\u519c\u573a"===e.name)n=f.land.length;else if("\u7267\u573a"===e.name)for(var r in f)!f[r].length||"cow"!==f[r][0].collection&&"chicken"!==f[r][0].collection&&"sheep"!==f[r][0].collection||(n+=f[r].length);else{if("\u5de5\u5382"!==e.name)return n+=f[e.name].length,(0,Be.jsx)(oe.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:n,children:a[e.name]});for(var s in f)f[s].length&&"cow"!==f[s][0].collection&&"chicken"!==f[s][0].collection&&"sheep"!==f[s][0].collection&&"land"!==f[s][0].collection&&(n+=f[s].length)}return(0,Be.jsx)(oe.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:n,children:e.name})}),[f,a]),A=(0,r.useCallback)((function(){var e=[],n=function(n){if(f[n].length){var t=[];f[n].forEach((function(r,a){t.push((0,Be.jsx)(I,{elem:r,index:t.length},e.length*f[n].length+a))})),e.push((0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(R,{name:f[n][0].collection}),children:[(0,Be.jsx)(an,{}),t]},String(e.length+5)))}};for(var t in f)n(t);return e}),[f]),z=(0,r.useCallback)((function(){var e=[];for(var n in f)f[n].length&&f[n].forEach((function(n){e.push((0,Be.jsx)(I,{elem:n,index:e.length},e.length))}));return e}),[f]),L=(0,r.useCallback)((function(){var e=[];return f.land.forEach((function(n){e.push((0,Be.jsx)(I,{elem:n,index:e.length},e.length))})),e}),[f]),G=(0,r.useCallback)((function(){var e=[];for(var n in f)!f[n].length||"cow"!==f[n][0].collection&&"chicken"!==f[n][0].collection&&"sheep"!==f[n][0].collection||f[n].forEach((function(n){e.push((0,Be.jsx)(I,{elem:n,index:e.length},e.length))}));return e}),[f]),B=(0,r.useCallback)((function(){var e=[];for(var n in f)f[n].length&&"cow"!==f[n][0].collection&&"chicken"!==f[n][0].collection&&"sheep"!==f[n][0].collection&&"land"!==f[n][0].collection&&f[n].forEach((function(n){e.push((0,Be.jsx)(I,{elem:n,index:e.length},e.length))}));return e}),[f]),H=(0,r.useCallback)((function(){"4"===p&&n(U("0"))}),[p,n]);return(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsxs)(de.Z,{tabBarStyle:{margin:"0 0 0 0"},defaultActiveKey:"1",onChange:H,children:[(0,Be.jsx)(de.Z.TabPane,{},"100"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(R,{name:"\u5168\u90e8"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(z,{}),(0,Be.jsx)(un.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}})]},"1"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(R,{name:"\u519c\u573a"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(L,{}),(0,Be.jsx)(un.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}})]},"2"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(R,{name:"\u7267\u573a"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(G,{}),(0,Be.jsx)(un.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}})]},"3"),(0,Be.jsxs)(de.Z.TabPane,{className:"rmb-2",tab:(0,Be.jsx)(R,{name:"\u5de5\u5382"}),children:[(0,Be.jsx)(an,{}),(0,Be.jsx)(B,{}),(0,Be.jsx)(un.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,Be.jsx)(un.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}})]},"4"),A(),(0,Be.jsx)(de.Z.TabPane,{},"101")]}),(0,Be.jsx)(xn,{visible:w,curCard:g,handleCloseDialog:E})]})}var Pn=(0,r.memo)(Nn);function Tn(e){var n=(0,s.I0)(),t=(0,s.v9)((function(e){return e.app.account})),a=(0,r.useState)(!1),c=(0,o.Z)(a,2),i=c[0],u=c[1],f=(0,r.useRef)(i),p=(0,r.useState)(!1),h=(0,o.Z)(p,2),x=h[0],m=h[1],v=(0,r.useState)("0.0000 DCASH"),b=(0,o.Z)(v,2),g=b[0],k=b[1];console.log("MyRewardModal render"),(0,r.useEffect)((function(){u(e.visible)}),[e.visible]);var j=(0,r.useCallback)((function(){m(!1),u(!1),e.handleCloseDialog()}),[e]),Z=(0,r.useCallback)((0,l.Z)(d().mark((function e(){var r,a,s,c,i,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfstownlease",scope:"dfstownlease",table:"balances",lower_bound:t.name,upper_bound:t.name,json:!0},e.next=3,Le.getTableRows(r);case 3:if(a=e.sent,s=(0,o.Z)(a,2),c=s[0],i=s[1],!c){e.next=11;break}return ne.ZP.error("\u83b7\u53d6\u8d26\u53f7\u5956\u52b1\u8d44\u4ea7\u5931\u8d25",5),n(F("\u83b7\u53d6\u8d26\u53f7\u5956\u52b1\u8d44\u4ea7\u5931\u8d25")),e.abrupt("return");case 11:if((l=i.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:k(l[0].balance);case 15:case"end":return e.stop()}}),e)}))),[t,n]),w=(0,r.useCallback)((function(){Z()}),[Z]),y=(0,r.useCallback)((0,l.Z)(d().mark((function r(){var a,s,c,i,l,f,p;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.name,s=t.permissions,c={actions:[{account:"dfstownlease",name:"claim",authorization:[{actor:a,permission:s}],data:{owner:a}}]},m(!0),r.next=6,Le.transact(c);case 6:if(i=r.sent,l=(0,o.Z)(i,2),f=l[0],p=l[1],!f){r.next=16;break}return ne.ZP.error(Xe(f.toString()),5),console.log(f),m(!1),n(F(Xe(f.toString()))),r.abrupt("return");case 16:p&&(m(!1),ne.ZP.success("Success"),u(!1),e.handleCloseDialog(!1),console.log(p));case 17:case"end":return r.stop()}}),r)}))),[t,n,e]);return(0,r.useEffect)((function(){f.current=i,i&&w()}),[i,w]),(0,Be.jsx)(Ye.Z,{title:"\u5956\u52b1\u64cd\u4f5c",visible:i,width:"94%",bodyStyle:{padding:"0px 24px"},onOk:y,onCancel:j,cancelText:"\u53d6\u6d88",okText:"\u9886\u53d6",transitionName:"",maskTransitionName:"",children:(0,Be.jsx)(ue.Z,{size:"large",spinning:x,children:(0,Be.jsxs)("div",{className:"rmt-3 rmb-3 flexsc",children:["\u6211\u7684\u5956\u52b1\uff1a",g]})})})}var On=(0,r.memo)(Tn),Dn=t(39498);function En(e){var n=(0,s.I0)(),t=(0,s.v9)((function(e){return e.app.account})),a=(0,r.useState)(!1),c=(0,o.Z)(a,2),i=c[0],u=c[1],f=(0,r.useRef)(i),p=(0,r.useState)(!1),h=(0,o.Z)(p,2),x=h[0],m=h[1],v=(0,r.useState)(""),b=(0,o.Z)(v,2),g=b[0],k=b[1],j=(0,r.useState)(!0),Z=(0,o.Z)(j,2),w=Z[0],y=Z[1];console.log("LockModal render"),(0,r.useEffect)((function(){u(e.visible)}),[e.visible]);var C=(0,r.useCallback)((function(){m(!1),u(!1),e.handleCloseDialog(!1)}),[e]),S=(0,r.useCallback)((function(){}),[]),N=(0,r.useCallback)((0,l.Z)(d().mark((function r(){var a,s,c,i,l,f,p;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.name,s=t.permissions,c={actions:[{account:"dfstownlease",name:"lock",authorization:[{actor:a,permission:s}],data:{lock:w?1:0,msg:g}}]},m(!0),r.next=6,Le.transact(c);case 6:if(i=r.sent,l=(0,o.Z)(i,2),f=l[0],p=l[1],!f){r.next=16;break}return ne.ZP.error(Xe(f.toString()),5),console.log(f),m(!1),n(F(Xe(f.toString()))),r.abrupt("return");case 16:p&&(m(!1),ne.ZP.success("Success"),u(!1),e.handleCloseDialog(!1),console.log(p));case 17:case"end":return r.stop()}}),r)}))),[t,w,g,n,e]),P=(0,r.useCallback)((function(e){k(e.target.value)}),[]),T=(0,r.useCallback)((function(e){y(e.target.checked)}),[]);return(0,r.useEffect)((function(){f.current=i,i&&S()}),[i,S]),(0,Be.jsx)(Ye.Z,{title:"\u9501\u5b9a\u64cd\u4f5c",visible:i,width:"94%",bodyStyle:{padding:"0px 24px"},onOk:N,onCancel:C,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,Be.jsxs)(ue.Z,{size:"large",spinning:x,children:[(0,Be.jsx)("div",{className:"rmt-3 flexsc",children:(0,Be.jsx)(le.Z,{checked:w,onChange:T,children:"\u9501\u5b9a\u5408\u7ea6"})}),(0,Be.jsx)("div",{className:"rmt-3 rmb-3 flexsc",children:(0,Be.jsx)(Dn.Z,{addonBefore:"\u63d0\u793a\u4fe1\u606f\uff1a",value:g,onChange:P})})]})})}var _n=(0,r.memo)(En);function In(e){var n=(0,s.I0)(),t=(0,s.v9)((function(e){return e.app.account})),a=(0,r.useState)(!1),c=(0,o.Z)(a,2),i=c[0],u=c[1],f=(0,r.useRef)(i),p=(0,r.useState)(!1),h=(0,o.Z)(p,2),x=h[0],m=h[1],v=(0,r.useState)(0),b=(0,o.Z)(v,2),g=b[0],k=b[1],j=(0,r.useState)(0),Z=(0,o.Z)(j,2),w=Z[0],y=Z[1],C=(0,r.useState)(0),S=(0,o.Z)(C,2),N=S[0],P=S[1],T=(0,r.useState)(0),O=(0,o.Z)(T,2),D=O[0],E=O[1];console.log("FeeModal render"),(0,r.useEffect)((function(){u(e.visible)}),[e.visible]);var _=(0,r.useCallback)((function(){m(!1),u(!1),e.handleCloseDialog(!1)}),[e]),I=(0,r.useCallback)((function(){}),[]),R=(0,r.useCallback)((0,l.Z)(d().mark((function r(){var a,s,c,i,l,f,p;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.name,s=t.permissions,c={actions:[{account:"dfstownlease",name:"setfee",authorization:[{actor:a,permission:s}],data:{rent_fee:Qe()(g).toFixed(4,3)+" DCASH",service_fee:Qe()(w).toFixed(4,3)+" DCASH",reward_fee:Qe()(N).toFixed(4,3)+" DCASH",reward_time:parseInt(D)}}]},m(!0),r.next=6,Le.transact(c);case 6:if(i=r.sent,l=(0,o.Z)(i,2),f=l[0],p=l[1],!f){r.next=16;break}return ne.ZP.error(Xe(f.toString()),5),console.log(f),m(!1),n(F(Xe(f.toString()))),r.abrupt("return");case 16:p&&(m(!1),ne.ZP.success("Success"),u(!1),e.handleCloseDialog(!1),console.log(p));case 17:case"end":return r.stop()}}),r)}))),[t,g,w,N,D,n,e]),A=(0,r.useCallback)((function(e){k(e.target.value)}),[]),z=(0,r.useCallback)((function(e){y(e.target.value)}),[]),L=(0,r.useCallback)((function(e){P(e.target.value)}),[]),Y=(0,r.useCallback)((function(e){E(e.target.value)}),[]);return(0,r.useEffect)((function(){f.current=i,i&&I()}),[i,I]),(0,Be.jsx)(Ye.Z,{title:"\u8d39\u7528\u64cd\u4f5c",visible:i,width:"94%",bodyStyle:{padding:"0px 24px"},onOk:R,onCancel:_,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,Be.jsxs)(ue.Z,{size:"large",spinning:x,children:[(0,Be.jsx)("div",{className:"rmt-3 flexsc",children:(0,Be.jsx)(Dn.Z,{addonBefore:"\u79df\u7528\u8d39\uff1a",addonAfter:"DCASH",value:g,onChange:A})}),(0,Be.jsx)("div",{className:"rmt-3 flexsc",children:(0,Be.jsx)(Dn.Z,{addonBefore:"\u670d\u52a1\u8d39\uff1a",addonAfter:"DCASH",value:w,onChange:z})}),(0,Be.jsx)("div",{className:"rmt-3 flexsc",children:(0,Be.jsx)(Dn.Z,{addonBefore:"\u5956\u52b1\u8d39\uff1a",addonAfter:"DCASH",value:N,onChange:L})}),(0,Be.jsx)("div",{className:"rmt-3 rmb-3 flexsc",children:(0,Be.jsx)(Dn.Z,{addonBefore:"\u5956\u52b1\u65f6\u95f4\uff1a",value:D,onChange:Y})})]})})}var Rn=(0,r.memo)(In);function An(e){var n=(0,s.v9)((function(e){return e.app.log})),t=(0,r.useState)(!1),a=(0,o.Z)(t,2),c=a[0],i=a[1],l=(0,r.useRef)(c),u=(0,s.I0)();console.log("LogModal render"),(0,r.useEffect)((function(){i(e.visible)}),[e.visible]);var d=(0,r.useCallback)((function(){i(!1),e.handleCloseDialog(!1)}),[e]),f=(0,r.useCallback)((function(){}),[]),p=(0,r.useCallback)((function(){u(z())}),[u]);return(0,r.useEffect)((function(){l.current=c,c&&f()}),[c,f]),(0,Be.jsx)(Ye.Z,{title:"\u65e5\u5fd7\u8bb0\u5f55",visible:c,width:"94%",bodyStyle:{padding:"0px 24px"},onOk:p,onCancel:d,cancelText:"\u53d6\u6d88",okText:"\u6e05\u9664",transitionName:"",maskTransitionName:"",children:(0,Be.jsx)("div",{className:"rmt-3 rmb-3",children:n?n.map((function(e,n){return(0,Be.jsx)("div",{children:"#"+e},n)})):(0,Be.jsx)(Be.Fragment,{})})})}var Fn=(0,r.memo)(An),zn=t(91333);function Ln(e){var n=(0,s.v9)((function(e){return e.app.myLoadOptions})),t=(0,s.v9)((function(e){return e.app.marketLoadOptions})),a=(0,s.v9)((function(e){return e.app.nftChinese})),c=(0,s.v9)((function(e){return e.app.nftEnglish})),i=(0,r.useState)(!1),l=(0,o.Z)(i,2),u=l[0],d=l[1],f=(0,r.useRef)(u),p=(0,r.useState)(["\u571f\u5730","\u5976\u725b","\u7ef5\u7f8a","\u9e21","\u9762\u5305\u574a","\u5b9d\u77f3\u5de5\u5382","\u9972\u6599\u5382","\u7eba\u7ec7\u5382","\u4e73\u5236\u54c1\u5e97","\u88c1\u7f1d\u5e97","\u5236\u7cd6\u5382","\u51b0\u6dc7\u6dcb\u5e97"])[0],h=(0,r.useState)(["\u571f\u5730","\u5976\u725b","\u7ef5\u7f8a","\u9e21","\u9762\u5305\u574a","\u5b9d\u77f3\u5de5\u5382","\u9972\u6599\u5382","\u7eba\u7ec7\u5382","\u4e73\u5236\u54c1\u5e97","\u88c1\u7f1d\u5e97","\u5236\u7cd6\u5382","\u51b0\u6dc7\u6dcb\u5e97"])[0],x=(0,r.useState)(n.map((function(e){return a[e]}))),m=(0,o.Z)(x,2),v=m[0],b=m[1],g=(0,r.useState)(t.map((function(e){return a[e]}))),k=(0,o.Z)(g,2),j=k[0],Z=k[1],w=(0,r.useState)(!!v.length&&v.length<h.length),y=(0,o.Z)(w,2),C=y[0],S=y[1],N=(0,r.useState)(!!j.length&&j.length<h.length),P=(0,o.Z)(N,2),T=P[0],O=P[1],D=(0,r.useState)(v.length===p.length),E=(0,o.Z)(D,2),_=E[0],I=E[1],R=(0,r.useState)(j.length===h.length),A=(0,o.Z)(R,2),F=A[0],z=A[1],L=(0,s.I0)();console.log("LoadModal render");var Y=(0,r.useCallback)((function(e){b(e),S(!!e.length&&e.length<p.length),I(e.length===p.length)}),[b,S,I,p]),G=(0,r.useCallback)((function(e){Z(e),O(!!e.length&&e.length<h.length),z(e.length===h.length)}),[Z,O,z,h]),U=(0,r.useCallback)((function(e){b(e.target.checked?p:[]),S(!1),I(e.target.checked)}),[b,S,I,p]),H=(0,r.useCallback)((function(e){Z(e.target.checked?h:[]),O(!1),z(e.target.checked)}),[Z,O,z,h]);(0,r.useEffect)((function(){d(e.visible)}),[e.visible]);var M=(0,r.useCallback)((function(){d(!1),e.handleCloseDialog(!1)}),[e]),J=(0,r.useCallback)((function(){}),[]),W=(0,r.useCallback)((function(){ne.ZP.success("Success"),d(!1),e.handleCloseDialog(!1),L(B(v.map((function(e){return c[e]})),j.map((function(e){return c[e]})))),setTimeout((function(){return window.location.reload()}),300)}),[L,v,j,c,e]);return(0,r.useEffect)((function(){f.current=u,u&&J()}),[u,J]),(0,Be.jsx)(Ye.Z,{title:"\u52a0\u8f7d\u8bbe\u7f6e",visible:u,width:"94%",style:{top:"50px"},bodyStyle:{padding:"0px 24px"},onOk:W,onCancel:M,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,Be.jsxs)("div",{className:"rmt-3 rmb-3",children:[(0,Be.jsx)(le.Z,{indeterminate:C,onChange:U,checked:_,children:(0,Be.jsx)("span",{className:"fw-bolder",children:"\u6211\u7684NFT"})}),(0,Be.jsx)("div",{className:"rmt-2",children:(0,Be.jsx)(le.Z.Group,{options:p,value:v,onChange:Y})}),(0,Be.jsx)(zn.Z,{}),(0,Be.jsx)(le.Z,{indeterminate:T,onChange:H,checked:F,children:(0,Be.jsx)("span",{className:"fw-bolder",children:"\u79df\u7528\u5e02\u573a"})}),(0,Be.jsx)("div",{className:"rmt-2",children:(0,Be.jsx)(le.Z.Group,{options:h,value:j,onChange:G})})]})})}var Yn=(0,r.memo)(Ln);function Gn(e){var n=(0,r.useState)(!1),t=(0,o.Z)(n,2),a=t[0],c=t[1],i=(0,r.useRef)(a),l=(0,s.I0)();console.log("UpdateModal render"),(0,r.useEffect)((function(){c(e.visible)}),[e.visible]);var u=(0,r.useCallback)((function(){c(!1),e.handleCloseDialog(!1)}),[e]),d=(0,r.useCallback)((function(){l(H(e.version))}),[l,e]),f=(0,r.useCallback)((function(){c(!1),e.handleCloseDialog(!1)}),[e]);return(0,r.useEffect)((function(){i.current=a,a&&d()}),[a,d]),(0,Be.jsx)(Ye.Z,{title:"\u66f4\u65b0\u8bb0\u5f55",visible:a,width:"94%",bodyStyle:{padding:"0px 24px"},onOk:f,onCancel:u,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,Be.jsxs)("div",{className:"rmt-3 rmb-3",children:[(0,Be.jsx)("div",{children:"V1.5.0@2022-03-22 \u589e\u52a0\u6392\u5e8f\u529f\u80fd"}),(0,Be.jsx)("div",{children:"V1.4.1@2022-03-20 \u4fee\u590d\u751f\u4ea7\u64cd\u4f5c\u9875\u9762\u4e2d\u6570\u91cf\u6216\u8005\u5468\u671f\u4e3a\u7a7a\u65f6\uff0c\u524d\u7aef\u5d29\u6e83\u7684\u95ee\u9898"}),(0,Be.jsx)("div",{className:"text-red",children:'V1.4.0@2022-03-19 \u589e\u52a0"\u52a0\u8f7d\u8bbe\u7f6e"\u548cTextLoop\u7684\u529f\u80fd'}),(0,Be.jsx)("div",{children:"V1.3.0@2022-03-17 \u589e\u52a0\u5237\u65b0\u7684\u529f\u80fd"}),(0,Be.jsx)("div",{children:"V1.2.0@2022-03-15 \u589e\u52a0\u6570\u91cf\u663e\u793a"}),(0,Be.jsx)("div",{children:"V1.1.1@2022-03-14 \u4fee\u590d\u5b8c\u6210\u65f6\u95f4\u663e\u793a\u95ee\u9898"}),(0,Be.jsx)("div",{children:"V1.1.0@2022-03-14 \u589e\u52a0Loading\u663e\u793a"}),(0,Be.jsx)("div",{children:"V1.0.1@2022-03-13 \u4fee\u590d\u672a\u767b\u9646\u7684\u65f6\u5019\uff0c\u5207\u6362tab\u65f6\u524d\u7aef\u4f1a\u62a5\u9519\u7684\u95ee\u9898"})]})})}var Un=(0,r.memo)(Gn);var Bn=function(){console.log("App render");var e="V1.5.0",n=(0,s.v9)((function(e){return e.app.account})),t=(0,s.v9)((function(e){return e.app.assets})),a=(0,s.v9)((function(e){return e.app.chinese})),u=(0,s.v9)((function(e){return e.app.freeCpu})),f=(0,s.v9)((function(e){return e.app.delay})),p=(0,s.v9)((function(e){return e.app.myLoadOptions})),x=(0,s.v9)((function(e){return e.app.marketLoadOptions})),m=(0,s.v9)((function(e){return e.app.lastVersion})),v=(0,s.v9)((function(e){return e.app.sort})),b=(0,r.useRef)(v),g=(0,s.I0)(),k=(0,r.useState)(!1),j=(0,o.Z)(k,2),Z=j[0],w=j[1],y=(0,r.useState)(!1),C=(0,o.Z)(y,2),S=C[0],N=C[1],P=(0,r.useState)(!1),T=(0,o.Z)(P,2),O=T[0],D=T[1],_=(0,r.useState)(!1),z=(0,o.Z)(_,2),L=z[0],Y=z[1],U=(0,r.useState)(!1),B=(0,o.Z)(U,2),H=B[0],M=B[1],J=(0,r.useState)(!1),W=(0,o.Z)(J,2),q=W[0],V=W[1],K=(0,r.useState)(!1),Q=(0,o.Z)(K,2),X=Q[0],$=Q[1],ee=(0,r.useState)(!1),xe=(0,o.Z)(ee,2),me=xe[0],ve=xe[1],be=(0,r.useState)(!1),ge=(0,o.Z)(be,2),ke=ge[0],je=ge[1],Ze=(0,r.useState)(!1),we=(0,o.Z)(Ze,2),ye=we[0],Ce=we[1],Se=(0,r.useState)("Loading 0%"),Pe=(0,o.Z)(Se,2),Te=Pe[0],Oe=Pe[1],De=(0,r.useState)(!1),Ee=(0,o.Z)(De,2),_e=Ee[0],Ie=Ee[1],Re=(0,r.useRef)(!1),Ae=(0,r.useRef)({land:[],gemfactory:[],feedmill:[],sugarmill:[],textilemill:[],tailorshop:[],bakery:[],cow:[],sheep:[],chicken:[],dairyshop:[],icecreamshop:[]}),Fe=(0,r.useRef)({land:[],gemfactory:[],feedmill:[],sugarmill:[],textilemill:[],tailorshop:[],bakery:[],cow:[],sheep:[],chicken:[],dairyshop:[],icecreamshop:[]}),ze=(0,r.useRef)({}),Ye=(0,r.useCallback)((0,l.Z)(d().mark((function e(){var t,r,a,s,c,l,u,h,x;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,r="",a=[];case 3:if(!t){e.next=21;break}return s={code:"dfsnftassets",scope:n.name+" ",table:"assets",limit:1e3,json:!0,lower_bound:r},e.next=7,Le.getTableRows(s);case 7:if(c=e.sent,l=(0,o.Z)(c,2),u=l[0],h=l[1],!u){e.next=15;break}return ne.ZP.error("\u83b7\u53d6\u8d26\u53f7NFT\u5931\u8d25",f),g(F("\u83b7\u53d6\u8d26\u53f7NFT\u5931\u8d25")),e.abrupt("return");case 15:x=h.rows||[],t=h.more,r=h.next_key,a.push.apply(a,(0,i.Z)(x)),e.next=3;break;case 21:a.forEach((function(e){e.level=null,e.task={countDown:0,exist:!1},e.multiple=1,e.round=1,e.spinning=!1,p.includes(e.collection)&&("land"===e.collection?Ae.current.land.push(e):"gemfactory"===e.collection?Ae.current.gemfactory.push(e):"feedmill"===e.collection?Ae.current.feedmill.push(e):"bakery"===e.collection?Ae.current.bakery.push(e):"cow"===e.collection?Ae.current.cow.push(e):"sheep"===e.collection?Ae.current.sheep.push(e):"chicken"===e.collection?Ae.current.chicken.push(e):"tailorshop"===e.collection?Ae.current.tailorshop.push(e):"textilemill"===e.collection?Ae.current.textilemill.push(e):"sugarmill"===e.collection?Ae.current.sugarmill.push(e):"dairyshop"===e.collection?Ae.current.dairyshop.push(e):"icecreamshop"===e.collection&&Ae.current.icecreamshop.push(e))}));case 22:case"end":return e.stop()}}),e)}))),[n.name,g,f,p]),Ge=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,a,s,i,l,u,p,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,c.Z)(n),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=23;break}return a=r.value,s={code:"dfsmetaverse",scope:a.id,table:"stats",json:!0},e.next=8,Le.getTableRows(s);case 8:if(i=e.sent,l=(0,o.Z)(i,2),u=l[0],p=l[1],!u){e.next=16;break}return ne.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",f),g(F("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 16:if((h=p.rows||[]).length){e.next=19;break}return e.abrupt("continue",21);case 19:a.level=h[0].val,a.multiple=a.level;case 21:e.next=3;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),t.e(e.t0);case 28:return e.prev=28,t.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[1,25,28,31]])})));return function(n){return e.apply(this,arguments)}}(),[g,f]),Ue=(0,r.useCallback)((0,l.Z)(d().mark((function e(){var n,t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1,e.t0=d().keys(Ae.current);case 2:if((e.t1=e.t0()).done){e.next=9;break}return t=e.t1.value,e.next=6,Ge(Ae.current[t]);case 6:Oe("Loading 20%+"+n++),e.next=2;break;case 9:e.t2=d().keys(Fe.current);case 10:if((e.t3=e.t2()).done){e.next=17;break}return r=e.t3.value,e.next=14,Ge(Fe.current[r]);case 14:Oe("Loading 20%+"+n++),e.next=10;break;case 17:case"end":return e.stop()}}),e)}))),[Ge]),He=(0,r.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var t,r,s,i,l,u,p,x,m,v,b,k;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,c.Z)(n),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=31;break}return s=r.value,i={code:"dfsmetaverse",scope:"dfsmetaverse",table:"tasks",lower_bound:s.id,upper_bound:s.id,json:!0},e.next=8,Le.getTableRows(i);case 8:if(l=e.sent,u=(0,o.Z)(l,2),p=u[0],x=u[1],!p){e.next=16;break}return ne.ZP.error("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25",f),g(F("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25")),e.abrupt("return");case 16:if((m=x.rows||[]).length){e.next=19;break}return e.abrupt("continue",29);case 19:s.task=m[0],s.task.create_time=h()("".concat(s.task.create_time,".000+0000")).format(),v=h()("".concat(s.task.mature_time,".000+0000")),s.task.mature_time=v.format(),s.task.end_time=v.format("YYYY-MM-DD HH:mm:ss"),b=v.diff(h()()),s.task.countDown=b<=0?0:b,s.task.exist=!0,k=s.task.product.split(" "),s.task.product={num:parseInt(k[0]).toFixed(0),name:a[k[1]]};case 29:e.next=3;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(1),t.e(e.t0);case 36:return e.prev=36,t.f(),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[1,33,36,39]])})));return function(n){return e.apply(this,arguments)}}(),[a,g,f]),Je=(0,r.useCallback)((0,l.Z)(d().mark((function e(){var n,t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1,e.t0=d().keys(Ae.current);case 2:if((e.t1=e.t0()).done){e.next=9;break}return t=e.t1.value,e.next=6,He(Ae.current[t]);case 6:Oe("Loading 30%+"+n++),e.next=2;break;case 9:e.t2=d().keys(Fe.current);case 10:if((e.t3=e.t2()).done){e.next=17;break}return r=e.t3.value,e.next=14,He(Fe.current[r]);case 14:Oe("Loading 30%+"+n++),e.next=10;break;case 17:case"end":return e.stop()}}),e)}))),[He]),We=(0,r.useCallback)((0,l.Z)(d().mark((function e(){var n,t,r,a,s,c,l,u,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,t="",r=[];case 3:if(!n){e.next=21;break}return a={code:"dfstownlease",scope:"dfstownlease",table:"assets",limit:1e3,json:!0,lower_bound:t},e.next=7,Le.getTableRows(a);case 7:if(s=e.sent,c=(0,o.Z)(s,2),l=c[0],u=c[1],!l){e.next=15;break}return ne.ZP.error("\u83b7\u53d6rent assets\u5931\u8d25",f),g(F("\u83b7\u53d6rent assets\u5931\u8d25")),e.abrupt("return");case 15:p=u.rows||[],n=u.more,t=u.next_key,r.push.apply(r,(0,i.Z)(p)),e.next=3;break;case 21:r.forEach((function(e){e.level=null,e.task={countDown:0,exist:!1},e.multiple=1,e.round=1,e.spinning=!1,x.includes(e.collection)&&("land"===e.collection?Fe.current.land.push(e):"gemfactory"===e.collection?Fe.current.gemfactory.push(e):"feedmill"===e.collection?Fe.current.feedmill.push(e):"bakery"===e.collection?Fe.current.bakery.push(e):"cow"===e.collection?Fe.current.cow.push(e):"sheep"===e.collection?Fe.current.sheep.push(e):"chicken"===e.collection?Fe.current.chicken.push(e):"tailorshop"===e.collection?Fe.current.tailorshop.push(e):"textilemill"===e.collection?Fe.current.textilemill.push(e):"sugarmill"===e.collection?Fe.current.sugarmill.push(e):"dairyshop"===e.collection?Fe.current.dairyshop.push(e):"icecreamshop"===e.collection&&Fe.current.icecreamshop.push(e))}));case 22:case"end":return e.stop()}}),e)}))),[g,f,x]),qe=(0,r.useCallback)((0,l.Z)(d().mark((function e(){var n,t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={code:"dfsmetaverse",scope:"dfsmetaverse",table:"works",limit:1e3,json:!0},e.next=3,Le.getTableRows(n);case 3:if(t=e.sent,r=(0,o.Z)(t,2),a=r[0],s=r[1],!a){e.next=11;break}return ne.ZP.error("\u83b7\u53d6\u5de5\u4f5c\u5931\u8d25",f),g(F("\u83b7\u53d6\u5de5\u4f5c\u5931\u8d25")),e.abrupt("return");case 11:if((c=s.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:g(I(c));case 15:case"end":return e.stop()}}),e)}))),[g,f]),Ve=(0,r.useCallback)((0,l.Z)(d().mark((function e(){var t,r,a,s,c,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfsfarmitems",scope:n.name+" ",table:"accounts",limit:1e3,json:!0},e.next=3,Le.getTableRows(t);case 3:if(r=e.sent,a=(0,o.Z)(r,2),s=a[0],c=a[1],!s){e.next=11;break}return ne.ZP.error("\u83b7\u53d6\u8d26\u53f7\u8d44\u4ea7\u5931\u8d25",f),g(F("\u83b7\u53d6\u8d26\u53f7\u8d44\u4ea7\u5931\u8d25")),e.abrupt("return");case 11:if((i=c.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:i.forEach((function(e){var n=e.balance.split(" ");ze.current[n[1]]=n[0]}));case 15:case"end":return e.stop()}}),e)}))),[n.name,g,f]),Ke=(0,r.useCallback)((0,l.Z)(d().mark((function e(){var t,r,a,s,c,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"usdxusdxusdx",scope:n.name+" ",table:"accounts",lower_bound:"USDC",upper_bound:"USDC",json:!0},e.next=3,Le.getTableRows(t);case 3:if(r=e.sent,a=(0,o.Z)(r,2),s=a[0],c=a[1],!s){e.next=11;break}return ne.ZP.error("\u83b7\u53d6\u8d26\u53f7USDC\u8d44\u4ea7\u5931\u8d25",f),g(F("\u83b7\u53d6\u8d26\u53f7USDC\u8d44\u4ea7\u5931\u8d25")),e.abrupt("return");case 11:if((i=c.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:i.forEach((function(e){var n=e.balance.split(" ");ze.current[n[1]]=n[0]}));case 15:case"end":return e.stop()}}),e)}))),[n.name,g,f]),Qe=(0,r.useCallback)((0,l.Z)(d().mark((function e(){var t,r,a,s,c,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfxtokenmain",scope:n.name+" ",table:"accounts",lower_bound:"DFG",upper_bound:"DFG",json:!0},e.next=3,Le.getTableRows(t);case 3:if(r=e.sent,a=(0,o.Z)(r,2),s=a[0],c=a[1],!s){e.next=11;break}return ne.ZP.error("\u83b7\u53d6\u8d26\u53f7DFG\u8d44\u4ea7\u5931\u8d25",f),g(F("\u83b7\u53d6\u8d26\u53f7DFG\u8d44\u4ea7\u5931\u8d25")),e.abrupt("return");case 11:if((i=c.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:i.forEach((function(e){var n=e.balance.split(" ");ze.current[n[1]]=n[0]}));case 15:case"end":return e.stop()}}),e)}))),[n.name,g,f]),$e=(0,r.useCallback)((0,l.Z)(d().mark((function e(){var t,r,a,s,c,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"tagtokenmain",scope:n.name+" ",table:"accounts",lower_bound:"TAG",upper_bound:"TAG",json:!0},e.next=3,Le.getTableRows(t);case 3:if(r=e.sent,a=(0,o.Z)(r,2),s=a[0],c=a[1],!s){e.next=11;break}return ne.ZP.error("\u83b7\u53d6\u8d26\u53f7TAG\u8d44\u4ea7\u5931\u8d25",f),g(F("\u83b7\u53d6\u8d26\u53f7TAG\u8d44\u4ea7\u5931\u8d25")),e.abrupt("return");case 11:if((i=c.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:i.forEach((function(e){var n=e.balance.split(" ");ze.current[n[1]]=n[0]}));case 15:case"end":return e.stop()}}),e)}))),[n.name,g,f]),en=(0,r.useCallback)((0,l.Z)(d().mark((function e(){var n,t,r,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={code:"dfstownlease",scope:"dfstownlease",table:"global",limit:1e3,json:!0},e.next=3,Le.getTableRows(n);case 3:if(t=e.sent,r=(0,o.Z)(t,2),a=r[0],s=r[1],!a){e.next=11;break}return ne.ZP.error("\u83b7\u53d6\u5168\u5c40\u914d\u7f6e\u4fe1\u606f\u5931\u8d25",f),g(F("\u83b7\u53d6\u5168\u5c40\u914d\u7f6e\u4fe1\u606f\u5931\u8d25")),e.abrupt("return");case 11:if((c=s.rows||[]).length){e.next=16;break}return ne.ZP.error("\u83b7\u53d6\u5168\u5c40\u914d\u7f6e\u4fe1\u606f\u4e3a\u7a7a",f),g(F("\u83b7\u53d6\u5168\u5c40\u914d\u7f6e\u4fe1\u606f\u4e3a\u7a7a")),e.abrupt("return");case 16:g(A(c[0]));case 17:case"end":return e.stop()}}),e)}))),[g,f]),nn=(0,r.useCallback)((function(){Ne().get("https://api.eospowerup.io/freePowerup/"+n.name).then((function(e){"success"===e.data.result.status?te.Z.success({message:"\u6210\u529f",description:"\u6bcf\u4e2a\u8d26\u53f7\u6bcf\u5929\u53ef\u4ee5\u514d\u8d39PowerUp 2\u6b21\uff0c\u91cd\u7f6e\u65f6\u95f4\u4e3a\uff1a\n"+h()(e.data.rateLimit.resetTime).format("YYYY-MM-DD HH:mm:ss")}):"reachedFreeQuota"===e.data.result.status?te.Z.error({message:"\u5931\u8d25",description:"\u8d26\u53f7\u5df2PowerUp 2\u6b21\uff0c\u91cd\u7f6e\u65f6\u95f4\u4e3a\uff1a\n"+h()(e.data.rateLimit.resetTime).format("YYYY-MM-DD HH:mm:ss")}):(te.Z.error({message:"\u5931\u8d25",description:e.data.result.status}),g(F(e.data.result.status)))}),(function(e){var n;n=e instanceof Error?e.message:e.response?JSON.stringify(e.response.data):e.request?"no response":"object"==typeof e?JSON.stringify(e):e,te.Z.error({message:"\u5931\u8d25",description:n}),g(F(n))}))}),[n,g]),tn=(0,r.useCallback)((function(){N(!1),Y(!1),M(!1),V(!1),$(!1),ve(!1),je(!1)}),[]),rn=(0,r.useCallback)((function(){return(0,Be.jsxs)("div",{className:"flexas",children:[(0,Be.jsxs)("div",{children:[(0,Be.jsxs)("div",{children:["\u9ea6\u5b50\uff1a",parseInt(t.WHEAT)||"0"]}),(0,Be.jsxs)("div",{children:["\u7389\u7c73\uff1a",parseInt(t.CORN)||"0"]}),(0,Be.jsxs)("div",{children:["\u80e1\u841d\u535c\uff1a",parseInt(t.CARROT)||"0"]}),(0,Be.jsxs)("div",{children:["\u725b\u9972\u6599\uff1a",parseInt(t.COWFOOD)||"0"]}),(0,Be.jsxs)("div",{children:["\u9e21\u9972\u6599\uff1a",parseInt(t.CHKFOOD)||"0"]}),(0,Be.jsxs)("div",{children:["\u7f8a\u9972\u6599\uff1a",parseInt(t.SHPFOOD)||"0"]}),(0,Be.jsxs)("div",{children:["\u725b\u5976\uff1a",parseInt(t.MILK)||"0"]}),(0,Be.jsxs)("div",{children:["\u9e21\u86cb\uff1a",parseInt(t.EGG)||"0"]}),(0,Be.jsxs)("div",{children:["\u7f8a\u6bdb\uff1a",parseInt(t.WOOL)||"0"]}),(0,Be.jsxs)("div",{children:["\u9762\u5305\uff1a",parseInt(t.BREAD)||"0"]}),(0,Be.jsxs)("div",{children:["\u66f2\u5947\uff1a",parseInt(t.COOKIE)||"0"]}),(0,Be.jsxs)("div",{children:["\u86cb\u7cd5\uff1a",parseInt(t.CAKE)||"0"]}),(0,Be.jsxs)("div",{children:["\u7518\u8517\uff1a",parseInt(t.SUGCANE)||"0"]}),(0,Be.jsxs)("div",{children:["\u68c9\u82b1\uff1a",parseInt(t.COTTON)||"0"]}),(0,Be.jsxs)("div",{children:["\u7802\u7cd6\uff1a",parseInt(t.SUGAR)||"0"]}),(0,Be.jsxs)("div",{children:["\u7cd6\u6d46\uff1a",parseInt(t.SYRUP)||"0"]}),(0,Be.jsxs)("div",{children:["\u7126\u7cd6\uff1a",parseInt(t.CARAMEL)||"0"]})]}),(0,Be.jsxs)("div",{children:[(0,Be.jsxs)("div",{children:["\u68c9\u5e03\uff1a",parseInt(t.CLOTH)||"0"]}),(0,Be.jsxs)("div",{children:["\u7eba\u7eb1\uff1a",parseInt(t.YARN)||"0"]}),(0,Be.jsxs)("div",{children:["\u4e1d\u7ef8\uff1a",parseInt(t.SILK)||"0"]}),(0,Be.jsxs)("div",{children:["\u886c\u886b\uff1a",parseInt(t.SHIRT)||"0"]}),(0,Be.jsxs)("div",{children:["\u6bdb\u8863\uff1a",parseInt(t.SWEATER)||"0"]}),(0,Be.jsxs)("div",{children:["\u5916\u5957\uff1a",parseInt(t.COAT)||"0"]}),(0,Be.jsxs)("div",{children:["\u8349\u8393\uff1a",parseInt(t.BERRY)||"0"]}),(0,Be.jsxs)("div",{children:["\u53ef\u53ef\uff1a",parseInt(t.COCOS)||"0"]}),(0,Be.jsxs)("div",{children:["\u897f\u7ea2\u67ff\uff1a",parseInt(t.TOMATO)||"0"]}),(0,Be.jsxs)("div",{children:["\u5976\u6cb9\uff1a",parseInt(t.CREAM)||"0"]}),(0,Be.jsxs)("div",{children:["\u5976\u916a\uff1a",parseInt(t.CHEESE)||"0"]}),(0,Be.jsxs)("div",{children:["\u9ec4\u6cb9\uff1a",parseInt(t.BUTTER)||"0"]}),(0,Be.jsxs)("div",{children:["\u9178\u5976\uff1a",parseInt(t.YOGURT)||"0"]}),(0,Be.jsxs)("div",{children:["\u51b0\u6dc7\u6dcb\uff1a",parseInt(t.ICREAM)||"0"]}),(0,Be.jsxs)("div",{children:["\u51b0\u68d2\uff1a",parseInt(t.ILOLLY)||"0"]}),(0,Be.jsxs)("div",{children:["\u51bb\u9178\u5976\uff1a",parseInt(t.FROYO)||"0"]})]}),(0,Be.jsxs)("div",{children:[(0,Be.jsxs)("div",{children:["\u7eff\u949e\uff1a",t.DCASH||"0"]}),(0,Be.jsxs)("div",{children:["\u7ea2\u5b9d\u77f3\uff1a",parseInt(t.RUBY)||"0"]}),(0,Be.jsxs)("div",{children:["\u7eff\u5b9d\u77f3\uff1a",parseInt(t.BERYL)||"0"]}),(0,Be.jsxs)("div",{children:["\u9ec4\u5b9d\u77f3\uff1a",parseInt(t.TOPAZ)||"0"]}),(0,Be.jsxs)("div",{children:["\u7d2b\u6c34\u6676\uff1a",parseInt(t.AMTHYST)||"0"]}),(0,Be.jsxs)("div",{children:["\u5c0f\u5587\u53ed\uff1a",parseInt(t.VOICE)||"0"]}),(0,Be.jsxs)("div",{children:["\u4f53\u9a8c\u5361\uff1a",parseInt(t.LAND)||"0"]}),(0,Be.jsxs)("div",{children:["\u5316\u80a5\uff1a",parseInt(t.FTZ)||"0"]}),(0,Be.jsxs)("div",{children:["\u788e\u7247\uff1a",parseInt(t.CHIP)||"0"]}),(0,Be.jsxs)("div",{children:["DFS: ",t.DFS||"0"]}),(0,Be.jsxs)("div",{children:["USDC\uff1a",t.USDC||"0"]}),(0,Be.jsxs)("div",{children:["DFG\uff1a",t.DFG||"0"]}),(0,Be.jsxs)("div",{children:["TAG\uff1a",t.TAG||"0"]})]})]})}),[t]),an=(0,r.useCallback)((0,l.Z)(d().mark((function e(){var n,t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Re.current){e.next=2;break}return e.abrupt("return");case 2:return Re.current=!0,e.next=5,Le.init("dfstownlease");case 5:n=e.sent,t=(0,o.Z)(n,1),(r=t[0])?(ne.ZP.error(r.toString(),f),g(F(Xe(r.toString())))):(w(!0),Ce(!0)),Re.current=!1;case 10:case"end":return e.stop()}}),e)}))),[g,f]),sn=(0,r.useCallback)((function(e){g(E(e.target.checked))}),[g]),cn=(0,r.useCallback)((function(){return(0,Be.jsxs)(pe.Z,{delay:3e3,mask:!0,children:[(0,Be.jsx)("div",{children:"\u5df2\u589e\u52a0\u6392\u5e8f\u529f\u80fd"}),(0,Be.jsx)("div",{children:"\u5df2\u652f\u6301\u81ea\u5b9a\u4e49\u52a0\u8f7d\u5185\u5bb9\uff0c\u4f18\u5316\u66f4\u65b0\u65b9\u5f0f"}),(0,Be.jsx)("div",{children:"\u5927\u5bb6\u6709\u7a7a\u591a\u591a\u63a8\u5e7f"})]})}),[]),ln=(0,r.useCallback)((function(e){var n=b.current.harvestSort,t=b.current.produceSort,r=b.current.levelSort,a=b.current.countDownSort;if(n||t)for(var s in e)e[s].length&&(1===n||2===t?e[s].sort((function(e,n){var t=e.task.exist-n.task.exist,r=e.task.countDown-n.task.countDown;return 0!==t?-t:0===t?r:0})):2!==n&&1!==t||e[s].sort((function(e,n){var t=e.task.exist-n.task.exist,r=e.task.countDown-n.task.countDown;return 0!==t?t:0===t?r:0})));else if(r)for(var c in e)e[c].length&&(1===r?e[c].sort((function(e,n){return n.level-e.level})):2===r&&e[c].sort((function(e,n){return e.level-n.level})));else if(a)for(var i in e)e[i].length&&(1===a?e[i].sort((function(e,n){return e.task.countDown-n.task.countDown})):2===a&&e[i].sort((function(e,n){return n.task.countDown-e.task.countDown})))}),[]);return(0,r.useEffect)((function(){an(),g(E(!1))}),[an,g]),(0,r.useEffect)((function(){function e(){return(e=(0,l.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=39;break}return Ie(!0),Oe("Loading 0%"),e.next=5,Ye();case 5:return Oe("Loading 10%"),e.next=8,We();case 8:return Oe("Loading 20%+0"),e.next=11,Ue();case 11:return Oe("Loading 30%+0"),e.next=14,Je();case 14:return Oe("Loading 40%"),e.next=17,qe();case 17:return Oe("Loading 50%"),e.next=20,Ve();case 20:return Oe("Loading 60%"),e.next=23,Qe();case 23:return Oe("Loading 70%"),e.next=26,Ke();case 26:return Oe("Loading 80%"),e.next=29,$e();case 29:return Oe("Loading 90%"),e.next=32,en();case 32:Oe("Loading 100%"),Ie(!1),ln(Ae.current),ln(Fe.current),g(G(Ae.current,Fe.current)),g(R(ze.current)),Ce(!1);case 39:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[Z,Ye,We,Ue,Je,qe,g,Ve,Qe,Ke,$e,en,ln]),(0,Be.jsxs)("div",{className:"main rpx-2",children:[(0,Be.jsx)(re.Z,{banner:!0,closable:!0,message:(0,Be.jsx)(cn,{})}),(0,Be.jsx)(ae.Z,{children:(0,Be.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Z?(0,Be.jsx)("div",{children:n.name}):(0,Be.jsx)(se.Z,{type:"primary",onClick:an,children:"\u767b \u9646"}),(0,Be.jsx)("div",{children:(0,Be.jsx)(ce.Z,{trigger:["click"],arrow:!0,overlay:(0,Be.jsxs)(ie.Z,{children:[(0,Be.jsxs)(ie.Z.Item,{disabled:"hazdqmjqgige"!==n.name,children:[(0,Be.jsx)("span",{className:"rmr-1",children:"\u514dCPU"}),(0,Be.jsx)(le.Z,{style:{alignItems:"center"},checked:u,onChange:sn})]},"0"),(0,Be.jsx)(ie.Z.Item,{disabled:!Z||"dfstownlease"!==n.name,onClick:function(){return M(!0)},children:"\u9501\u5b9a\u5408\u7ea6"},"2"),(0,Be.jsx)(ie.Z.Item,{disabled:!Z||"dfstownlease"!==n.name,onClick:function(){return V(!0)},children:"\u8bbe\u7f6e\u8d39\u7528"},"3"),(0,Be.jsx)(ie.Z.Item,{onClick:function(){return N(!0)},children:"\u8282\u70b9\u9009\u62e9"},"5"),(0,Be.jsx)(ie.Z.Item,{onClick:function(){return ve(!0)},children:(0,Be.jsx)(oe.Z,{dot:!0,children:"\u52a0\u8f7d\u8bbe\u7f6e"})},"6"),(0,Be.jsx)(ie.Z.Item,{disabled:!Z,onClick:function(){return D(!0)},children:"\u6211\u7684\u8d44\u4ea7"},"7"),(0,Be.jsx)(ie.Z.Item,{disabled:!Z,onClick:nn,children:"PowerUp"},"8"),(0,Be.jsx)(ie.Z.Item,{disabled:!Z,onClick:function(){return Y(!0)},children:"\u6211\u7684\u5956\u52b1"},"10"),(0,Be.jsx)(ie.Z.Item,{onClick:function(){window.location.href="http://dfsfarms.netlify.app"},children:"\u98ce\u8f66\u5c0f\u9547"},"11"),(0,Be.jsx)(ie.Z.Item,{onClick:function(){window.location.href="https://dfsplus.github.io/town"},children:"\u5c0f\u9547\u6302\u673a"},"12"),(0,Be.jsx)(ie.Z.Item,{onClick:function(){return $(!0)},children:"\u65e5\u5fd7\u4fe1\u606f"},"13"),(0,Be.jsx)(ie.Z.Item,{onClick:function(){return je(!0)},children:(0,Be.jsx)(oe.Z,{dot:m!==e,children:e})},"14")]}),children:(0,Be.jsx)(oe.Z,{dot:m!==e,children:(0,Be.jsx)(he.Z,{})})})})]})}),(0,Be.jsx)(ue.Z,{tip:Te,size:"large",spinning:_e,children:(0,Be.jsxs)(de.Z,{tabBarStyle:{margin:"0 0 0 0"},defaultActiveKey:"4",centered:!0,children:[(0,Be.jsx)(de.Z.TabPane,{tab:"\u6211\u7684NFT",children:(0,Be.jsx)(fn,{loading:ye})},"1"),(0,Be.jsx)(de.Z.TabPane,{tab:"\u6211\u7684\u51fa\u79df",children:(0,Be.jsx)(wn,{loading:ye})},"2"),(0,Be.jsx)(de.Z.TabPane,{tab:"\u6211\u7684\u79df\u7528",children:(0,Be.jsx)(Cn,{loading:ye})},"3"),(0,Be.jsx)(de.Z.TabPane,{tab:"\u79df\u7528\u5e02\u573a",children:(0,Be.jsx)(Pn,{loading:ye})},"4")]})}),(0,Be.jsx)(fe.Z,{placement:"bottom",closable:!1,height:420,visible:O,onClose:function(){return D(!1)},children:(0,Be.jsx)(rn,{})}),(0,Be.jsx)(Me,{visible:S,handleCloseDialog:tn}),(0,Be.jsx)(On,{visible:L,handleCloseDialog:tn}),(0,Be.jsx)(_n,{visible:H,handleCloseDialog:tn}),(0,Be.jsx)(Rn,{visible:q,handleCloseDialog:tn}),(0,Be.jsx)(Fn,{visible:X,handleCloseDialog:tn}),(0,Be.jsx)(Yn,{visible:me,handleCloseDialog:tn}),(0,Be.jsx)(Un,{version:e,visible:ke,handleCloseDialog:tn})]})};a.render((0,Be.jsx)(r.StrictMode,{children:(0,Be.jsx)(s.zt,{store:Ce,children:(0,Be.jsx)(Bn,{})})}),document.getElementById("root"))},83052:function(){},75950:function(){},52361:function(){},94616:function(){}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var s=n[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}t.m=e,function(){var e=[];t.O=function(n,r,a,s){if(!r){var c=1/0;for(u=0;u<e.length;u++){r=e[u][0],a=e[u][1],s=e[u][2];for(var i=!0,l=0;l<r.length;l++)(!1&s||c>=s)&&Object.keys(t.O).every((function(e){return t.O[e](r[l])}))?r.splice(l--,1):(i=!1,s<c&&(c=s));if(i){e.splice(u--,1);var o=a();void 0!==o&&(n=o)}}return n}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[r,a,s]}}(),t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e={179:0};t.O.j=function(n){return 0===e[n]};var n=function(n,r){var a,s,c=r[0],i=r[1],l=r[2],o=0;if(c.some((function(n){return 0!==e[n]}))){for(a in i)t.o(i,a)&&(t.m[a]=i[a]);if(l)var u=l(t)}for(n&&n(r);o<c.length;o++)s=c[o],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(u)},r=self.webpackChunkrent_react=self.webpackChunkrent_react||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}();var r=t.O(void 0,[777,654,172],(function(){return t(940)}));r=t.O(r)}();