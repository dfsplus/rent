!function(){var e={53155:function(e,n,r){"use strict";var t=r(72791),a=r(54164),s=r(16030),c=r(37762),i=r(93433),l=r(15861),o=r(29439),u=r(87757),d=r.n(u),f=r(1413),p=r(72426),h=r.n(p),x="app/SET_ACCOUNT",m="app/SET_FREECPU",v="app/SET_VIP",b="app/SET_NODECONFIG",g="app/SET_WORKS",k="app/SET_ASSETS",Z="app/SET_GLOBAL",j="app/SET_LOG",w="app/CLEAR_LOG",y="app/SET_NFTS",C="app/SET_RENT_NFTS",S="app/SET_ALL_NFTS",N="app/SET_UPDATE_TAB",P="app/SET_LOAD_OPTIONS",T="app/SET_LAST_VERSION",O=function(e){return{type:x,payload:e}},E=function(e){return{type:m,payload:e}},_=function(e){return{type:b,payload:e}},D=function(e){return{type:g,payload:e}},I=function(e){return{type:k,payload:e}},R=function(e){return{type:Z,payload:e}},A=function(e){return{type:j,payload:e}},F=function(){return{type:w}},L=function(e){return{type:y,payload:e}},z=function(e){return{type:C,payload:e}},Y=function(e,n){return{type:S,payload:{nfts:e,rentNfts:n}}},G=function(e){return{type:N,payload:e}},H=function(e,n){return{type:P,payload:{myLoadOptions:e,marketLoadOptions:n}}},B=function(e){return{type:T,payload:e}},M=JSON.parse(localStorage.getItem("nodeConfig")),U=JSON.parse(localStorage.getItem("freeCpu")),J=JSON.parse(localStorage.getItem("log")),W=JSON.parse(localStorage.getItem("myLoadOptions")),q=JSON.parse(localStorage.getItem("marketLoadOptions")),K=JSON.parse(localStorage.getItem("lastVersion")),V={account:{},freeCpu:U||!1,vip:{state:!1,dbc:0,pdd:0,sum:0},nodeConfig:{name:M?M.name:"TP",protocol:M?M.protocol:"https",host:M?M.host:"eospush.tokenpocket.pro",port:M?M.port:"443",url:M?M.url:"https://eospush.tokenpocket.pro",blockchain:M?M.blockchain:"eos",chainId:M?M.chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},works:[],assets:{},global:{rent_fee:"0.0000 DCASH",service_fee:"0.0000 DCASH",reward_fee:"0.0000 DCASH"},chinese:{WHEAT:"\u5c0f\u9ea6",CORN:"\u7389\u7c73",CARROT:"\u841d\u535c",MILK:"\u725b\u5976",EGG:"\u9e21\u86cb",WOOL:"\u7f8a\u6bdb",BREAD:"\u9762\u5305",COOKIE:"\u66f2\u5947",CAKE:"\u86cb\u7cd5",DCASH:"\u7eff\u949e",COWFOOD:"\u725b\u9972\u6599",CHKFOOD:"\u9e21\u9972\u6599",SHPFOOD:"\u7f8a\u9972\u6599",SUGCANE:"\u7518\u8517",COTTON:"\u68c9\u82b1",SUGAR:"\u7802\u7cd6",SYRUP:"\u7cd6\u6d46",CARAMEL:"\u7126\u7cd6",CLOTH:"\u68c9\u5e03",YARN:"\u7eba\u7eb1",SILK:"\u4e1d\u7ef8",SHIRT:"\u886c\u886b",SWEATER:"\u6bdb\u8863",COAT:"\u5916\u5957",RUBY:"\u7ea2\u5b9d\u77f3",BERYL:"\u7eff\u5b9d\u77f3",TOPAZ:"\u9ec4\u7389",AMTHYST:"\u7d2b\u6c34\u6676",BERRY:"\u8349\u8393",COCOS:"\u53ef\u53ef",TOMATO:"\u897f\u7ea2\u67ff",CREAM:"\u5976\u6cb9",CHEESE:"\u5976\u916a",BUTTER:"\u9ec4\u6cb9",YOGURT:"\u9178\u5976",ICREAM:"\u51b0\u6dc7\u6dcb",ILOLLY:"\u51b0\u68d2",FROYO:"\u51bb\u9178\u5976",VOICE:"\u5c0f\u5587\u53ed",LAND:"\u4f53\u9a8c\u5361",FTZ:"\u5316\u80a5",CHIP:"\u788e\u7247",USDC:"USDC",DFG:"DFG",TAG:"TAG"},nftChinese:{land:"\u571f\u5730",gemfactory:"\u5b9d\u77f3\u5de5\u5382",feedmill:"\u9972\u6599\u5382",cow:"\u5976\u725b",bakery:"\u9762\u5305\u574a",textilemill:"\u7eba\u7ec7\u5382",sugarmill:"\u5236\u7cd6\u5382",tailorshop:"\u88c1\u7f1d\u5e97",sheep:"\u7ef5\u7f8a",chicken:"\u9e21",dairyshop:"\u4e73\u5236\u54c1\u5e97",icecreamshop:"\u51b0\u6dc7\u6dcb\u5e97"},nftEnglish:{"\u571f\u5730":"land","\u5b9d\u77f3\u5de5\u5382":"gemfactory","\u9972\u6599\u5382":"feedmill","\u5976\u725b":"cow","\u9762\u5305\u574a":"bakery","\u7eba\u7ec7\u5382":"textilemill","\u5236\u7cd6\u5382":"sugarmill","\u88c1\u7f1d\u5e97":"tailorshop","\u7ef5\u7f8a":"sheep","\u9e21":"chicken","\u4e73\u5236\u54c1\u5e97":"dairyshop","\u51b0\u6dc7\u6dcb\u5e97":"icecreamshop"},log:J||[],delay:5e3,nfts:{land:[],gemfactory:[],feedmill:[],sugarmill:[],textilemill:[],tailorshop:[],bakery:[],cow:[],sheep:[],chicken:[],dairyshop:[],icecreamshop:[]},rentNfts:{land:[],gemfactory:[],feedmill:[],sugarmill:[],textilemill:[],tailorshop:[],bakery:[],cow:[],sheep:[],chicken:[],dairyshop:[],icecreamshop:[]},updateTab:"0",myLoadOptions:W||["land","gemfactory","feedmill","cow","bakery","textilemill","sugarmill","tailorshop","sheep","chicken","dairyshop","icecreamshop"],marketLoadOptions:q||["land","gemfactory","feedmill","cow","bakery","textilemill","sugarmill","tailorshop","sheep","chicken","dairyshop","icecreamshop"],lastVersion:K||""};var Q=r(50419),X=r(13085),$=r(90785),ee=r(93347),ne=r(87309),re=r(37382),te=r(40743),ae=r(32014),se=r(75594),ce=r(37083),ie=r(97682),le=r(65650),oe=r(87147),ue=r(96324),de=r(15671),fe=r(43144),pe=r(87692),he=r(76454),xe=r(69342),me=r.n(xe),ve=r(87781),be="sys/SET_SYS",ge={sys:""};var ke=(0,ve.UY)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case x:return(0,f.Z)((0,f.Z)({},e),{},{account:n.payload});case m:return localStorage.setItem("freeCpu",JSON.stringify(n.payload)),(0,f.Z)((0,f.Z)({},e),{},{freeCpu:n.payload});case v:return(0,f.Z)((0,f.Z)({},e),{},{vip:n.payload});case b:return localStorage.setItem("nodeConfig",JSON.stringify(n.payload)),(0,f.Z)((0,f.Z)({},e),{},{nodeConfig:n.payload});case g:return(0,f.Z)((0,f.Z)({},e),{},{works:n.payload});case k:return(0,f.Z)((0,f.Z)({},e),{},{assets:n.payload});case Z:return(0,f.Z)((0,f.Z)({},e),{},{global:n.payload});case y:return(0,f.Z)((0,f.Z)({},e),{},{nfts:n.payload});case C:return(0,f.Z)((0,f.Z)({},e),{},{rentNfts:n.payload});case S:return(0,f.Z)((0,f.Z)({},e),{},{nfts:n.payload.nfts,rentNfts:n.payload.rentNfts});case j:return e.log.unshift(h()().format("hh:mm:ss ")+n.payload),localStorage.setItem("log",JSON.stringify(e.log)),(0,f.Z)((0,f.Z)({},e),{},{log:e.log});case w:return localStorage.setItem("log",JSON.stringify([])),(0,f.Z)((0,f.Z)({},e),{},{log:[]});case N:return(0,f.Z)((0,f.Z)({},e),{},{updateTab:n.payload});case P:return localStorage.setItem("myLoadOptions",JSON.stringify(n.payload.myLoadOptions)),localStorage.setItem("marketLoadOptions",JSON.stringify(n.payload.marketLoadOptions)),(0,f.Z)((0,f.Z)({},e),{},{myLoadOptions:n.payload.myLoadOptions,marketLoadOptions:n.payload.marketLoadOptions});case T:return localStorage.setItem("lastVersion",JSON.stringify(n.payload)),(0,f.Z)((0,f.Z)({},e),{},{lastVersion:n.payload});default:return e}},sys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,n=arguments.length>1?arguments[1]:void 0;return n.type===be?(0,f.Z)((0,f.Z)({},e),{},{sys:n.payload}):e}}),Ze=(0,ve.MT)(ke),je=r(74569),we=r.n(je),ye=(r(19778).Buffer,r(37502),2e3);function Ce(e){return new Promise((function(n,r){return setTimeout(n,e)}))}function Se(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,l.Z)(d().mark((function e(n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.then((function(e){if(200!==e.status)throw console.log(e),new Error("status code is ".concat(e.status));return[null,e.data]})).catch((function(e){return e instanceof Error?(console.log(e.message),[e.message,null]):e.response?(console.log(e.response),[JSON.stringify(e.response.data),null]):e.request?(console.log("no response"),["no response",null]):(console.log(e),"object"==typeof e?[JSON.stringify(e),null]:[e,null])})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e){return Te.apply(this,arguments)}function Te(){return(Te=(0,l.Z)(d().mark((function e(n){var r,t,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,t=null,e.next=3,Se(we().get("".concat(n,"/v1/chain/get_info"),{timeout:1e4}));case 3:return a=e.sent,s=(0,o.Z)(a,2),r=s[0],t=s[1],e.abrupt("return",[r,t]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,l.Z)(d().mark((function e(){var n,r,t,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,r=null,t=0;case 2:if(!(t<3)){e.next=18;break}return e.next=5,Se(we().get("https://api.yfc.one/dfs/common/get_price"));case 5:if(a=e.sent,s=(0,o.Z)(a,2),n=s[0],!(r=s[1])){e.next=13;break}return e.abrupt("return",[n,r]);case 13:return e.next=15,Ce(ye);case 15:t++,e.next=2;break;case 18:return e.abrupt("return",[n,r]);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e){return De.apply(this,arguments)}function De(){return De=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c,i,l,u,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=1,t=null,a=null,s=0;case 3:if(!(s<r)){e.next=24;break}return e.next=6,Se(we().post("https://api.yfc.one/account/pushaction2",n));case 6:if(c=e.sent,i=(0,o.Z)(c,2),t=i[0],!(a=i[1])||200!==a.code){e.next=14;break}return e.abrupt("return",[t,a]);case 14:if(!a||200===a.code){e.next=19;break}return l=JSON.parse(a.msg),u=l.error.code,f=l.error.details[0].message,e.abrupt("return",[u+" "+f,null]);case 19:return e.next=21,Ce(ye);case 21:s++,e.next=3;break;case 24:return e.abrupt("return",[t,a]);case 25:case"end":return e.stop()}}),e)}))),De.apply(this,arguments)}pe.default.plugins(new he.Z);var Ie=function(){function e(){(0,de.Z)(this,e),this.scatter=pe.default,this.appName="DApp",this.logined=!1,this.connected=!1,this.network=null,this.api=null,this.rpc=null,this.try=3,this.delay=2e3}return(0,fe.Z)(e,[{key:"sleep",value:function(e){return new Promise((function(n,r){return setTimeout(n,e)}))}},{key:"check",value:function(){return!(!this.logined||!this.connected)}},{key:"awaitWrap",value:function(){var e=(0,l.Z)(d().mark((function e(n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.then((function(e){return[null,e]})).catch((function(e){return e instanceof Error?(console.log(e.message),[e.message,null]):e.hasOwnProperty("type")?(console.log(e),[e.message,null]):(console.log(e),"object"==typeof e?[JSON.stringify(e),null]:[e,null])})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},{key:"isJSON",value:function(e){if("string"==typeof e)try{var n=JSON.parse(e);return!("object"!=typeof n||!n)}catch(r){return!1}}},{key:"connect",value:function(){return this.awaitWrap(pe.default.connect(this.appName,{network:this.network}))}},{key:"login",value:function(){return this.awaitWrap(pe.default.login())}},{key:"init",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c,i,l,u,f,p,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Ze.getState().app.nodeConfig,this.network=pe.default.Network.fromJson({blockchain:r?r.blockchain:"eos",chainId:r?r.chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906",host:r?r.host:"eospush.tokenpocket.pro",port:r?r.port:"443",protocol:r?r.protocol:"https"}),t=null,a=null,s=!1,"undefined"!==typeof n&&(this.appName=n),c=0;case 6:if(!(c<10)){e.next=26;break}return e.next=9,this.connect(n);case 9:if(i=e.sent,l=(0,o.Z)(i,2),t=l[0],!(a=l[1])){e.next=20;break}return s=!0,this.connected=!0,console.log("connect pass"),e.abrupt("break",26);case 20:console.log("connect fail");case 21:return e.next=23,this.sleep(1e3);case 23:c++,e.next=6;break;case 26:if(s){e.next=29;break}return console.log("connect fail, over max try time"),e.abrupt("return",["connect fail, over max try time",null]);case 29:return this.api=pe.default.eos(this.network,me()),e.next=32,this.login();case 32:return u=e.sent,f=(0,o.Z)(u,2),t=f[0],(a=f[1])?(console.log("login pass"),this.logined=!0,p=pe.default.account("eos"),h={name:p.name,permissions:p.authority,publicKey:p.publicKey},Ze.dispatch(O(h))):console.log("login fail"),e.abrupt("return",[t,a]);case 38:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"transact",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.check()){e.next=2;break}return e.abrupt("return",["no connect and login",null]);case 2:if(!Ze.getState().app.freeCpu){e.next=5;break}return e.abrupt("return",this.transactFree(n));case 5:return r=null,t=null,e.next=8,this.awaitWrap(this.api.transaction(n,{blocksBehind:3,expireSeconds:30}));case 8:if(a=e.sent,s=(0,o.Z)(a,2),r=s[0],t=s[1],!(r&&this.isJSON(r)&&JSON.parse(r).hasOwnProperty("error"))){e.next=14;break}return e.abrupt("return",[JSON.parse(r).error.details[0].message,t]);case 14:return e.abrupt("return",[r,t]);case 15:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"transactFree",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c,i,l,u,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={tx:n,txh:r={blocksBehind:3,expireSeconds:120}},a=Ze.getState().app.account.name,n.actions.unshift({account:"dfsfreecpu11",name:"freecpu",authorization:[{actor:"yfcmonitor11",permission:"active"}],data:{user:a}}),s=null,c=null,e.next=7,this.awaitWrap(this.api.transaction(n,(0,f.Z)((0,f.Z)({},r),{},{sign:!0,broadcast:!1})));case 7:if(i=e.sent,l=(0,o.Z)(i,2),s=l[0],c=l[1],!s){e.next=15;break}if(!this.isJSON(s)||!JSON.parse(s).hasOwnProperty("error")){e.next=14;break}return e.abrupt("return",[JSON.parse(s).error.details[0].message,c]);case 14:return e.abrupt("return",[s,c]);case 15:return(p=(u=c).transaction.transaction).signatures=u.transaction.signatures,p.context_free_data=[],t.sign_data=p,e.abrupt("return",_e(t));case 21:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getTableRows",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getTableRows(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"abiBinToJson",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.abiBinToJson(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"abiJsonToBin",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.abiJsonToBin(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getAbi",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getAbi(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getAccount",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getAccount(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getBlockHeaderState",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getBlockHeaderState(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getBlock",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getBlock(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getCode",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getCode(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getCodeHash",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getCodeHash(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getCurrencyBalance",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getCurrencyBalance(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getCurrencyStats",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getCurrencyStats(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getInfo",value:function(){var e=(0,l.Z)(d().mark((function e(){var n,r,t,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,r=null,t=0;case 2:if(!(t<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getInfo());case 5:if(a=e.sent,s=(0,o.Z)(a,2),n=s[0],!(r=s[1])){e.next=13;break}return e.abrupt("return",[n,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:t++,e.next=2;break;case 18:return e.abrupt("return",[n,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProducerSchedule",value:function(){var e=(0,l.Z)(d().mark((function e(){var n,r,t,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,r=null,t=0;case 2:if(!(t<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getProducerSchedule());case 5:if(a=e.sent,s=(0,o.Z)(a,2),n=s[0],!(r=s[1])){e.next=13;break}return e.abrupt("return",[n,r]);case 13:return e.next=15,this.sleep(this.delay);case 15:t++,e.next=2;break;case 18:return e.abrupt("return",[n,r]);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProducers",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getProducers(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getRawCodeAndAbi",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getRawCodeAndAbi(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getScheduledTransactions",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getScheduledTransactions(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getRequiredKeys",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getRequiredKeys(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getKeyAccounts",value:function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,t=null,a=0;case 2:if(!(a<this.try)){e.next=18;break}return e.next=5,this.awaitWrap(this.api.getKeyAccounts(n));case 5:if(s=e.sent,c=(0,o.Z)(s,2),r=c[0],!(t=c[1])){e.next=13;break}return e.abrupt("return",[r,t]);case 13:return e.next=15,this.sleep(this.delay);case 15:a++,e.next=2;break;case 18:return e.abrupt("return",[r,t]);case 19:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()}]),e}(),Re=new Ie,Ae=r(4980),Fe=r(10283),Le=r(50881),ze=r(80184);function Ye(e){var n=(0,s.I0)(),r=(0,s.v9)((function(e){return e.app.nodeConfig})),a=(0,t.useState)(!1),c=(0,o.Z)(a,2),i=c[0],u=c[1],f=(0,t.useState)(0),p=(0,o.Z)(f,2),x=p[0],m=p[1],v=(0,t.useRef)(i),b=(0,t.useRef)(0),g=(0,t.useRef)([{index:0,name:"Eosflare",protocol:"https",host:"api.eosflare.io",port:"443",url:"https://api.eosflare.io",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:1,name:"TP",protocol:"https",host:"eospush.tokenpocket.pro",port:"443",url:"https://eospush.tokenpocket.pro",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:2,name:"Fwnw",protocol:"https",host:"api.fwnw.com",port:"443",url:"https://api.fwnw.com",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:3,name:"Sweden",protocol:"https",host:"api.eossweden.se",port:"443",url:"https://api.eossweden.se",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:4,name:"EOSNation",protocol:"https",host:"api.eosn.io",port:"443",url:"https://api.eosn.io",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:5,name:"Greymass",protocol:"https",host:"eos.greymass.com",port:"443",url:"https://eos.greymass.com",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:6,name:"StartEos",protocol:"https",host:"api-mainnet.starteos.io",port:"443",url:"https://api-mainnet.starteos.io",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:7,name:"Laomao",protocol:"https",host:"api.eoslaomao.com",port:"443",url:"https://api.eoslaomao.com",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:8,name:"Scatter(\u5899)",protocol:"https",host:"nodes.get-scatter.com",port:"443",url:"https://nodes.get-scatter.com",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},{index:9,name:"Newdex(\u5899)",protocol:"https",host:"eos.newdex.one",port:"443",url:"https://eos.newdex.one",blockchain:"eos",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"}]),k=(0,t.useReducer)((function(e){return!e}))[1];console.log("NodeSet render"),(0,t.useEffect)((function(){u(e.visible)}),[e.visible]);var Z=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.url,t=h()().valueOf(),e.next=4,Pe(r);case 4:if(a=e.sent,s=(0,o.Z)(a,1),!s[0]){e.next=11;break}return n.delay=9999,v.current&&setTimeout(Z,2e3,n),e.abrupt("return");case 11:c=h()().valueOf()-t,n.delay=c,v.current&&setTimeout(Z,2e3,n);case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]),j=(0,t.useCallback)((function(){for(var e=0;e<g.current.length;e++)if(g.current[e].name===r.name){m(e);break}g.current.forEach((function(e){e.delay=void 0,Z(e)}))}),[r,Z]),w=(0,t.useCallback)((function(){u(!1),e.handleCloseDialog()}),[e]),y=(0,t.useCallback)((function(){var r=g.current[x];u(!1),n(_(r)),Re.init(),e.handleCloseDialog()}),[e,x,n]),C=(0,t.useCallback)((function(e){m(e.target.value)}),[]);return(0,t.useEffect)((function(){v.current=i,i?(j(),b.current=setInterval((function(){k()}),2e3)):clearInterval(b.current)}),[i,j,k]),(0,ze.jsx)(Ae.Z,{title:"\u8282\u70b9\u8bbe\u7f6e",visible:i,width:"94%",style:{top:"5px"},bodyStyle:{padding:"0px 24px",overflowY:"scroll",height:"445px"},onOk:y,onCancel:w,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,ze.jsx)(Fe.ZP,{dataSource:g.current,renderItem:function(e){return(0,ze.jsx)(Fe.ZP.Item,{children:(0,ze.jsx)(Le.ZP.Group,{onChange:C,value:x,children:(0,ze.jsx)(Le.ZP,{value:e.index,children:(0,ze.jsxs)("div",{className:"ml-15",style:{width:"250px"},children:[(0,ze.jsxs)("div",{children:[(0,ze.jsx)("span",{className:"rmr-2",children:e.name}),e.delay<1e3&&(0,ze.jsxs)("span",{className:"text-green",children:[e.delay||"-","ms"]}),e.delay<3e3&&e.delay>=1e3&&(0,ze.jsxs)("span",{className:"color-warning",children:[e.delay||"-","ms"]}),(e.delay>=3e3||!e.delay)&&(0,ze.jsxs)("span",{className:"text-red",children:[e.delay||"- ","ms"]})]}),(0,ze.jsx)("div",{className:"text-secondary",children:e.host})]})})})})}})})}var Ge=(0,t.memo)(Ye),He=r(83099),Be=r(50696),Me=r(14598),Ue=r(90398),Je=r(73142),We=r.n(Je);function qe(e){return-1!==e.indexOf("101")?"101 - assetid is producing":-1!==e.indexOf("102")?"102 - assetid is already exist":-1!==e.indexOf("201")?"201 - assetid_array must > 0":-1!==e.indexOf("202")?"202 - assetid cannot be found":-1!==e.indexOf("203")?"203 - assetid is not yours":-1!==e.indexOf("204")?"204 - assetid is producing":-1!==e.indexOf("301")?"301 - no exist workid":-1!==e.indexOf("302")?"302 - no exist assetid":-1!==e.indexOf("303")?"303 - round is not range 1-12":-1!==e.indexOf("701")?"701 - no exist assetid":-1!==e.indexOf("702")?"702 - round is not range 1-12":-1!==e.indexOf("401")?"401 - no exist taskid in tasks table":-1!==e.indexOf("402")?"402 - the harvest time is not reached":-1!==e.indexOf("403")?"403 - no exist assetid in assets table":-1!==e.indexOf("404")?"404 - the harvest reward time is not reached":-1!==e.indexOf("501")?"501 - renting is not right":-1!==e.indexOf("502")?"502 - no exist assetid":-1!==e.indexOf("503")?"503 - assetid is not yours":-1!==e.indexOf("601")?"601 - no exist account in balances table":-1!==e.indexOf("10001")?"10001 - no exist taskid in tasks table":-1!==e.indexOf("10002")?"10002 - the harvest time is not reached":-1!==e.indexOf("10003")?"10003 - no exist taskid in tasks table":-1!==e.indexOf("20001")?"20001 - assetid is producting":-1!==e.indexOf("20002")?"20002 - assetid is not to be rented":-1!==e.indexOf("20003")?"20003 - assetid is over rental time":-1!==e.indexOf("20004")?"20004 - collection is not right":-1!==e.indexOf("30001")?"30001 - asset number it not right":-1!==e.indexOf("30002")?"30002 - transfer contract is not dfsfarmitems":-1!==e.indexOf("30003")?"30003 - action is not transfer":-1!==e.indexOf("30004")?"30004 - auth actor is not right":-1!==e.indexOf("30005")?"30005 - transfer param error":-1!==e.indexOf("30006")?"30006 - transfer param error":-1!==e.indexOf("30007")?"30007 - transfer param error":-1!==e.indexOf("40001")?"40001 - assetid number it not right":-1!==e.indexOf("40002")?"40002 - transfer contract is not dfsnftassets":-1!==e.indexOf("40003")?"40003 - action is not transfer":-1!==e.indexOf("40004")?" 40004 - auth actor is not right":-1!==e.indexOf("40005")?"40005 - transfer param error":-1!==e.indexOf("50001")?"50001 - assetid cannot be found":-1!==e.indexOf("50002")?"50002 - assetid owner is not _self":e}function Ke(e){var n=e.curCard,r=(0,s.I0)(),a=(0,s.v9)((function(e){return e.app.account})),c=(0,s.v9)((function(e){return e.app.works})),i=(0,s.v9)((function(e){return e.app.assets})),u=(0,s.v9)((function(e){return e.app.chinese})),f=(0,t.useState)(!1),p=(0,o.Z)(f,2),x=p[0],m=p[1],v=(0,t.useRef)(x),b=(0,t.useRef)(!1),g=(0,t.useState)(1),k=(0,o.Z)(g,2),Z=k[0],j=k[1],w=(0,t.useState)(1),y=(0,o.Z)(w,2),C=y[0],S=y[1],N=(0,t.useState)(12),P=(0,o.Z)(N,2),T=P[0],O=P[1],E=(0,t.useState)(!1),_=(0,o.Z)(E,2),D=_[0],I=_[1],R=(0,t.useRef)([]);console.log("ProduceModal2 render"),(0,t.useEffect)((function(){m(e.visible)}),[e.visible]);var F=(0,t.useCallback)((0,l.Z)(d().mark((function e(){var n,r,t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe();case 2:if(n=e.sent,r=(0,o.Z)(n,2),t=r[0],a=r[1],!t){e.next=9;break}return Q.ZP.error("\u83b7\u53d6\u4ef7\u683c\u5931\u8d25",5),e.abrupt("return");case 9:a.forEach((function(e){"USDC"===e.coin?R.current[0]=e.price:"DFG"===e.coin?R.current[1]=e.price:"TAG"===e.coin&&(R.current[2]=e.price)}));case 10:case"end":return e.stop()}}),e)}))),[]),L=(0,t.useCallback)((0,l.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("gemfactory"!==n.collection){e.next=6;break}return e.next=3,F();case 3:j("RUBY"),e.next=7;break;case 6:"land"===n.collection?j(1):"cow"===n.collection?j(7):"chicken"===n.collection?j(8):"sheep"===n.collection?j(9):"feedmill"===n.collection?j(4):"bakery"===n.collection?j(10):"textilemill"===n.collection?j(18):"sugarmill"===n.collection?j(15):"tailorshop"===n.collection?j(21):"dairyshop"===n.collection?j(28):"icecreamshop"===n.collection&&j(32);case 7:S(n.level);case 8:case"end":return e.stop()}}),e)}))),[F,n]),z=(0,t.useCallback)((function(){I(!1),m(!1),e.handleCloseDialog(!1)}),[e]),Y=(0,t.useCallback)((0,l.Z)(d().mark((function t(){var s,c,i,l,u,f,p,h,x,v;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!b.current){t.next=3;break}return Q.ZP.error("\u8d44\u4ea7\u4e0d\u8db3",5),t.abrupt("return");case 3:return s=a.name,c=a.permissions,i="",l="",u="","RUBY"===Z?(i=We()(C).mul(T).div(R.current.price[0]).toFixed(4,3)+" USDC",l=C.toFixed(4)+" "+Z,u="usdxusdxusdx"):"BERYL"===Z?(i=We()(C).mul(T).div(R.current.price[1]).toFixed(4,3)+" DFG",l=C.toFixed(4)+" "+Z,u="dfxtokenmain"):"TOPAZ"===Z&&(i=We()(C).mul(T).div(R.current.price[2]).toFixed(8,3)+" TAG",l=C.toFixed(4)+" "+Z,u="tagtokenmain"),f={actions:[{account:u,name:"transfer",authorization:[{actor:s,permission:c}],data:{from:s,to:"dfsmetaverse",quantity:i,memo:"deposit"}},{account:"dfsmetaverse",name:"makegem2",authorization:[{actor:s,permission:c}],data:{user:s,assetid:n.id,gem:l,round:T}}]},I(!0),t.next=13,Re.transact(f);case 13:if(p=t.sent,h=(0,o.Z)(p,2),x=h[0],v=h[1],!x){t.next=23;break}return Q.ZP.error(qe(x.toString()),5),console.log(x),I(!1),r(A(qe(x.toString()))),t.abrupt("return");case 23:v&&(I(!1),Q.ZP.success("Success"),m(!1),e.handleCloseDialog(!0),console.log(v));case 24:case"end":return t.stop()}}),t)}))),[Z,C,T,a,n,r,e]),G=(0,t.useCallback)((0,l.Z)(d().mark((function t(){var s,i,l,u,f,p,h,x;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c[Z-1].id===Z){t.next=3;break}return Q.ZP.error("\u5de5\u4f5cid\u9519\u8bef",5),t.abrupt("return");case 3:if(!b.current){t.next=6;break}return Q.ZP.error("\u8d44\u4ea7\u4e0d\u8db3",5),t.abrupt("return");case 6:return(s=c[Z-1].require_asset.slice()).forEach((function(e,n){var r=e.split(" ");r[0]=(parseInt(r[0])*C*T).toFixed(4),s[n]=r[0]+" "+r[1]})),i=a.name,l=a.permissions,u={actions:[]},s.forEach((function(e){u.actions.push({account:"dfsfarmitems",name:"transfer",authorization:[{actor:i,permission:l}],data:{from:i,to:"dfsmetaverse",quantity:e,memo:"deposit"}})})),u.actions.push({account:"dfsmetaverse",name:"produce2",authorization:[{actor:i,permission:l}],data:{user:i,workid:Z,assetid:n.id,multiple:C,round:T}}),I(!0),t.next=16,Re.transact(u);case 16:if(f=t.sent,p=(0,o.Z)(f,2),h=p[0],x=p[1],!h){t.next=26;break}return Q.ZP.error(qe(h.toString()),5),console.log(h),I(!1),r(A(qe(h.toString()))),t.abrupt("return");case 26:x&&(I(!1),Q.ZP.success("Success"),m(!1),e.handleCloseDialog(!0),console.log(x));case 27:case"end":return t.stop()}}),t)}))),[Z,c,C,T,a,n,r,e]),H=(0,t.useCallback)((function(){"RUBY"===Z||"BERYL"===Z||"TOPAZ"===Z?Y():G()}),[G,Y,Z]),B=(0,t.useCallback)((function(e){j(e.target.value)}),[]),M=(0,t.useCallback)((function(e){S(e)}),[]),U=(0,t.useCallback)((function(e){O(e)}),[]),J=function(){if(c.length){var e;e="RUBY"===Z||"BERYL"===Z||"TOPAZ"===Z?7200:c.filter((function(e){return e.id===Z}))[0].require_time;var n=h()().add(T*e,"seconds").format().slice(0,-6);return(0,ze.jsx)("span",{children:n})}return(0,ze.jsx)("span",{})},W=function(){if(c.length){var e=[];if("RUBY"===Z||"BERYL"===Z||"TOPAZ"===Z){var n="";"RUBY"===Z?n=We()(C).mul(T).div(R.current[0]).toFixed(4,3)+" USDC":"BERYL"===Z?n=We()(C).mul(T).div(R.current[1]).toFixed(4,3)+" DFG":"TOPAZ"===Z&&(n=We()(C).mul(T).div(R.current[2]).toFixed(8,3)+" TAG");var r=n.split(" ");i[r[1]]-r[0]<0&&e.push(r[1])}else{c[Z-1].require_asset.slice().forEach((function(n){var r=n.split(" ");(r[0]=(parseInt(r[0])*C*T).toFixed(4),"undefined"===typeof i[r[1]])?e.push(r[1]):i[r[1]]-r[0]<0&&e.push(r[1])}))}if(0===e.length)return b.current=!1,(0,ze.jsx)("span",{children:"\u65e0"});var t="";return e.forEach((function(e){t+=u[e]+" "})),b.current=!0,(0,ze.jsx)("span",{className:"text-red",children:t+"\u8d44\u4ea7\u4e0d\u8db3"})}return b.current=!1,(0,ze.jsx)("span",{children:"\u65e0"})},q=(0,t.useCallback)((function(){return"land"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:Z,children:(0,ze.jsxs)(He.Z,{direction:"vertical",children:[(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{style:{alignItems:"center"},value:1,children:"\u9ea6\u5b50"}),(0,ze.jsx)(Le.ZP,{style:{alignItems:"center"},value:2,disabled:n.level<2,children:"\u7389\u7c73"}),(0,ze.jsx)(Le.ZP,{style:{alignItems:"center"},value:3,disabled:n.level<3,children:"\u80e1\u841d\u535c"}),(0,ze.jsx)(Le.ZP,{style:{alignItems:"center"},value:13,disabled:n.level<4,children:"\u7518\u8517"})]}),(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:14,disabled:n.level<5,children:"\u68c9\u82b1"}),(0,ze.jsx)(Le.ZP,{value:25,disabled:n.level<5,children:"\u8349\u8393"}),(0,ze.jsx)(Le.ZP,{value:27,disabled:n.level<5,children:"\u897f\u7ea2\u67ff"}),(0,ze.jsx)(Le.ZP,{value:26,disabled:n.level<5,children:"\u53ef\u53ef"})]})]})}):"cow"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:Z,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsx)("div",{className:"flexbc",children:(0,ze.jsx)(Le.ZP,{value:7,children:"\u725b\u5976"})})})}):"chicken"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:Z,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsx)("div",{className:"flexbc",children:(0,ze.jsx)(Le.ZP,{value:8,children:"\u9e21\u86cb"})})})}):"sheep"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:Z,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsx)("div",{className:"flexbc",children:(0,ze.jsx)(Le.ZP,{value:9,children:"\u7ef5\u7f8a"})})})}):"feedmill"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:Z,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:4,children:"\u725b\u9972\u6599"}),(0,ze.jsx)(Le.ZP,{value:5,disabled:n.level<2,children:"\u9e21\u9972\u6599"}),(0,ze.jsx)(Le.ZP,{value:6,disabled:n.level<3,children:"\u7f8a\u9972\u6599"})]})})}):"bakery"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:Z,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:10,children:"\u9762\u5305"}),(0,ze.jsx)(Le.ZP,{value:11,disabled:n.level<2,children:"\u66f2\u5947"}),(0,ze.jsx)(Le.ZP,{value:12,disabled:n.level<3,children:"\u86cb\u7cd5"})]})})}):"textilemill"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:Z,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:18,children:"\u68c9\u5e03"}),(0,ze.jsx)(Le.ZP,{value:19,disabled:n.level<2,children:"\u7eba\u7eb1"}),(0,ze.jsx)(Le.ZP,{value:20,disabled:n.level<3,children:"\u4e1d\u7ef8"})]})})}):"sugarmill"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:Z,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:15,children:"\u7802\u7cd6"}),(0,ze.jsx)(Le.ZP,{value:16,disabled:n.level<2,children:"\u7cd6\u6d46"}),(0,ze.jsx)(Le.ZP,{value:17,disabled:n.level<3,children:"\u7126\u7cd6"})]})})}):"tailorshop"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:Z,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:21,children:"\u886c\u886b"}),(0,ze.jsx)(Le.ZP,{value:22,disabled:n.level<2,children:"\u6bdb\u8863"}),(0,ze.jsx)(Le.ZP,{value:23,disabled:n.level<3,children:"\u5916\u5957"})]})})}):"dairyshop"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:Z,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:28,children:"\u5976\u6cb9"}),(0,ze.jsx)(Le.ZP,{value:29,disabled:n.level<2,children:"\u5976\u916a"}),(0,ze.jsx)(Le.ZP,{value:30,disabled:n.level<3,children:"\u9ec4\u6cb9"}),(0,ze.jsx)(Le.ZP,{value:31,disabled:n.level<3,children:"\u9178\u5976"})]})})}):"icecreamshop"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:Z,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:32,children:"\u51b0\u6dc7\u6dcb"}),(0,ze.jsx)(Le.ZP,{value:33,disabled:n.level<2,children:"\u51b0\u68d2"}),(0,ze.jsx)(Le.ZP,{value:34,disabled:n.level<3,children:"\u51bb\u9178\u5976"})]})})}):"gemfactory"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:B,value:Z,children:(0,ze.jsxs)(He.Z,{direction:"vertical",children:[(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:"RUBY",children:"\u7ea2\u5b9d\u77f3"}),(0,ze.jsx)(Le.ZP,{value:"BERYL",children:"\u7eff\u5b9d\u77f3"}),(0,ze.jsx)(Le.ZP,{value:"TOPAZ",children:"\u9ec4\u7389"})]}),(0,ze.jsx)("div",{className:"flexbc",children:(0,ze.jsx)(Le.ZP,{value:24,children:"\u7d2b\u6c34\u6676"})})]})}):(0,ze.jsx)(ze.Fragment,{})}),[n,B,Z]);return(0,t.useEffect)((function(){v.current=x,x&&L()}),[x,L]),(0,ze.jsx)(Ae.Z,{title:"\u751f\u4ea7\u64cd\u4f5c",visible:x,width:"94%",bodyStyle:{padding:"0px 24px"},onOk:H,onCancel:z,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,ze.jsxs)(ce.Z,{size:"large",spinning:D,children:[(0,ze.jsx)(q,{}),(0,ze.jsxs)("div",{className:"rmt-3 flexsc",children:[(0,ze.jsx)(Be.Z,{className:"",value:C,min:1,max:n.level,defaultValue:n.level,addonBefore:"\u6570 \u91cf",onChange:M}),(0,ze.jsx)(ne.Z,{disabled:C>=n.level,onClick:function(){return S(C+1)},children:"+"}),(0,ze.jsx)(ne.Z,{disabled:C<=1,onClick:function(){return S(C-1)},children:"-"}),(0,ze.jsx)(Ue.Z,{style:{visibility:"hidden"},className:"rml-2"})]}),(0,ze.jsxs)("div",{className:"rmt-3 flexsc",children:[(0,ze.jsx)(Be.Z,{className:"",value:T,min:1,max:12,defaultValue:12,addonBefore:"\u5468 \u671f",onChange:U}),(0,ze.jsx)(ne.Z,{disabled:T>=12,onClick:function(){return O(T+1)},children:"+"}),(0,ze.jsx)(ne.Z,{disabled:T<=1,onClick:function(){return O(T-1)},children:"-"}),(0,ze.jsx)(Me.Z,{placement:"left",title:"CPU\u6d88\u8017\u6bd4\u8f83\u591a\uff0c\u5efa\u8bae\u6bcf\u6b21\u5468\u671f\u90fd\u9009\u6700\u5927\u503c12",trigger:"click",children:(0,ze.jsx)(Ue.Z,{style:{color:"#1890ff"},className:"rml-2"})})]}),(0,ze.jsxs)("div",{className:"rmt-2 flexsc",children:["\u5b8c\u6210\u65f6\u95f4\uff1a",(0,ze.jsx)(J,{})]}),(0,ze.jsxs)("div",{className:"rmt-2 rmb-3 flexsc",children:["\u63d0\u793a\u4fe1\u606f\uff1a",(0,ze.jsx)(W,{})]})]})})}var Ve=(0,t.memo)(Ke),Qe=r(2649),Xe=r(47528),$e=r(83373),en=r(99581),nn=r(58361);function rn(e){console.log("MyNft");var n=(0,s.v9)((function(e){return e.app.nftChinese})),r=(0,s.v9)((function(e){return e.app.chinese})),a=(0,s.v9)((function(e){return e.app.account})),c=(0,s.v9)((function(e){return e.app.delay})),u=(0,s.v9)((function(e){return e.app.nfts})),f=(0,s.v9)((function(e){return e.app.rentNfts})),p=(0,s.v9)((function(e){return e.app.updateTab})),x=(0,s.v9)((function(e){return e.app.global})),m=(0,t.useReducer)((function(e){return!e}))[1],v=e.loading,b=(0,t.useState)({level:1,id:1,collection:"land",end_time:"2106-02-07T06:28:15",require_time:0}),g=(0,o.Z)(b,2),k=g[0],Z=g[1],j=(0,t.useState)(!1),w=(0,o.Z)(j,2),y=w[0],C=w[1],S=(0,t.useRef)([]),N=(0,t.useState)([]),P=(0,o.Z)(N,2),T=P[0],O=P[1],E=(0,t.useRef)({}),_=(0,t.useRef)("1"),D=(0,s.I0)(),I=(0,t.useCallback)((function(e){Z(e),C(!0)}),[]),R=(0,t.useCallback)((function(e){return e.exist?0===e.countDown?"\u5f85\u6536\u5272":e.countDown>0?"\u751f\u4ea7\u4e2d":void 0:"\u5f85\u751f\u4ea7"}),[]),F=(0,t.useCallback)((function(e){var n=e.target.checked,r=e.target.data;n?S.current.includes(r.id)||S.current.push(r.id):S.current.splice(S.current.indexOf(r.id),1),O((0,i.Z)(S.current))}),[]),z=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,s,i,l,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfsnftassets",scope:a.name+" ",table:"assets",json:!0,lower_bound:n,upper_bound:n},e.next=3,Re.getTableRows(r);case 3:if(t=e.sent,s=(0,o.Z)(t,2),i=s[0],l=s[1],!i){e.next=11;break}return Q.ZP.error("\u83b7\u53d6assets\u5931\u8d25",c),D(A("\u83b7\u53d6assets\u5931\u8d25")),e.abrupt("return");case 11:if((u=l.rows||[]).length){e.next=16;break}return Q.ZP.error("\u83b7\u53d6assets\u5931\u8d25",c),D(A("\u83b7\u53d6assets\u5931\u8d25")),e.abrupt("return");case 16:E.current=u[0],E.current.level=null,E.current.task={countDown:0,exist:!1},E.current.multiple=1,E.current.round=1,E.current.spinning=!1;case 22:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[D,c,a]),H=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,i,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfsmetaverse",scope:n,table:"stats",json:!0},e.next=3,Re.getTableRows(r);case 3:if(t=e.sent,a=(0,o.Z)(t,2),s=a[0],i=a[1],!s){e.next=11;break}return Q.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",c),D(A("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 11:if((l=i.rows||[]).length){e.next=16;break}return Q.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",c),D(A("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 16:E.current.level=l[0].val,E.current.multiple=E.current.level;case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[D,c]),B=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var t,a,s,i,l,u,f,p,x;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfsmetaverse",scope:"dfsmetaverse",table:"tasks",lower_bound:n,upper_bound:n,json:!0},e.next=3,Re.getTableRows(t);case 3:if(a=e.sent,s=(0,o.Z)(a,2),i=s[0],l=s[1],!i){e.next=11;break}return Q.ZP.error("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25",c),D(A("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25")),e.abrupt("return");case 11:if((u=l.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:E.current.task=u[0],E.current.task.create_time=h()("".concat(E.current.task.create_time,".000+0000")).format(),f=h()("".concat(E.current.task.mature_time,".000+0000")),E.current.task.mature_time=f.format(),E.current.task.end_time=f.format("YYYY-MM-DD HH:mm:ss"),p=f.diff(h()()),E.current.task.countDown=p<=0?0:p,E.current.task.exist=!0,x=E.current.task.product.split(" "),E.current.task.product={num:parseInt(x[0]).toFixed(0),name:r[x[1]]};case 24:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[D,c,r]),M=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.spinning=!0,m(),e.next=4,z(n.id);case 4:return e.next=6,H(n.id);case 6:return e.next=8,B(n.id);case 8:n.spinning=!1,r=0;case 10:if(!(r<u[n.collection].length)){e.next=17;break}if(u[n.collection][r].id!==n.id){e.next=14;break}return u[n.collection][r]=E.current,e.abrupt("break",17);case 14:r++,e.next=10;break;case 17:D(L(u)),m();case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[z,H,B,m,D,u]),U=(0,t.useCallback)((function(){if("1"===_.current)S.current=[];else if("2"===_.current)u.land.forEach((function(e){S.current.includes(e.id)&&S.current.splice(S.current.indexOf(e.id),1)}));else if("3"===_.current)for(var e in u)!u[e].length||"cow"!==u[e][0].collection&&"chicken"!==u[e][0].collection&&"sheep"!==u[e][0].collection||u[e].forEach((function(e){S.current.includes(e.id)&&S.current.splice(S.current.indexOf(e.id),1)}));else if("4"===_.current)for(var n in u)u[n].length&&"cow"!==u[n][0].collection&&"chicken"!==u[n][0].collection&&"sheep"!==u[n][0].collection&&"land"!==u[n][0].collection&&u[n].forEach((function(e){S.current.includes(e.id)&&S.current.splice(S.current.indexOf(e.id),1)}));else{var r=0;for(var t in u)if(u[t].length){if(r===_.current-5){u[t].forEach((function(e){S.current.includes(e.id)&&S.current.splice(S.current.indexOf(e.id),1)}));break}r++}}O((0,i.Z)(S.current))}),[u]),J=(0,t.useCallback)((function(e){for(var n in u)if(u[n].length)for(var r=0;r<u[n].length;r++)e.includes(u[n][r].id)&&(u[n][r].owner=a.name,u[n][r].renting=1,u[n][r].end_time="2106-02-07T06:28:15",u[n][r].task.exist?(u[n][r].producing=1,u[n][r].renter=a.name,u[n][r].reward_fee="0.0000 DCASH"):(u[n][r].producing=0,u[n][r].renter="eosio.null",u[n][r].reward_fee=x.reward_fee),f[n].unshift(u[n][r]),u[n].splice(r,1),r--);D(Y(u,f)),D(G("2")),U(),m()}),[D,U,m,u,f,a,x]),W=(0,t.useCallback)((function(e){"1"===p&&D(G("0")),_.current=e}),[p,D]),q=(0,t.useCallback)((function(){if("1"===_.current)for(var e in u)u[e].forEach((function(e){S.current.includes(e.id)||S.current.push(e.id)}));else if("2"===_.current)u.land.forEach((function(e){S.current.includes(e.id)||S.current.push(e.id)}));else if("3"===_.current)for(var n in u)!u[n].length||"cow"!==u[n][0].collection&&"chicken"!==u[n][0].collection&&"sheep"!==u[n][0].collection||u[n].forEach((function(e){S.current.includes(e.id)||S.current.push(e.id)}));else if("4"===_.current)for(var r in u)u[r].length&&"cow"!==u[r][0].collection&&"chicken"!==u[r][0].collection&&"sheep"!==u[r][0].collection&&"land"!==u[r][0].collection&&u[r].forEach((function(e){S.current.includes(e.id)||S.current.push(e.id)}));else{var t=0;for(var a in u)if(u[a].length){if(t===_.current-5){u[a].forEach((function(e){S.current.includes(e.id)||S.current.push(e.id)}));break}t++}}O((0,i.Z)(S.current))}),[u]),K=(0,t.useCallback)((function(e){C(!1),e&&(k.spinning=!0,setTimeout((function(){return M(k)}),c))}),[k,c,M]),V=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,s,i,l,u,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.name,t=a.permissions,s={actions:[{account:"dfsmetaverse",name:"harvest",authorization:[{actor:r,permission:t}],data:{taskid:n.id}}]},n.spinning=!0,m(),e.next=7,Re.transact(s);case 7:if(i=e.sent,l=(0,o.Z)(i,2),u=l[0],f=l[1],!u){e.next=18;break}return Q.ZP.error(qe(u.toString()),5),console.log(u),n.spinning=!1,m(),D(A(qe(u.toString()))),e.abrupt("return");case 18:f&&(Q.ZP.success("Success"),console.log(f),setTimeout((function(){return M(n)}),c));case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[a,D,c,M,m]),X=(0,t.useCallback)((function(e,n){for(var r in u)u[r].length&&u[r].forEach((function(r){e.includes(r.id)&&(r.spinning=n)}))}),[u]),$=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n,r){var t,s,i,l,u,f,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.name,s=a.permissions,i={actions:[]},n?S.current.forEach((function(e){i.actions.push({account:"dfsnftassets",name:"transfer",authorization:[{actor:t,permission:s}],data:{from:t,to:"dfstownlease",assetid:e,memo:"deposit"}})})):i.actions.push({account:"dfsnftassets",name:"transfer",authorization:[{actor:t,permission:s}],data:{from:t,to:"dfstownlease",assetid:r.id,memo:"deposit"}}),i.actions.push({account:"dfstownlease",name:"deposit",authorization:[{actor:t,permission:s}],data:{owner:t,assetid_array:1===n?S.current:[r.id]}}),n?X(S.current,!0):r.spinning=!0,m(),e.next=9,Re.transact(i);case 9:if(l=e.sent,u=(0,o.Z)(l,2),f=u[0],p=u[1],!f){e.next=20;break}return Q.ZP.error(qe(f.toString()),c),console.log(f),n?X(S.current,!1):r.spinning=!1,m(),D(A(qe(f.toString()))),e.abrupt("return");case 20:p&&(Q.ZP.success("Success"),console.log(p),n?(X(S.current,!1),J(S.current)):(r.spinning=!1,J([r.id])),m());case 21:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),[a,D,c,X,J,m]),re=(0,t.useCallback)((function(e){return(0,ze.jsx)(ce.Z,{size:"large",spinning:e.elem.spinning,children:(0,ze.jsx)(ee.Z,{style:{marginTop:10},hoverable:!0,actions:[(0,ze.jsx)(ne.Z,{type:"link",size:"small",onClick:function(){return $(0,e.elem)},children:"\u51fa\u79df"}),(0,ze.jsx)(ne.Z,{type:"link",size:"small",disabled:e.elem.task.exist,onClick:function(){return I(e.elem)},children:"\u751f\u4ea7"}),(0,ze.jsx)(ne.Z,{type:"link",size:"small",onClick:function(){return M(e.elem)},children:"\u5237\u65b0"}),(0,ze.jsx)(se.Z,{dot:e.elem.task.exist&&0===e.elem.task.countDown,children:(0,ze.jsx)(ne.Z,{type:"link",size:"small",disabled:!e.elem.task.exist,onClick:function(){return V(e.elem)},children:"\u6536\u5272"})})],children:(0,ze.jsx)(ee.Z.Meta,{className:"land"===e.elem.collection?"land":"",avatar:(0,ze.jsx)(se.Z,{count:e.elem.level,style:{backgroundColor:"#1890ff"},children:(0,ze.jsx)(Qe.C,{shape:"square",src:"https://cdn.jsdelivr.net/gh/defis-net/material3/Town/shop/".concat(e.elem.collection,".png")})}),title:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Xe.Z,{color:"blue",children:n[e.elem.collection]}),(0,ze.jsxs)("div",{className:"flexcc",children:[(0,ze.jsxs)(Xe.Z,{color:"blue",children:["#",e.elem.id]}),(0,ze.jsx)(ae.Z,{data:e.elem,checked:S.current.includes(e.elem.id),onChange:F})]})]}),description:(0,ze.jsxs)("div",{children:[(0,ze.jsxs)("div",{className:"flexsc",children:[(0,ze.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u72b6\u6001\uff1a",R(e.elem.task)]}),(0,ze.jsxs)("div",{style:{width:"53%"},className:"flexsc flex-grow-1 fs-small",children:["\u5012\u8ba1\u65f6\u95f4\uff1a",(0,ze.jsx)($e.Z.Countdown,{valueStyle:{fontSize:"13px",color:"rgba(0, 0, 0, 0.45)"},value:e.elem.task.mature_time,format:"HH:mm:ss"})]})]}),(0,ze.jsxs)("div",{className:"flexsc",children:[(0,ze.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u4ea7\u54c1\uff1a",e.elem.task.exist?e.elem.task.product.num+"\u4e2a"+e.elem.task.product.name:"\u65e0"]}),(0,ze.jsxs)("div",{style:{width:"53%"},className:"flex-grow-1 fs-small",children:["\u5b8c\u6210\u65f6\u95f4\uff1a",e.elem.task.exist?e.elem.task.end_time.slice(5,10)+" "+e.elem.task.end_time.slice(11,16):"\u65e0"]})]})]})})})})}),[R,I,$,V,F,M,n]),te=(0,t.useCallback)((function(e){var r=0;if("\u5168\u90e8"===e.name)for(var t in u)r+=u[t].length;else if("\u519c\u573a"===e.name)r=u.land.length;else if("\u7267\u573a"===e.name)for(var a in u)!u[a].length||"cow"!==u[a][0].collection&&"chicken"!==u[a][0].collection&&"sheep"!==u[a][0].collection||(r+=u[a].length);else{if("\u5de5\u5382"!==e.name)return r+=u[e.name].length,(0,ze.jsx)(se.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:r,children:n[e.name]});for(var s in u)u[s].length&&"cow"!==u[s][0].collection&&"chicken"!==u[s][0].collection&&"sheep"!==u[s][0].collection&&"land"!==u[s][0].collection&&(r+=u[s].length)}return(0,ze.jsx)(se.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:r,children:e.name})}),[u,n]),le=(0,t.useCallback)((function(){var e=[],n=function(n){u[n].length&&e.push((0,ze.jsx)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(te,{name:u[n][0].collection}),children:u[n].map((function(r,t){return(0,ze.jsx)(re,{elem:r},e.length*u[n].length+t)}))},String(e.length+5)))};for(var r in u)n(r);return e}),[u]),oe=(0,t.useCallback)((function(){var e=[];for(var n in u)u[n].length&&u[n].forEach((function(n){e.push((0,ze.jsx)(re,{elem:n},e.length))}));return e}),[u]),ue=(0,t.useCallback)((function(){var e=[];return u.land.forEach((function(n){e.push((0,ze.jsx)(re,{elem:n},e.length))})),e}),[u]),de=(0,t.useCallback)((function(){var e=[];for(var n in u)!u[n].length||"cow"!==u[n][0].collection&&"chicken"!==u[n][0].collection&&"sheep"!==u[n][0].collection||u[n].forEach((function(n){e.push((0,ze.jsx)(re,{elem:n},e.length))}));return e}),[u]),fe=(0,t.useCallback)((function(){var e=[];for(var n in u)u[n].length&&"cow"!==u[n][0].collection&&"chicken"!==u[n][0].collection&&"sheep"!==u[n][0].collection&&"land"!==u[n][0].collection&&u[n].forEach((function(n){e.push((0,ze.jsx)(re,{elem:n},e.length))}));return e}),[u]);return(0,ze.jsxs)(ze.Fragment,{children:[T.length>0?(0,ze.jsx)(en.Z,{style:{zIndex:100,position:"absolute",top:35,right:0},children:(0,ze.jsxs)("div",{children:[(0,ze.jsx)(ne.Z,{className:"rmt-1 rml-1",type:"primary",size:"small",shape:"round",onClick:q,children:"\u5168\u9009"}),(0,ze.jsx)(ne.Z,{className:"rmt-1 rml-1",type:"primary",size:"small",shape:"round",onClick:U,children:"\u53d6\u6d88"}),(0,ze.jsxs)(ne.Z,{className:"rmt-1 rml-1",type:"primary",size:"small",shape:"round",onClick:function(){return $(1)},children:["\u51fa\u79df",T.length]})]})}):(0,ze.jsx)(ze.Fragment,{}),(0,ze.jsxs)(ie.Z,{tabBarStyle:{margin:"0 0 0 0"},defaultActiveKey:"1",onChange:W,children:[(0,ze.jsx)(ie.Z.TabPane,{},"100"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(te,{name:"\u5168\u90e8"}),children:[(0,ze.jsx)(oe,{}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"1"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(te,{name:"\u519c\u573a"}),children:[(0,ze.jsx)(ue,{}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"2"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(te,{name:"\u7267\u573a"}),children:[(0,ze.jsx)(de,{}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"3"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(te,{name:"\u5de5\u5382"}),children:[(0,ze.jsx)(fe,{}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"4"),le(),(0,ze.jsx)(ie.Z.TabPane,{},"101")]}),(0,ze.jsx)(Ve,{visible:y,curCard:k,handleCloseDialog:K})]})}var tn=(0,t.memo)(rn),an=r(93020);function sn(e){var n=e.curCard,r=(0,s.I0)(),a=(0,s.v9)((function(e){return e.app.account})),c=(0,s.v9)((function(e){return e.app.works})),i=(0,s.v9)((function(e){return e.app.assets})),u=(0,s.v9)((function(e){return e.app.chinese})),f=(0,s.v9)((function(e){return e.app.global})),p=(0,t.useState)(!1),x=(0,o.Z)(p,2),m=x[0],v=x[1],b=(0,t.useRef)(m),g=(0,t.useRef)(0),k=(0,t.useRef)(!1),Z=(0,t.useState)(1),j=(0,o.Z)(Z,2),w=j[0],y=j[1],C=(0,t.useState)(1),S=(0,o.Z)(C,2),N=S[0],P=S[1],T=(0,t.useState)(12),O=(0,o.Z)(T,2),E=O[0],_=O[1],D=(0,t.useState)(!1),I=(0,o.Z)(D,2),R=I[0],F=I[1],L=(0,t.useRef)([]);console.log("ProduceModal render"),(0,t.useEffect)((function(){v(e.visible)}),[e.visible]);var z=(0,t.useCallback)((function(){var e=f.rent_fee.split(" ")[0],n=f.service_fee.split(" ")[0],r=f.reward_fee.split(" ")[0];return We()(e).add(n).mul(N).mul(E).add(r).toFixed(4,3)+" DCASH"}),[f,N,E]),Y=(0,t.useCallback)((function(){var e=f.rent_fee.split(" ")[0],n=f.service_fee.split(" ")[0],r=f.reward_fee.split(" ")[0];return We()(e).add(n).mul(N).mul(E).add(r).div(N).div(E).toFixed(4,3)+" DCASH / \u4e2a"}),[f,N,E]),G=(0,t.useCallback)((function(){var e=f.rent_fee.split(" ")[0];return We()(e).mul(N).mul(E).toFixed(4,3)+" DCASH"}),[f,N,E]),H=(0,t.useCallback)((function(){var e=f.service_fee.split(" ")[0];return We()(e).mul(N).mul(E).toFixed(4,3)+" DCASH"}),[f,N,E]),B=(0,t.useCallback)((0,l.Z)(d().mark((function e(){var n,r,t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe();case 2:if(n=e.sent,r=(0,o.Z)(n,2),t=r[0],a=r[1],!t){e.next=9;break}return Q.ZP.error("\u83b7\u53d6\u4ef7\u683c\u5931\u8d25",5),e.abrupt("return");case 9:a.forEach((function(e){"USDC"===e.coin?L.current[0]=e.price:"DFG"===e.coin?L.current[1]=e.price:"TAG"===e.coin&&(L.current[2]=e.price)}));case 10:case"end":return e.stop()}}),e)}))),[]),M=(0,t.useCallback)((0,l.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("gemfactory"!==n.collection){e.next=6;break}return e.next=3,B();case 3:y("RUBY"),e.next=7;break;case 6:"land"===n.collection?y(1):"cow"===n.collection?y(7):"chicken"===n.collection?y(8):"sheep"===n.collection?y(9):"feedmill"===n.collection?y(4):"bakery"===n.collection?y(10):"textilemill"===n.collection?y(18):"sugarmill"===n.collection?y(15):"tailorshop"===n.collection?y(21):"dairyshop"===n.collection?y(28):"icecreamshop"===n.collection&&y(32);case 7:P(n.level);case 8:case"end":return e.stop()}}),e)}))),[B,n]),U=(0,t.useCallback)((function(){F(!1),v(!1),e.handleCloseDialog(!1)}),[e]),J=(0,t.useCallback)((0,l.Z)(d().mark((function t(){var s,c,i,l,u,p,h,x,m,b,Z,j,y,C;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(g.current<=0)){t.next=4;break}Q.ZP.error("\u8d85\u8fc7\u79df\u7528\u671f\u9650",5),t.next=32;break;case 4:if(!k.current){t.next=7;break}return Q.ZP.error("\u8d44\u4ea7\u4e0d\u8db3",5),t.abrupt("return");case 7:return s=a.name,c=a.permissions,i=f.rent_fee.split(" ")[0],l=f.service_fee.split(" ")[0],u=f.reward_fee.split(" ")[0],p=We()(i).add(l).mul(N).mul(E).add(u).toFixed(4,3)+" DCASH",h="",x="",m="","RUBY"===w?(h=We()(N).mul(E).div(L.current.price[0]).toFixed(4,3)+" USDC",x=N.toFixed(4)+" "+w,m="usdxusdxusdx"):"BERYL"===w?(h=We()(N).mul(E).div(L.current.price[1]).toFixed(4,3)+" DFG",x=N.toFixed(4)+" "+w,m="dfxtokenmain"):"TOPAZ"===w&&(h=We()(N).mul(E).div(L.current.price[2]).toFixed(8,3)+" TAG",x=N.toFixed(4)+" "+w,m="tagtokenmain"),b={actions:[{account:m,name:"transfer",authorization:[{actor:s,permission:c}],data:{from:s,to:"dfsmetaverse",quantity:h,memo:"deposit"}},{account:"dfsfarmitems",name:"transfer",authorization:[{actor:s,permission:c}],data:{from:s,to:"dfstownlease",quantity:p,memo:"fee"}},{account:"dfstownlease",name:"makegem",authorization:[{actor:s,permission:c}],data:{user:s,assetid:n.id,gem:x,round:E}}]},F(!0),t.next=21,Re.transact(b);case 21:if(Z=t.sent,j=(0,o.Z)(Z,2),y=j[0],C=j[1],!y){t.next=31;break}return Q.ZP.error(qe(y.toString()),5),console.log(y),F(!1),r(A(qe(y.toString()))),t.abrupt("return");case 31:C&&(F(!1),Q.ZP.success("Success"),v(!1),e.handleCloseDialog(!0),console.log(C));case 32:case"end":return t.stop()}}),t)}))),[w,N,E,a,f,n,r,e]),W=(0,t.useCallback)((0,l.Z)(d().mark((function t(){var s,i,l,u,p,h,x,m,b,Z,j,y;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(g.current<=0)){t.next=4;break}Q.ZP.error("\u8d85\u8fc7\u79df\u7528\u671f\u9650",5),t.next=36;break;case 4:if(c[w-1].id===w){t.next=7;break}return Q.ZP.error("\u5de5\u4f5cid\u9519\u8bef",5),t.abrupt("return");case 7:if(!k.current){t.next=10;break}return Q.ZP.error("\u8d44\u4ea7\u4e0d\u8db3",5),t.abrupt("return");case 10:return(s=c[w-1].require_asset.slice()).forEach((function(e,n){var r=e.split(" ");r[0]=(parseInt(r[0])*N*E).toFixed(4),s[n]=r[0]+" "+r[1]})),i=a.name,l=a.permissions,u=f.rent_fee.split(" ")[0],p=f.service_fee.split(" ")[0],h=f.reward_fee.split(" ")[0],x=We()(u).add(p).mul(N).mul(E).add(h).toFixed(4,3)+" DCASH",m={actions:[]},s.forEach((function(e){m.actions.push({account:"dfsfarmitems",name:"transfer",authorization:[{actor:i,permission:l}],data:{from:i,to:"dfstownlease",quantity:e,memo:"deposit"}})})),m.actions.push({account:"dfsfarmitems",name:"transfer",authorization:[{actor:i,permission:l}],data:{from:i,to:"dfstownlease",quantity:x,memo:"fee"}}),m.actions.push({account:"dfstownlease",name:"produce",authorization:[{actor:i,permission:l}],data:{user:i,workid:w,assetid:n.id,multiple:N,round:E}}),F(!0),t.next=25,Re.transact(m);case 25:if(b=t.sent,Z=(0,o.Z)(b,2),j=Z[0],y=Z[1],!j){t.next=35;break}return Q.ZP.error(qe(j.toString()),5),console.log(j),F(!1),r(A(qe(j.toString()))),t.abrupt("return");case 35:y&&(F(!1),Q.ZP.success("Success"),v(!1),e.handleCloseDialog(!0),console.log(y));case 36:case"end":return t.stop()}}),t)}))),[w,c,N,E,a,f,n,r,e]),q=(0,t.useCallback)((function(){"RUBY"===w||"BERYL"===w||"TOPAZ"===w?J():W()}),[W,J,w]),K=(0,t.useCallback)((function(e){y(e.target.value)}),[]),V=(0,t.useCallback)((function(e){P(e)}),[]),X=(0,t.useCallback)((function(e){_(e)}),[]),$=function(){if(c.length){var e;e="RUBY"===w||"BERYL"===w||"TOPAZ"===w?7200:c.filter((function(e){return e.id===w}))[0].require_time;var r=h()().add(E*e,"seconds"),t=r.format().slice(0,-6),a=h()("".concat(n.end_time,".000+0000")).diff(r);return g.current=a,(0,ze.jsx)("span",{className:a<=0?"text-red":"",children:t})}return(0,ze.jsx)("span",{})},ee=function(){if(c.length){var e=[];if("RUBY"===w||"BERYL"===w||"TOPAZ"===w){var n="";"RUBY"===w?n=We()(N).mul(E).div(L.current[0]).toFixed(4,3)+" USDC":"BERYL"===w?n=We()(N).mul(E).div(L.current[1]).toFixed(4,3)+" DFG":"TOPAZ"===w&&(n=We()(N).mul(E).div(L.current[2]).toFixed(8,3)+" TAG");var r=n.split(" ");i[r[1]]-r[0]<0&&e.push(r[1])}else{c[w-1].require_asset.slice().forEach((function(n){var r=n.split(" ");(r[0]=(parseInt(r[0])*N*E).toFixed(4),"undefined"===typeof i[r[1]])?e.push(r[1]):i[r[1]]-r[0]<0&&e.push(r[1])}))}if(0===e.length)return k.current=!1,(0,ze.jsx)("span",{children:"\u65e0"});var t="";return e.forEach((function(e){t+=u[e]+" "})),k.current=!0,(0,ze.jsx)("span",{className:"text-red",children:t+"\u8d44\u4ea7\u4e0d\u8db3"})}return k.current=!1,(0,ze.jsx)("span",{children:"\u65e0"})},re=(0,t.useCallback)((function(){return"land"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:K,value:w,children:(0,ze.jsxs)(He.Z,{direction:"vertical",children:[(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:1,children:"\u9ea6\u5b50"}),(0,ze.jsx)(Le.ZP,{value:2,disabled:n.level<2,children:"\u7389\u7c73"}),(0,ze.jsx)(Le.ZP,{value:3,disabled:n.level<3,children:"\u80e1\u841d\u535c"}),(0,ze.jsx)(Le.ZP,{value:13,disabled:n.level<4,children:"\u7518\u8517"})]}),(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:14,disabled:n.level<5,children:"\u68c9\u82b1"}),(0,ze.jsx)(Le.ZP,{value:25,disabled:n.level<5,children:"\u8349\u8393"}),(0,ze.jsx)(Le.ZP,{value:27,disabled:n.level<5,children:"\u897f\u7ea2\u67ff"}),(0,ze.jsx)(Le.ZP,{value:26,disabled:n.level<5,children:"\u53ef\u53ef"})]})]})}):"cow"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:K,value:w,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsx)("div",{className:"flexbc",children:(0,ze.jsx)(Le.ZP,{value:7,children:"\u725b\u5976"})})})}):"chicken"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:K,value:w,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsx)("div",{className:"flexbc",children:(0,ze.jsx)(Le.ZP,{value:8,children:"\u9e21\u86cb"})})})}):"sheep"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:K,value:w,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsx)("div",{className:"flexbc",children:(0,ze.jsx)(Le.ZP,{value:9,children:"\u7ef5\u7f8a"})})})}):"feedmill"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:K,value:w,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:4,children:"\u725b\u9972\u6599"}),(0,ze.jsx)(Le.ZP,{value:5,disabled:n.level<2,children:"\u9e21\u9972\u6599"}),(0,ze.jsx)(Le.ZP,{value:6,disabled:n.level<3,children:"\u7f8a\u9972\u6599"})]})})}):"bakery"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:K,value:w,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:10,children:"\u9762\u5305"}),(0,ze.jsx)(Le.ZP,{value:11,disabled:n.level<2,children:"\u66f2\u5947"}),(0,ze.jsx)(Le.ZP,{value:12,disabled:n.level<3,children:"\u86cb\u7cd5"})]})})}):"textilemill"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:K,value:w,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:18,children:"\u68c9\u5e03"}),(0,ze.jsx)(Le.ZP,{value:19,disabled:n.level<2,children:"\u7eba\u7eb1"}),(0,ze.jsx)(Le.ZP,{value:20,disabled:n.level<3,children:"\u4e1d\u7ef8"})]})})}):"sugarmill"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:K,value:w,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:15,children:"\u7802\u7cd6"}),(0,ze.jsx)(Le.ZP,{value:16,disabled:n.level<2,children:"\u7cd6\u6d46"}),(0,ze.jsx)(Le.ZP,{value:17,disabled:n.level<3,children:"\u7126\u7cd6"})]})})}):"tailorshop"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:K,value:w,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:21,children:"\u886c\u886b"}),(0,ze.jsx)(Le.ZP,{value:22,disabled:n.level<2,children:"\u6bdb\u8863"}),(0,ze.jsx)(Le.ZP,{value:23,disabled:n.level<3,children:"\u5916\u5957"})]})})}):"dairyshop"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:K,value:w,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:28,children:"\u5976\u6cb9"}),(0,ze.jsx)(Le.ZP,{value:29,disabled:n.level<2,children:"\u5976\u916a"}),(0,ze.jsx)(Le.ZP,{value:30,disabled:n.level<3,children:"\u9ec4\u6cb9"}),(0,ze.jsx)(Le.ZP,{value:31,disabled:n.level<3,children:"\u9178\u5976"})]})})}):"icecreamshop"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:K,value:w,children:(0,ze.jsx)(He.Z,{direction:"vertical",children:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:32,children:"\u51b0\u6dc7\u6dcb"}),(0,ze.jsx)(Le.ZP,{value:33,disabled:n.level<2,children:"\u51b0\u68d2"}),(0,ze.jsx)(Le.ZP,{value:34,disabled:n.level<3,children:"\u51bb\u9178\u5976"})]})})}):"gemfactory"===n.collection?(0,ze.jsx)(Le.ZP.Group,{className:"width-100 rmt-3",onChange:K,value:w,children:(0,ze.jsxs)(He.Z,{direction:"vertical",children:[(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsx)(Le.ZP,{value:"RUBY",children:"\u7ea2\u5b9d\u77f3"}),(0,ze.jsx)(Le.ZP,{value:"BERYL",children:"\u7eff\u5b9d\u77f3"}),(0,ze.jsx)(Le.ZP,{value:"TOPAZ",children:"\u9ec4\u7389"})]}),(0,ze.jsx)("div",{className:"flexbc",children:(0,ze.jsx)(Le.ZP,{value:24,children:"\u7d2b\u6c34\u6676"})})]})}):(0,ze.jsx)(ze.Fragment,{})}),[n,K,w]);return(0,t.useEffect)((function(){b.current=m,m&&M()}),[m,M]),(0,ze.jsx)(Ae.Z,{title:"\u751f\u4ea7\u64cd\u4f5c",visible:m,width:"94%",bodyStyle:{padding:"0px 24px"},onOk:q,onCancel:U,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,ze.jsxs)(ce.Z,{size:"large",spinning:R,children:[(0,ze.jsx)(re,{}),(0,ze.jsxs)("div",{className:"rmt-3 flexsc",children:[(0,ze.jsx)(Be.Z,{className:"",value:N,min:1,max:n.level,defaultValue:n.level,addonBefore:"\u6570 \u91cf",onChange:V}),(0,ze.jsx)(ne.Z,{disabled:N>=n.level,onClick:function(){return P(N+1)},children:"+"}),(0,ze.jsx)(ne.Z,{disabled:N<=1,onClick:function(){return P(N-1)},children:"-"}),(0,ze.jsx)(Ue.Z,{style:{visibility:"hidden"},className:"rml-2"})]}),(0,ze.jsxs)("div",{className:"rmt-3 flexsc",children:[(0,ze.jsx)(Be.Z,{className:"",value:E,min:1,max:12,defaultValue:12,addonBefore:"\u5468 \u671f",onChange:X}),(0,ze.jsx)(ne.Z,{disabled:E>=12,onClick:function(){return _(E+1)},children:"+"}),(0,ze.jsx)(ne.Z,{disabled:E<=1,onClick:function(){return _(E-1)},children:"-"}),(0,ze.jsx)(Me.Z,{placement:"left",title:"CPU\u6d88\u8017\u6bd4\u8f83\u591a\uff0c\u5efa\u8bae\u6bcf\u6b21\u5468\u671f\u90fd\u9009\u6700\u5927\u503c12",trigger:"click",children:(0,ze.jsx)(Ue.Z,{style:{color:"#1890ff"},className:"rml-2"})})]}),(0,ze.jsxs)("div",{className:"rmt-2 flexsc",children:["\u5b8c\u6210\u65f6\u95f4\uff1a",(0,ze.jsx)($,{})]}),n.end_time?(0,ze.jsxs)("div",{className:"rmt-2 flexsc",children:["\u79df\u7528\u671f\u9650\uff1a",h()("".concat(n.end_time,".000+0000")).format().slice(0,-6)]}):(0,ze.jsx)(ze.Fragment,{}),(0,ze.jsxs)("div",{className:"rmt-2 flexsc",children:["\u79df\u7528\u8d39\u7528\uff1a",z(),(0,ze.jsx)(an.Z,{trigger:"click",content:(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsxs)("div",{children:["\u79df\u7528\u8d39\uff1a",G()]}),(0,ze.jsxs)("div",{children:["\u670d\u52a1\u8d39\uff1a",H()]}),(0,ze.jsxs)("div",{children:["\u5956\u52b1\u8d39\uff1a",f.reward_fee]}),(0,ze.jsxs)("div",{children:["\u603b\u8d39\u7528\uff1a",z()]})]}),children:(0,ze.jsx)(Ue.Z,{style:{color:"#1890ff"},className:"rml-2"})})]}),(0,ze.jsxs)("div",{className:"rmt-2 flexsc",children:["\u5e73\u5747\u8d39\u7528\uff1a",Y()]}),(0,ze.jsxs)("div",{className:"rmt-2 rmb-3 flexsc",children:["\u63d0\u793a\u4fe1\u606f\uff1a",(0,ze.jsx)(ee,{})]})]})})}var cn=(0,t.memo)(sn),ln=r(99214),on=r(97943);function un(e){var n=(0,s.I0)(),r=(0,s.v9)((function(e){return e.app.account})),a=e.curCard,c=e.flag,i=e.check,u=(0,t.useState)(!1),f=(0,o.Z)(u,2),p=f[0],x=f[1],m=(0,t.useRef)(p),v=(0,t.useState)(0),b=(0,o.Z)(v,2),g=b[0],k=b[1],Z=(0,t.useState)(0),j=(0,o.Z)(Z,2),w=j[0],y=j[1],C=(0,t.useState)(!1),S=(0,o.Z)(C,2),N=S[0],P=S[1],T=(0,t.useState)(1),O=(0,o.Z)(T,2),E=O[0],_=O[1],D=(0,t.useState)(h()()),I=(0,o.Z)(D,2),R=I[0],F=I[1],L=(0,t.useState)(h()()),z=(0,o.Z)(L,2),Y=z[0],G=z[1];console.log("DueDateModal render"),(0,t.useEffect)((function(){x(e.visible)}),[e.visible]);var H=(0,t.useCallback)((function(){F(h()()),G(h()())}),[]),B=(0,t.useCallback)((function(){P(!1),x(!1),e.handleCloseDialog(!1)}),[e]),M=(0,t.useCallback)((function(e){F(e),y(e.diff(h()())/1e3)}),[]),U=(0,t.useCallback)((function(e){G(e),k(e.diff(h()())/1e3)}),[]),J=(0,t.useCallback)((function(e){_(e.target.value)}),[]),W=(0,t.useCallback)((0,l.Z)(d().mark((function t(){var s,l,u,f,p,h,m,v;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=0,1!==E){t.next=13;break}if(!(w<0)){t.next=7;break}return Q.ZP.error("\u65e5\u671f\u4e0d\u6b63\u786e",5),t.abrupt("return");case 7:if(!(0===w&&g<=0)){t.next=12;break}return Q.ZP.error("\u65e5\u671f\u4e0d\u6b63\u786e",5),t.abrupt("return");case 12:0===w&&g>0?s=g:w>0&&(s=w+g);case 13:return l=r.name,u=r.permissions,f={},f=c?{actions:[{account:"dfstownlease",name:"setrent",authorization:[{actor:l,permission:u}],data:{owner:l,assetid_array:i,renting:1,end_time:parseInt(s)}}]}:{actions:[{account:"dfstownlease",name:"setrent",authorization:[{actor:l,permission:u}],data:{owner:l,assetid_array:[a.id],renting:a.renting,end_time:parseInt(s)}}]},P(!0),t.next=20,Re.transact(f);case 20:if(p=t.sent,h=(0,o.Z)(p,2),m=h[0],v=h[1],!m){t.next=30;break}return Q.ZP.error(qe(m.toString()),5),console.log(m),P(!1),n(A(qe(m.toString()))),t.abrupt("return");case 30:v&&(P(!1),Q.ZP.success("Success"),x(!1),e.handleCloseDialog(!0),console.log(v));case 31:case"end":return t.stop()}}),t)}))),[w,g,r,a,E,i,c,n,e]);return(0,t.useEffect)((function(){m.current=p,p&&H()}),[p,H]),(0,ze.jsx)(Ae.Z,{title:"\u671f\u9650\u64cd\u4f5c",visible:p,width:"94%",style:{top:"5px"},bodyStyle:{padding:"0px 24px"},onOk:W,onCancel:B,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,ze.jsxs)(ce.Z,{size:"large",spinning:N,children:[(0,ze.jsxs)("div",{className:"rmt-3 flexsc",children:["\u5f53\u524d\u671f\u9650\uff1a",a.end_time]}),(0,ze.jsxs)("div",{className:"rmt-3 flexsc",children:["\u65e5\u671f\u9009\u62e9\uff1a",(0,ze.jsx)(ln.Z,{disabled:2===E,value:R,onChange:M})]}),(0,ze.jsxs)("div",{className:"rmt-3 flexsc",children:["\u65f6\u95f4\u9009\u62e9\uff1a",(0,ze.jsx)(on.Z,{className:"w-150",disabled:2===E,value:Y,format:"HH:mm",onChange:U})]}),(0,ze.jsx)("div",{className:"rmt-3 rmb-3 flexsc",children:(0,ze.jsxs)(Le.ZP.Group,{onChange:J,defaultValue:2,value:E,children:[(0,ze.jsx)(Le.ZP,{style:{margin:"0"},value:1,children:"\u6709\u9650\u5236"}),(0,ze.jsx)(Le.ZP,{style:{margin:"0"},value:2,children:"\u65e0\u9650\u5236"})]})})]})})}var dn=(0,t.memo)(un),fn=r(73956),pn=r(38999);function hn(e){console.log("MyLease");var n=(0,s.I0)(),r=(0,s.v9)((function(e){return e.app.account})),a=(0,s.v9)((function(e){return e.app.nftChinese})),c=(0,s.v9)((function(e){return e.app.chinese})),u=(0,s.v9)((function(e){return e.app.delay})),f=(0,s.v9)((function(e){return e.app.rentNfts})),p=(0,s.v9)((function(e){return e.app.nfts})),x=(0,s.v9)((function(e){return e.app.updateTab})),m=(0,t.useReducer)((function(e){return!e}))[1],v=e.loading,b=(0,t.useState)({level:1,id:1,collection:"land",end_time:"2106-02-07T06:28:15",require_time:0}),g=(0,o.Z)(b,2),k=g[0],Z=g[1],j=(0,t.useState)(!1),w=(0,o.Z)(j,2),y=w[0],C=w[1],S=(0,t.useState)(!1),N=(0,o.Z)(S,2),P=N[0],T=N[1],O=(0,t.useRef)([]),E=(0,t.useRef)([]),_=(0,t.useRef)([]),D=(0,t.useRef)(0),I=(0,t.useState)([]),R=(0,o.Z)(I,2),F=R[0],L=R[1],H=(0,t.useRef)("1"),B=(0,t.useRef)({}),M=(0,t.useCallback)((function(e){Z(e),C(!0)}),[]),U=(0,t.useCallback)((function(e,n){e?(D.current=e,T(!0)):(D.current=e,Z(n),T(!0))}),[]),J=(0,t.useCallback)((function(e){return e.exist?0===e.countDown?"\u5f85\u6536\u5272":e.countDown>0?"\u751f\u4ea7\u4e2d":void 0:"\u5f85\u751f\u4ea7"}),[]),W=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var t,a,s,c,i,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfstownlease",scope:"dfstownlease",table:"assets",json:!0,lower_bound:r,upper_bound:r},e.next=3,Re.getTableRows(t);case 3:if(a=e.sent,s=(0,o.Z)(a,2),c=s[0],i=s[1],!c){e.next=11;break}return Q.ZP.error("\u83b7\u53d6rent assets\u5931\u8d25",u),n(A("\u83b7\u53d6rent assets\u5931\u8d25")),e.abrupt("return");case 11:if((l=i.rows||[]).length){e.next=16;break}return Q.ZP.error("\u83b7\u53d6rent assets\u5931\u8d25",u),n(A("\u83b7\u53d6rent assets\u5931\u8d25")),e.abrupt("return");case 16:B.current=l[0],B.current.level=null,B.current.task={countDown:0,exist:!1},B.current.multiple=1,B.current.round=1,B.current.spinning=!1;case 22:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,u]),q=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var t,a,s,c,i,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfsmetaverse",scope:r,table:"stats",json:!0},e.next=3,Re.getTableRows(t);case 3:if(a=e.sent,s=(0,o.Z)(a,2),c=s[0],i=s[1],!c){e.next=11;break}return Q.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",u),n(A("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 11:if((l=i.rows||[]).length){e.next=16;break}return Q.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",u),n(A("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 16:B.current.level=l[0].val,B.current.multiple=B.current.level;case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,u]),K=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var t,a,s,i,l,f,p,x,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfsmetaverse",scope:"dfsmetaverse",table:"tasks",lower_bound:r,upper_bound:r,json:!0},e.next=3,Re.getTableRows(t);case 3:if(a=e.sent,s=(0,o.Z)(a,2),i=s[0],l=s[1],!i){e.next=11;break}return Q.ZP.error("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25",u),n(A("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25")),e.abrupt("return");case 11:if((f=l.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:B.current.task=f[0],B.current.task.create_time=h()("".concat(B.current.task.create_time,".000+0000")).format(),p=h()("".concat(B.current.task.mature_time,".000+0000")),B.current.task.mature_time=p.format(),B.current.task.end_time=p.format("YYYY-MM-DD HH:mm:ss"),x=p.diff(h()()),B.current.task.countDown=x<=0?0:x,B.current.task.exist=!0,m=B.current.task.product.split(" "),B.current.task.product={num:parseInt(m[0]).toFixed(0),name:c[m[1]]};case 24:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,u,c]),V=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.spinning=!0,m(),e.next=4,W(r.id);case 4:return e.next=6,q(r.id);case 6:return e.next=8,K(r.id);case 8:r.spinning=!1,t=0;case 10:if(!(t<f[r.collection].length)){e.next=17;break}if(f[r.collection][t].id!==r.id){e.next=14;break}return f[r.collection][t]=B.current,e.abrupt("break",17);case 14:t++,e.next=10;break;case 17:n(z(f)),m();case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[W,q,K,m,n,f]),X=(0,t.useCallback)((function(){if("1"===H.current)O.current=[],_.current=[],E.current=[];else if("2"===H.current)f.land.forEach((function(e){O.current.includes(e.id)&&(O.current.splice(O.current.indexOf(e.id),1),_.current.includes(e.id)?_.current.splice(_.current.indexOf(e.id),1):E.current.splice(E.current.indexOf(e.id),1))}));else if("3"===H.current)for(var e in f)!f[e].length||"cow"!==f[e][0].collection&&"chicken"!==f[e][0].collection&&"sheep"!==f[e][0].collection||f[e].forEach((function(e){O.current.includes(e.id)&&(O.current.splice(O.current.indexOf(e.id),1),_.current.includes(e.id)?_.current.splice(_.current.indexOf(e.id),1):E.current.splice(E.current.indexOf(e.id),1))}));else if("4"===H.current)for(var n in f)f[n].length&&"cow"!==f[n][0].collection&&"chicken"!==f[n][0].collection&&"sheep"!==f[n][0].collection&&"land"!==f[n][0].collection&&f[n].forEach((function(e){O.current.includes(e.id)&&(O.current.splice(O.current.indexOf(e.id),1),_.current.includes(e.id)?_.current.splice(_.current.indexOf(e.id),1):E.current.splice(E.current.indexOf(e.id),1))}));else{var r=0;for(var t in f)if(f[t].length){if(r===H.current-5){f[t].forEach((function(e){O.current.includes(e.id)&&(O.current.splice(O.current.indexOf(e.id),1),_.current.includes(e.id)?_.current.splice(_.current.indexOf(e.id),1):E.current.splice(E.current.indexOf(e.id),1))}));break}r++}}L((0,i.Z)(O.current))}),[f]),$=(0,t.useCallback)((function(e){for(var r in f)if(f[r].length)for(var t=0;t<f[r].length;t++)e.includes(f[r][t].id)&&(p[r].unshift(f[r][t]),f[r].splice(t,1),t--);n(Y(p,f)),n(G("1")),X(),m()}),[f,p,n,X,m]),re=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var t,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<r.length)){e.next=25;break}return e.next=4,W(r[t]);case 4:return e.next=6,q(r[t]);case 6:return e.next=8,K(r[t]);case 8:e.t0=d().keys(f);case 9:if((e.t1=e.t0()).done){e.next=22;break}if(a=e.t1.value,!f[a].length){e.next=20;break}s=0;case 13:if(!(s<f[a].length)){e.next=20;break}if(f[a][s].id!==r[t]){e.next=17;break}return f[a][s]=B.current,e.abrupt("break",20);case 17:s++,e.next=13;break;case 20:e.next=9;break;case 22:t++,e.next=1;break;case 25:n(z(f)),X(),m();case 28:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[W,q,K,m,n,f,X]),te=(0,t.useCallback)((function(e){C(!1),e&&(k.spinning=!0,setTimeout((function(){return V(k)}),u))}),[k,u,V]),le=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var a,s,c,i,l,f,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.name,s=r.permissions,c={actions:[{account:"dfstownlease",name:"harvest",authorization:[{actor:a,permission:s}],data:{user:a,taskid:t.id}}]},t.spinning=!0,m(),e.next=7,Re.transact(c);case 7:if(i=e.sent,l=(0,o.Z)(i,2),f=l[0],p=l[1],!f){e.next=18;break}return Q.ZP.error(qe(f.toString()),5),console.log(f),t.spinning=!1,m(),n(A(qe(f.toString()))),e.abrupt("return");case 18:p&&(Q.ZP.success("Success"),console.log(p),setTimeout((function(){return V(t)}),u));case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[r,n,u,V,m]),oe=(0,t.useCallback)((function(e,n){for(var r in f)f[r].length&&f[r].forEach((function(r){e.includes(r.id)&&(r.spinning=n)}))}),[f]),ue=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t,a){var s,c,i,l,f,p,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.name,c=r.permissions,i={actions:[{account:"dfstownlease",name:"withdraw",authorization:[{actor:s,permission:c}],data:{owner:s,assetid_array:1===t?O.current:[a.id]}}]},t?oe(O.current,!0):a.spinning=!0,m(),e.next=7,Re.transact(i);case 7:if(l=e.sent,f=(0,o.Z)(l,2),p=f[0],h=f[1],!p){e.next=18;break}return Q.ZP.error(qe(p.toString()),u),console.log(p),t?oe(O.current,!1):a.spinning=!1,m(),n(A(qe(p.toString()))),e.abrupt("return");case 18:h&&(Q.ZP.success("Success"),console.log(h),t?(oe(O.current,!1),$(O.current)):(a.spinning=!1,$([a.id])),m());case 19:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),[r,n,u,$,oe,m]),de=(0,t.useCallback)((function(e){T(!1),e&&(D.current?(oe(O.current,!0),m(),setTimeout((function(){return re(O.current)}),u)):(k.spinning=!0,setTimeout((function(){return V(k)}),u)))}),[k,u,V,m,oe,re]),fe=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t,a){var s,c,i,l,f,p,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.name,c=r.permissions,i={},0===t?i={actions:[{account:"dfstownlease",name:"setrent",authorization:[{actor:s,permission:c}],data:{owner:s,assetid_array:[a.id],renting:a.renting?0:1,end_time:0}}]}:1===t?i={actions:[{account:"dfstownlease",name:"setrent",authorization:[{actor:s,permission:c}],data:{owner:s,assetid_array:_.current,renting:0,end_time:0}}]}:2===t&&(i={actions:[{account:"dfstownlease",name:"setrent",authorization:[{actor:s,permission:c}],data:{owner:s,assetid_array:E.current,renting:1,end_time:0}}]}),0===t?a.spinning=!0:1===t?oe(_.current,!0):2===t&&oe(E.current,!0),m(),e.next=8,Re.transact(i);case 8:if(l=e.sent,f=(0,o.Z)(l,2),p=f[0],h=f[1],!p){e.next=19;break}return Q.ZP.error(qe(p.toString()),5),console.log(p),0===t?a.spinning=!1:1===t?oe(_.current,!1):2===t&&oe(E.current,!1),m(),n(A(qe(p.toString()))),e.abrupt("return");case 19:h&&(Q.ZP.success("Success"),console.log(h),0===t?setTimeout((function(){return V(a)}),u):1===t?setTimeout((function(){return re(_.current)}),u):2===t&&setTimeout((function(){return re(E.current)}),u));case 20:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),[r,n,u,V,m,oe,re]),pe=(0,t.useCallback)((function(e){var n=e.target.checked,r=e.target.data;n?O.current.includes(r.id)||(O.current.push(r.id),r.renting?_.current.push(r.id):E.current.push(r.id)):(O.current.splice(O.current.indexOf(r.id),1),r.renting?_.current.splice(_.current.indexOf(r.id),1):E.current.splice(E.current.indexOf(r.id),1)),L((0,i.Z)(O.current))}),[]),he=(0,t.useCallback)((function(e){"2"===x&&n(G("0")),H.current=e}),[x,n]),xe=(0,t.useCallback)((function(){if("1"===H.current)for(var e in f)f[e].forEach((function(e){O.current.includes(e.id)||(O.current.push(e.id),e.renting?_.current.push(e.id):E.current.push(e.id))}));else if("2"===H.current)f.land.forEach((function(e){O.current.includes(e.id)||(O.current.push(e.id),e.renting?_.current.push(e.id):E.current.push(e.id))}));else if("3"===H.current)for(var n in f)!f[n].length||"cow"!==f[n][0].collection&&"chicken"!==f[n][0].collection&&"sheep"!==f[n][0].collection||f[n].forEach((function(e){O.current.includes(e.id)||(O.current.push(e.id),e.renting?_.current.push(e.id):E.current.push(e.id))}));else if("4"===H.current)for(var r in f)f[r].length&&"cow"!==f[r][0].collection&&"chicken"!==f[r][0].collection&&"sheep"!==f[r][0].collection&&"land"!==f[r][0].collection&&f[r].forEach((function(e){O.current.includes(e.id)||(O.current.push(e.id),e.renting?_.current.push(e.id):E.current.push(e.id))}));else{var t=0;for(var a in f)if(f[a].length){if(t===H.current-5){f[a].forEach((function(e){O.current.includes(e.id)||(O.current.push(e.id),e.renting?_.current.push(e.id):E.current.push(e.id))}));break}t++}}L((0,i.Z)(O.current))}),[f]),me=(0,t.useCallback)((function(e){var n=e.elem.renting,r=e.elem.end_time,t=h()("".concat(r,".000+0000")),s=h()("".concat(r,".000+0000")).format("MM-DD HH:mm"),c=t.diff(h()()),i=function(){return!!e.elem.task.exist||(!n||c<=0)},l=function(){return i()?(0,ze.jsx)(se.Z,{dot:e.elem.task.exist&&0===e.elem.task.countDown,children:(0,ze.jsx)(ne.Z,{type:"link",size:"small",disabled:!e.elem.task.exist,onClick:function(){return le(e.elem)},children:"\u6536\u5272"})}):(0,ze.jsx)(ne.Z,{type:"link",size:"small",disabled:i(),onClick:function(){return M(e.elem)},children:"\u751f\u4ea7"})};return(0,ze.jsx)(ce.Z,{size:"large",spinning:e.elem.spinning,children:(0,ze.jsx)(ee.Z,{style:{marginTop:10},hoverable:!0,actions:[(0,ze.jsx)(ne.Z,{type:"link",size:"small",disabled:e.elem.task.exist&&e.elem.renter!==e.elem.owner,onClick:function(){return ue(0,e.elem)},children:"\u53d6\u56de"}),(0,ze.jsx)(l,{}),(0,ze.jsx)(ne.Z,{type:"link",size:"small",onClick:function(){return V(e.elem)},children:"\u5237\u65b0"}),(0,ze.jsx)(ne.Z,{type:"link",size:"small",onClick:function(){return fe(0,e.elem)},children:n?"\u9501\u5b9a":"\u89e3\u9501"}),(0,ze.jsx)(ne.Z,{type:"link",size:"small",onClick:function(){return U(0,e.elem)},children:"\u671f\u9650"})],children:(0,ze.jsx)(ee.Z.Meta,{className:"land"===e.elem.collection?"land":"",avatar:(0,ze.jsx)(se.Z,{count:e.elem.level,style:{backgroundColor:"#1890ff"},children:(0,ze.jsx)(Qe.C,{shape:"square",src:"https://cdn.jsdelivr.net/gh/defis-net/material3/Town/shop/".concat(e.elem.collection,".png")})}),title:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsxs)("div",{children:[(0,ze.jsx)(Xe.Z,{color:"blue",children:a[e.elem.collection]}),n?(0,ze.jsx)(Xe.Z,{color:"green",children:(0,ze.jsx)(fn.Z,{})}):(0,ze.jsx)(Xe.Z,{color:"red",children:(0,ze.jsx)(pn.Z,{})}),"2106-02-07T06:28:15"!==r&&n?c>0?(0,ze.jsx)(Xe.Z,{color:"green",children:s}):(0,ze.jsx)(Xe.Z,{color:"red",children:s}):""]}),(0,ze.jsxs)("div",{className:"flexcc",children:[(0,ze.jsxs)(Xe.Z,{color:"blue",children:["#",e.elem.id]}),(0,ze.jsx)(ae.Z,{style:{zIndex:100},data:e.elem,checked:O.current.includes(e.elem.id),onChange:pe})]})]}),description:(0,ze.jsxs)("div",{children:[(0,ze.jsxs)("div",{className:"flexsc",children:[(0,ze.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u72b6\u6001\uff1a",J(e.elem.task)]}),(0,ze.jsxs)("div",{style:{width:"53%"},className:"flexsc flex-grow-1 fs-small",children:["\u5012\u8ba1\u65f6\u95f4\uff1a",(0,ze.jsx)($e.Z.Countdown,{valueStyle:{fontSize:"13px",color:"rgba(0, 0, 0, 0.45)"},value:e.elem.task.mature_time,format:"HH:mm:ss"})]})]}),(0,ze.jsxs)("div",{className:"flexsc",children:[(0,ze.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u4ea7\u54c1\uff1a",e.elem.task.exist?e.elem.task.product.num+"\u4e2a"+e.elem.task.product.name:"\u65e0"]}),(0,ze.jsxs)("div",{style:{width:"53%"},className:"flex-grow-1 fs-small",children:["\u5b8c\u6210\u65f6\u95f4\uff1a",e.elem.task.exist?e.elem.task.end_time.slice(5,10)+" "+e.elem.task.end_time.slice(11,16):"\u65e0"]})]})]})})})})}),[J,M,le,ue,fe,pe,U,a,V]),ve=(0,t.useCallback)((function(e){var n=0;if("\u5168\u90e8"===e.name)for(var t in f){var s=0;f[t].forEach((function(e){e.owner===r.name&&(s+=1)})),n+=s}else if("\u519c\u573a"===e.name)f.land.forEach((function(e){e.owner===r.name&&(n+=1)}));else if("\u7267\u573a"===e.name)for(var c in f){var i=0;!f[c].length||"cow"!==f[c][0].collection&&"chicken"!==f[c][0].collection&&"sheep"!==f[c][0].collection||(f[c].forEach((function(e){e.owner===r.name&&(i+=1)})),n+=i)}else{if("\u5de5\u5382"!==e.name)return f[e.name].forEach((function(e){e.owner===r.name&&(n+=1)})),(0,ze.jsx)(se.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:n,children:a[e.name]});for(var l in f){var o=0;f[l].length&&"cow"!==f[l][0].collection&&"chicken"!==f[l][0].collection&&"sheep"!==f[l][0].collection&&"land"!==f[l][0].collection&&(f[l].forEach((function(e){e.owner===r.name&&(o+=1)})),n+=o)}}return(0,ze.jsx)(se.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:n,children:e.name})}),[f,a,r]),be=(0,t.useCallback)((function(){var e=[],n=function(n){if(f[n].length){var t=[];f[n].forEach((function(a,s){a.owner===r.name&&t.push((0,ze.jsx)(me,{elem:a},e.length*f[n].length+s))})),t.length&&e.push((0,ze.jsx)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(ve,{name:f[n][0].collection}),children:t},String(e.length+5)))}};for(var t in f)n(t);return e}),[f,r.name]),ge=(0,t.useCallback)((function(){var e=[];for(var n in f)f[n].length&&f[n].forEach((function(n){n.owner===r.name&&e.push((0,ze.jsx)(me,{elem:n},e.length))}));return e}),[f,r.name]),ke=(0,t.useCallback)((function(){var e=[];return f.land.forEach((function(n){n.owner===r.name&&e.push((0,ze.jsx)(me,{elem:n},e.length))})),e}),[f,r.name]),Ze=(0,t.useCallback)((function(){var e=[];for(var n in f)!f[n].length||"cow"!==f[n][0].collection&&"chicken"!==f[n][0].collection&&"sheep"!==f[n][0].collection||f[n].forEach((function(n){n.owner===r.name&&e.push((0,ze.jsx)(me,{elem:n},e.length))}));return e}),[f,r.name]),je=(0,t.useCallback)((function(){var e=[];for(var n in f)f[n].length&&"cow"!==f[n][0].collection&&"chicken"!==f[n][0].collection&&"sheep"!==f[n][0].collection&&"land"!==f[n][0].collection&&f[n].forEach((function(n){n.owner===r.name&&e.push((0,ze.jsx)(me,{elem:n},e.length))}));return e}),[f,r.name]);return(0,ze.jsxs)(ze.Fragment,{children:[F.length>0?(0,ze.jsx)(en.Z,{style:{zIndex:100,position:"absolute",top:80,right:0},children:(0,ze.jsxs)("div",{children:[(0,ze.jsxs)("div",{children:[(0,ze.jsx)(ne.Z,{className:"rmt-1 mr-7",type:"primary",size:"small",shape:"round",onClick:X,children:"\u53d6\u6d88"}),(0,ze.jsxs)(ne.Z,{className:"rmt-1 mr-7",type:"primary",size:"small",shape:"round",onClick:function(){return U(1)},children:["\u671f\u9650",F.length]}),(0,ze.jsxs)(ne.Z,{className:"rmt-1 mr-7",type:"primary",size:"small",shape:"round",onClick:function(){return fe(1)},children:["\u9501\u5b9a",_.current.length]}),(0,ze.jsxs)(ne.Z,{className:"rmt-1 mr-7",type:"primary",size:"small",shape:"round",onClick:function(){return fe(2)},children:["\u89e3\u9501",E.current.length]}),(0,ze.jsxs)(ne.Z,{className:"rmt-1 mr-7",type:"primary",size:"small",shape:"round",onClick:function(){return ue(1)},children:["\u53d6\u56de",F.length]})]}),(0,ze.jsx)("div",{children:(0,ze.jsx)(ne.Z,{className:"rmt-5 mr-7",type:"primary",size:"small",shape:"round",onClick:xe,children:"\u5168\u9009"})})]})}):(0,ze.jsx)(ze.Fragment,{}),(0,ze.jsxs)(ie.Z,{tabBarStyle:{margin:"0 0 0 0"},defaultActiveKey:"1",onChange:he,children:[(0,ze.jsx)(ie.Z.TabPane,{},"100"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(ve,{name:"\u5168\u90e8"}),children:[(0,ze.jsx)(ge,{}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"1"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(ve,{name:"\u519c\u573a"}),children:[(0,ze.jsx)(ke,{}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"2"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(ve,{name:"\u7267\u573a"}),children:[(0,ze.jsx)(Ze,{}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"3"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(ve,{name:"\u5de5\u5382"}),children:[(0,ze.jsx)(je,{}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:v,avatar:!0,active:!0,paragraph:{rows:3}})]},"4"),be(),(0,ze.jsx)(ie.Z.TabPane,{},"101")]}),(0,ze.jsx)(cn,{visible:y,curCard:k,handleCloseDialog:te}),(0,ze.jsx)(dn,{visible:P,flag:D.current,check:F,curCard:k,handleCloseDialog:de})]})}var xn=(0,t.memo)(hn);function mn(e){console.log("MyRent");var n=(0,s.I0)(),r=(0,s.v9)((function(e){return e.app.account})),a=(0,s.v9)((function(e){return e.app.nftChinese})),c=(0,s.v9)((function(e){return e.app.chinese})),i=(0,s.v9)((function(e){return e.app.delay})),u=(0,s.v9)((function(e){return e.app.rentNfts})),f=(0,s.v9)((function(e){return e.app.updateTab})),p=(0,t.useReducer)((function(e){return!e}))[1],x=e.loading,m=(0,t.useState)({level:1,id:1,collection:"land",end_time:"2106-02-07T06:28:15",require_time:0}),v=(0,o.Z)(m,2),b=v[0],g=v[1],k=(0,t.useState)(!1),Z=(0,o.Z)(k,2),j=Z[0],w=Z[1],y=(0,t.useRef)({}),C=(0,t.useCallback)((function(e){g(e),w(!0)}),[]),S=(0,t.useCallback)((function(e){return e.exist?0===e.countDown?"\u5f85\u6536\u5272":e.countDown>0?"\u751f\u4ea7\u4e2d":void 0:"\u5f85\u751f\u4ea7"}),[]),N=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var t,a,s,c,l,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfstownlease",scope:"dfstownlease",table:"assets",json:!0,lower_bound:r,upper_bound:r},e.next=3,Re.getTableRows(t);case 3:if(a=e.sent,s=(0,o.Z)(a,2),c=s[0],l=s[1],!c){e.next=11;break}return Q.ZP.error("\u83b7\u53d6rent assets\u5931\u8d25",i),n(A("\u83b7\u53d6rent assets\u5931\u8d25")),e.abrupt("return");case 11:if((u=l.rows||[]).length){e.next=16;break}return Q.ZP.error("\u83b7\u53d6rent assets\u5931\u8d25",i),n(A("\u83b7\u53d6rent assets\u5931\u8d25")),e.abrupt("return");case 16:y.current=u[0],y.current.level=null,y.current.task={countDown:0,exist:!1},y.current.multiple=1,y.current.round=1,y.current.spinning=!1;case 22:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,i]),P=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var t,a,s,c,l,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfsmetaverse",scope:r,table:"stats",json:!0},e.next=3,Re.getTableRows(t);case 3:if(a=e.sent,s=(0,o.Z)(a,2),c=s[0],l=s[1],!c){e.next=11;break}return Q.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",i),n(A("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 11:if((u=l.rows||[]).length){e.next=16;break}return Q.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",i),n(A("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 16:y.current.level=u[0].val,y.current.multiple=y.current.level;case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,i]),T=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var t,a,s,l,u,f,p,x,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfsmetaverse",scope:"dfsmetaverse",table:"tasks",lower_bound:r,upper_bound:r,json:!0},e.next=3,Re.getTableRows(t);case 3:if(a=e.sent,s=(0,o.Z)(a,2),l=s[0],u=s[1],!l){e.next=11;break}return Q.ZP.error("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25",i),n(A("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25")),e.abrupt("return");case 11:if((f=u.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:y.current.task=f[0],y.current.task.create_time=h()("".concat(y.current.task.create_time,".000+0000")).format(),p=h()("".concat(y.current.task.mature_time,".000+0000")),y.current.task.mature_time=p.format(),y.current.task.end_time=p.format("YYYY-MM-DD HH:mm:ss"),x=p.diff(h()()),y.current.task.countDown=x<=0?0:x,y.current.task.exist=!0,m=y.current.task.product.split(" "),y.current.task.product={num:parseInt(m[0]).toFixed(0),name:c[m[1]]};case 24:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,i,c]),O=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.spinning=!0,p(),e.next=4,N(r.id);case 4:return e.next=6,P(r.id);case 6:return e.next=8,T(r.id);case 8:r.spinning=!1,t=0;case 10:if(!(t<u[r.collection].length)){e.next=17;break}if(u[r.collection][t].id!==r.id){e.next=14;break}return u[r.collection][t]=y.current,e.abrupt("break",17);case 14:t++,e.next=10;break;case 17:n(z(u)),p();case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[N,P,T,p,n,u]),E=(0,t.useCallback)((function(e){w(!1),e&&(b.spinning=!0,setTimeout((function(){return O(b)}),i))}),[b,i,O]),_=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var a,s,c,l,u,f,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.name,s=r.permissions,c={actions:[{account:"dfstownlease",name:"harvest",authorization:[{actor:a,permission:s}],data:{user:a,taskid:t.id}}]},t.spinning=!0,p(),e.next=7,Re.transact(c);case 7:if(l=e.sent,u=(0,o.Z)(l,2),f=u[0],h=u[1],!f){e.next=18;break}return Q.ZP.error(qe(f.toString()),5),console.log(f),t.spinning=!1,p(),n(A(qe(f.toString()))),e.abrupt("return");case 18:h&&(Q.ZP.success("Success"),console.log(h),setTimeout((function(){return O(t)}),i));case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[r,n,i,O,p]),D=(0,t.useCallback)((function(e){var n=e.elem.renting,r=e.elem.end_time,t=h()("".concat(r,".000+0000")),s=h()("".concat(r,".000+0000")).format("MM-DD HH:mm"),c=t.diff(h()());return(0,ze.jsx)(ce.Z,{size:"large",spinning:e.elem.spinning,children:(0,ze.jsx)(ee.Z,{style:{marginTop:10},hoverable:!0,actions:[(0,ze.jsx)(ne.Z,{type:"link",size:"small",disabled:!!e.elem.task.exist||!n||c<=0,onClick:function(){return C(e.elem)},children:"\u751f\u4ea7"}),(0,ze.jsx)(ne.Z,{type:"link",size:"small",onClick:function(){return O(e.elem)},children:"\u5237\u65b0"}),(0,ze.jsx)(se.Z,{dot:e.elem.task.exist&&0===e.elem.task.countDown,children:(0,ze.jsx)(ne.Z,{type:"link",size:"small",disabled:!e.elem.task.exist,onClick:function(){return _(e.elem)},children:"\u6536\u5272"})})],children:(0,ze.jsx)(ee.Z.Meta,{className:"land"===e.elem.collection?"land":"",avatar:(0,ze.jsx)(se.Z,{count:e.elem.level,style:{backgroundColor:"#1890ff"},children:(0,ze.jsx)(Qe.C,{shape:"square",src:"https://cdn.jsdelivr.net/gh/defis-net/material3/Town/shop/".concat(e.elem.collection,".png")})}),title:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsxs)("div",{children:[(0,ze.jsx)(Xe.Z,{color:"blue",children:a[e.elem.collection]}),n?(0,ze.jsx)(Xe.Z,{color:"green",children:(0,ze.jsx)(fn.Z,{})}):(0,ze.jsx)(Xe.Z,{color:"red",children:(0,ze.jsx)(pn.Z,{})}),"2106-02-07T06:28:15"!==r&&n?c>0?(0,ze.jsx)(Xe.Z,{color:"green",children:s}):(0,ze.jsx)(Xe.Z,{color:"red",children:s}):""]}),(0,ze.jsxs)(Xe.Z,{style:{marginRight:"0"},color:"blue",children:["#",e.elem.id]})]}),description:(0,ze.jsxs)("div",{children:[(0,ze.jsxs)("div",{className:"flexsc",children:[(0,ze.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u72b6\u6001\uff1a",S(e.elem.task)]}),(0,ze.jsxs)("div",{style:{width:"53%"},className:"flexsc flex-grow-1 fs-small",children:["\u5012\u8ba1\u65f6\u95f4\uff1a",(0,ze.jsx)($e.Z.Countdown,{valueStyle:{fontSize:"13px",color:"rgba(0, 0, 0, 0.45)"},value:e.elem.task.mature_time,format:"HH:mm:ss"})]})]}),(0,ze.jsxs)("div",{className:"flexsc",children:[(0,ze.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u4ea7\u54c1\uff1a",e.elem.task.exist?e.elem.task.product.num+"\u4e2a"+e.elem.task.product.name:"\u65e0"]}),(0,ze.jsxs)("div",{style:{width:"53%"},className:"flex-grow-1 fs-small",children:["\u5b8c\u6210\u65f6\u95f4\uff1a",e.elem.task.exist?e.elem.task.end_time.slice(5,10)+" "+e.elem.task.end_time.slice(11,16):"\u65e0"]})]})]})})})})}),[S,C,_,a,O]),I=(0,t.useCallback)((function(e){var n=0;if("\u5168\u90e8"===e.name)for(var t in u){var s=0;u[t].forEach((function(e){e.renter===r.name&&(s+=1)})),n+=s}else if("\u519c\u573a"===e.name)u.land.forEach((function(e){e.renter===r.name&&(n+=1)}));else if("\u7267\u573a"===e.name)for(var c in u){var i=0;!u[c].length||"cow"!==u[c][0].collection&&"chicken"!==u[c][0].collection&&"sheep"!==u[c][0].collection||(u[c].forEach((function(e){e.renter===r.name&&(i+=1)})),n+=i)}else{if("\u5de5\u5382"!==e.name)return u[e.name].forEach((function(e){e.renter===r.name&&(n+=1)})),(0,ze.jsx)(se.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:n,children:a[e.name]});for(var l in u){var o=0;u[l].length&&"cow"!==u[l][0].collection&&"chicken"!==u[l][0].collection&&"sheep"!==u[l][0].collection&&"land"!==u[l][0].collection&&(u[l].forEach((function(e){e.renter===r.name&&(o+=1)})),n+=o)}}return(0,ze.jsx)(se.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:n,children:e.name})}),[u,a,r]),R=(0,t.useCallback)((function(){var e=[],n=function(n){if(u[n].length){var t=[];u[n].forEach((function(a,s){a.renter===r.name&&t.push((0,ze.jsx)(D,{elem:a},e.length*u[n].length+s))})),t.length&&e.push((0,ze.jsx)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(I,{name:u[n][0].collection}),children:t},String(e.length+5)))}};for(var t in u)n(t);return e}),[u,r.name]),F=(0,t.useCallback)((function(){var e=[];for(var n in u)u[n].length&&u[n].forEach((function(n){n.renter===r.name&&e.push((0,ze.jsx)(D,{elem:n},e.length))}));return e}),[u,r.name]),L=(0,t.useCallback)((function(){var e=[];return u.land.forEach((function(n){n.renter===r.name&&e.push((0,ze.jsx)(D,{elem:n},e.length))})),e}),[u,r.name]),Y=(0,t.useCallback)((function(){var e=[];for(var n in u)!u[n].length||"cow"!==u[n][0].collection&&"chicken"!==u[n][0].collection&&"sheep"!==u[n][0].collection||u[n].forEach((function(n){n.renter===r.name&&e.push((0,ze.jsx)(D,{elem:n},e.length))}));return e}),[u,r.name]),H=(0,t.useCallback)((function(){var e=[];for(var n in u)u[n].length&&"cow"!==u[n][0].collection&&"chicken"!==u[n][0].collection&&"sheep"!==u[n][0].collection&&"land"!==u[n][0].collection&&u[n].forEach((function(n){n.renter===r.name&&e.push((0,ze.jsx)(D,{elem:n},e.length))}));return e}),[u,r.name]),B=(0,t.useCallback)((function(){"3"===f&&n(G("0"))}),[f,n]);return(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsxs)(ie.Z,{tabBarStyle:{margin:"0 0 0 0"},defaultActiveKey:"1",onChange:B,children:[(0,ze.jsx)(ie.Z.TabPane,{},"100"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(I,{name:"\u5168\u90e8"}),children:[(0,ze.jsx)(F,{}),(0,ze.jsx)(nn.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}})]},"1"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(I,{name:"\u519c\u573a"}),children:[(0,ze.jsx)(L,{}),(0,ze.jsx)(nn.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}})]},"2"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(I,{name:"\u7267\u573a"}),children:[(0,ze.jsx)(Y,{}),(0,ze.jsx)(nn.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}})]},"3"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(I,{name:"\u5de5\u5382"}),children:[(0,ze.jsx)(H,{}),(0,ze.jsx)(nn.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:x,avatar:!0,active:!0,paragraph:{rows:3}})]},"4"),R(),(0,ze.jsx)(ie.Z.TabPane,{},"101")]}),(0,ze.jsx)(cn,{visible:j,curCard:b,handleCloseDialog:E})]})}var vn=(0,t.memo)(mn),bn=r(35796);function gn(e){console.log("Market");var n=(0,s.I0)(),r=(0,s.v9)((function(e){return e.app.account})),a=(0,s.v9)((function(e){return e.app.nftChinese})),c=(0,s.v9)((function(e){return e.app.chinese})),i=(0,s.v9)((function(e){return e.app.delay})),u=(0,s.v9)((function(e){return e.app.global})),f=(0,s.v9)((function(e){return e.app.rentNfts})),p=(0,s.v9)((function(e){return e.app.updateTab})),x=(0,t.useReducer)((function(e){return!e}))[1],m=e.loading,v=(0,t.useState)({level:1,id:1,collection:"land",end_time:"2106-02-07T06:28:15",require_time:0}),b=(0,o.Z)(v,2),g=b[0],k=b[1],Z=(0,t.useState)(!1),j=(0,o.Z)(Z,2),w=j[0],y=j[1],C=(0,t.useRef)({}),S=(0,t.useCallback)((function(e){k(e),y(!0)}),[]),N=(0,t.useCallback)((function(e){return e.exist?0===e.countDown?"\u5f85\u6536\u5272":e.countDown>0?"\u751f\u4ea7\u4e2d":void 0:"\u5f85\u751f\u4ea7"}),[]),P=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var t,a,s,c,l,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfstownlease",scope:"dfstownlease",table:"assets",json:!0,lower_bound:r,upper_bound:r},e.next=3,Re.getTableRows(t);case 3:if(a=e.sent,s=(0,o.Z)(a,2),c=s[0],l=s[1],!c){e.next=11;break}return Q.ZP.error("\u83b7\u53d6rent assets\u5931\u8d25",i),n(A("\u83b7\u53d6rent assets\u5931\u8d25")),e.abrupt("return");case 11:if((u=l.rows||[]).length){e.next=16;break}return Q.ZP.error("\u83b7\u53d6rent assets\u5931\u8d25",i),n(A("\u83b7\u53d6rent assets\u5931\u8d25")),e.abrupt("return");case 16:C.current=u[0],C.current.level=null,C.current.task={countDown:0,exist:!1},C.current.multiple=1,C.current.round=1,C.current.spinning=!1;case 22:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,i]),T=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var t,a,s,c,l,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfsmetaverse",scope:r,table:"stats",json:!0},e.next=3,Re.getTableRows(t);case 3:if(a=e.sent,s=(0,o.Z)(a,2),c=s[0],l=s[1],!c){e.next=11;break}return Q.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",i),n(A("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 11:if((u=l.rows||[]).length){e.next=16;break}return Q.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",i),n(A("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 16:C.current.level=u[0].val,C.current.multiple=C.current.level;case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,i]),O=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var t,a,s,l,u,f,p,x,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfsmetaverse",scope:"dfsmetaverse",table:"tasks",lower_bound:r,upper_bound:r,json:!0},e.next=3,Re.getTableRows(t);case 3:if(a=e.sent,s=(0,o.Z)(a,2),l=s[0],u=s[1],!l){e.next=11;break}return Q.ZP.error("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25",i),n(A("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25")),e.abrupt("return");case 11:if((f=u.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:C.current.task=f[0],C.current.task.create_time=h()("".concat(C.current.task.create_time,".000+0000")).format(),p=h()("".concat(C.current.task.mature_time,".000+0000")),C.current.task.mature_time=p.format(),C.current.task.end_time=p.format("YYYY-MM-DD HH:mm:ss"),x=p.diff(h()()),C.current.task.countDown=x<=0?0:x,C.current.task.exist=!0,m=C.current.task.product.split(" "),C.current.task.product={num:parseInt(m[0]).toFixed(0),name:c[m[1]]};case 24:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,i,c]),E=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(r){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.spinning=!0,x(),e.next=4,P(r.id);case 4:return e.next=6,T(r.id);case 6:return e.next=8,O(r.id);case 8:r.spinning=!1,t=0;case 10:if(!(t<f[r.collection].length)){e.next=17;break}if(f[r.collection][t].id!==r.id){e.next=14;break}return f[r.collection][t]=C.current,e.abrupt("break",17);case 14:t++,e.next=10;break;case 17:n(z(f)),x();case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[P,T,O,x,n,f]),_=(0,t.useCallback)((function(e){y(!1),e&&(g.spinning=!0,setTimeout((function(){return E(g)}),i))}),[g,i,E]),D=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(t){var a,s,c,l,u,f,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.name,s=r.permissions,c={actions:[{account:"dfstownlease",name:"harvest",authorization:[{actor:a,permission:s}],data:{user:a,taskid:t.id}}]},t.spinning=!0,x(),e.next=7,Re.transact(c);case 7:if(l=e.sent,u=(0,o.Z)(l,2),f=u[0],p=u[1],!f){e.next=18;break}return Q.ZP.error(qe(f.toString()),5),console.log(f),t.spinning=!1,x(),n(A(qe(f.toString()))),e.abrupt("return");case 18:p&&(Q.ZP.success("Success"),console.log(p),setTimeout((function(){return E(t)}),i));case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[r,n,x,E,i]),I=(0,t.useCallback)((function(e){var n=e.elem.renting,r=e.elem.end_time,t=h()("".concat(r,".000+0000")),s=h()("".concat(r,".000+0000")).format("MM-DD HH:mm"),c=t.diff(h()());return(0,ze.jsx)(ce.Z,{size:"large",spinning:e.elem.spinning,children:(0,ze.jsx)(ee.Z,{style:{marginTop:10},hoverable:!0,actions:[(0,ze.jsx)(ne.Z,{type:"link",size:"small",disabled:!!e.elem.task.exist||!n||c<=0,onClick:function(){return S(e.elem)},children:"\u751f\u4ea7"}),(0,ze.jsx)(ne.Z,{type:"link",size:"small",onClick:function(){return E(e.elem)},children:"\u5237\u65b0"}),(0,ze.jsxs)("div",{className:"flexcc",children:[(0,ze.jsx)(se.Z,{dot:e.elem.task.exist&&0===e.elem.task.countDown,children:(0,ze.jsx)(ne.Z,{type:"link",size:"small",disabled:!e.elem.task.exist,onClick:function(){return D(e.elem)},children:"\u6536\u5272"})}),(0,ze.jsx)(Me.Z,{placement:"left",title:"\u4ee3\u7406\u7528\u6237\u6536\u5272\u4f1a\u6709\u5956\u52b1\uff0c\u5f53\u524d\u5956\u52b1\u4e3a\uff1a"+u.reward_fee,trigger:"click",children:(0,ze.jsx)(bn.Z,{style:{color:"rgba(0, 0, 0, 0.25)"},className:"rml-2"})})]})],children:(0,ze.jsx)(ee.Z.Meta,{className:"land"===e.elem.collection?"land":"",avatar:(0,ze.jsx)(se.Z,{count:e.elem.level,style:{backgroundColor:"#1890ff"},children:(0,ze.jsx)(Qe.C,{shape:"square",src:"https://cdn.jsdelivr.net/gh/defis-net/material3/Town/shop/".concat(e.elem.collection,".png")})}),title:(0,ze.jsxs)("div",{className:"flexbc",children:[(0,ze.jsxs)("div",{children:[(0,ze.jsx)(Xe.Z,{color:"blue",children:a[e.elem.collection]}),n?(0,ze.jsx)(Xe.Z,{color:"green",children:(0,ze.jsx)(fn.Z,{})}):(0,ze.jsx)(Xe.Z,{color:"red",children:(0,ze.jsx)(pn.Z,{})}),"2106-02-07T06:28:15"!==r&&n?c>0?(0,ze.jsx)(Xe.Z,{color:"green",children:s}):(0,ze.jsx)(Xe.Z,{color:"red",children:s}):""]}),(0,ze.jsxs)(Xe.Z,{style:{marginRight:"0"},color:"blue",children:["#",e.elem.id]})]}),description:(0,ze.jsxs)("div",{children:[(0,ze.jsxs)("div",{className:"flexsc",children:[(0,ze.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u72b6\u6001\uff1a",N(e.elem.task)]}),(0,ze.jsxs)("div",{style:{width:"53%"},className:"flexsc flex-grow-1 fs-small",children:["\u5012\u8ba1\u65f6\u95f4\uff1a",(0,ze.jsx)($e.Z.Countdown,{valueStyle:{fontSize:"13px",color:"rgba(0, 0, 0, 0.45)"},value:e.elem.task.mature_time,format:"HH:mm:ss"})]})]}),(0,ze.jsxs)("div",{className:"flexsc",children:[(0,ze.jsxs)("div",{style:{width:"47%"},className:"flex-grow-1 fs-small",children:["\u4ea7\u54c1\uff1a",e.elem.task.exist?e.elem.task.product.num+"\u4e2a"+e.elem.task.product.name:"\u65e0"]}),(0,ze.jsxs)("div",{style:{width:"53%"},className:"flex-grow-1 fs-small",children:["\u5b8c\u6210\u65f6\u95f4\uff1a",e.elem.task.exist?e.elem.task.end_time.slice(5,10)+" "+e.elem.task.end_time.slice(11,16):"\u65e0"]})]})]})})})})}),[N,S,D,a,u,E]),R=(0,t.useCallback)((function(e){var n=0;if("\u5168\u90e8"===e.name)for(var r in f)n+=f[r].length;else if("\u519c\u573a"===e.name)n=f.land.length;else if("\u7267\u573a"===e.name)for(var t in f)!f[t].length||"cow"!==f[t][0].collection&&"chicken"!==f[t][0].collection&&"sheep"!==f[t][0].collection||(n+=f[t].length);else{if("\u5de5\u5382"!==e.name)return n+=f[e.name].length,(0,ze.jsx)(se.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:n,children:a[e.name]});for(var s in f)f[s].length&&"cow"!==f[s][0].collection&&"chicken"!==f[s][0].collection&&"sheep"!==f[s][0].collection&&"land"!==f[s][0].collection&&(n+=f[s].length)}return(0,ze.jsx)(se.Z,{style:{backgroundColor:"#1890ff"},overflowCount:999,size:"small",offset:[0,-8],count:n,children:e.name})}),[f,a]),F=(0,t.useCallback)((function(){var e=[],n=function(n){if(f[n].length){var r=[];f[n].forEach((function(t,a){r.push((0,ze.jsx)(I,{elem:t},e.length*f[n].length+a))})),e.push((0,ze.jsx)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(R,{name:f[n][0].collection}),children:r},String(e.length+5)))}};for(var r in f)n(r);return e}),[f]),L=(0,t.useCallback)((function(){var e=[];for(var n in f)f[n].length&&f[n].forEach((function(n){e.push((0,ze.jsx)(I,{elem:n},e.length))}));return e}),[f]),Y=(0,t.useCallback)((function(){var e=[];return f.land.forEach((function(n){e.push((0,ze.jsx)(I,{elem:n},e.length))})),e}),[f]),H=(0,t.useCallback)((function(){var e=[];for(var n in f)!f[n].length||"cow"!==f[n][0].collection&&"chicken"!==f[n][0].collection&&"sheep"!==f[n][0].collection||f[n].forEach((function(n){e.push((0,ze.jsx)(I,{elem:n},e.length))}));return e}),[f]),B=(0,t.useCallback)((function(){var e=[];for(var n in f)f[n].length&&"cow"!==f[n][0].collection&&"chicken"!==f[n][0].collection&&"sheep"!==f[n][0].collection&&"land"!==f[n][0].collection&&f[n].forEach((function(n){e.push((0,ze.jsx)(I,{elem:n},e.length))}));return e}),[f]),M=(0,t.useCallback)((function(){"4"===p&&n(G("0"))}),[p,n]);return(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsxs)(ie.Z,{tabBarStyle:{margin:"0 0 0 0"},defaultActiveKey:"1",onChange:M,children:[(0,ze.jsx)(ie.Z.TabPane,{},"100"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(R,{name:"\u5168\u90e8"}),children:[(0,ze.jsx)(L,{}),(0,ze.jsx)(nn.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}})]},"1"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(R,{name:"\u519c\u573a"}),children:[(0,ze.jsx)(Y,{}),(0,ze.jsx)(nn.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}})]},"2"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(R,{name:"\u7267\u573a"}),children:[(0,ze.jsx)(H,{}),(0,ze.jsx)(nn.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}})]},"3"),(0,ze.jsxs)(ie.Z.TabPane,{className:"rmb-2",tab:(0,ze.jsx)(R,{name:"\u5de5\u5382"}),children:[(0,ze.jsx)(B,{}),(0,ze.jsx)(nn.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}}),(0,ze.jsx)(nn.Z,{loading:m,avatar:!0,active:!0,paragraph:{rows:3}})]},"4"),F(),(0,ze.jsx)(ie.Z.TabPane,{},"101")]}),(0,ze.jsx)(cn,{visible:w,curCard:g,handleCloseDialog:_})]})}var kn=(0,t.memo)(gn);function Zn(e){var n=(0,s.I0)(),r=(0,s.v9)((function(e){return e.app.account})),a=(0,t.useState)(!1),c=(0,o.Z)(a,2),i=c[0],u=c[1],f=(0,t.useRef)(i),p=(0,t.useState)(!1),h=(0,o.Z)(p,2),x=h[0],m=h[1],v=(0,t.useState)("0.0000 DCASH"),b=(0,o.Z)(v,2),g=b[0],k=b[1];console.log("MyRewardModal render"),(0,t.useEffect)((function(){u(e.visible)}),[e.visible]);var Z=(0,t.useCallback)((function(){m(!1),u(!1),e.handleCloseDialog()}),[e]),j=(0,t.useCallback)((0,l.Z)(d().mark((function e(){var t,a,s,c,i,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={code:"dfstownlease",scope:"dfstownlease",table:"balances",lower_bound:r.name,upper_bound:r.name,json:!0},e.next=3,Re.getTableRows(t);case 3:if(a=e.sent,s=(0,o.Z)(a,2),c=s[0],i=s[1],!c){e.next=11;break}return Q.ZP.error("\u83b7\u53d6\u8d26\u53f7\u5956\u52b1\u8d44\u4ea7\u5931\u8d25",5),n(A("\u83b7\u53d6\u8d26\u53f7\u5956\u52b1\u8d44\u4ea7\u5931\u8d25")),e.abrupt("return");case 11:if((l=i.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:k(l[0].balance);case 15:case"end":return e.stop()}}),e)}))),[r,n]),w=(0,t.useCallback)((function(){j()}),[j]),y=(0,t.useCallback)((0,l.Z)(d().mark((function t(){var a,s,c,i,l,f,p;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.name,s=r.permissions,c={actions:[{account:"dfstownlease",name:"claim",authorization:[{actor:a,permission:s}],data:{owner:a}}]},m(!0),t.next=6,Re.transact(c);case 6:if(i=t.sent,l=(0,o.Z)(i,2),f=l[0],p=l[1],!f){t.next=16;break}return Q.ZP.error(qe(f.toString()),5),console.log(f),m(!1),n(A(qe(f.toString()))),t.abrupt("return");case 16:p&&(m(!1),Q.ZP.success("Success"),u(!1),e.handleCloseDialog(!1),console.log(p));case 17:case"end":return t.stop()}}),t)}))),[r,n,e]);return(0,t.useEffect)((function(){f.current=i,i&&w()}),[i,w]),(0,ze.jsx)(Ae.Z,{title:"\u5956\u52b1\u64cd\u4f5c",visible:i,width:"94%",bodyStyle:{padding:"0px 24px"},onOk:y,onCancel:Z,cancelText:"\u53d6\u6d88",okText:"\u9886\u53d6",transitionName:"",maskTransitionName:"",children:(0,ze.jsx)(ce.Z,{size:"large",spinning:x,children:(0,ze.jsxs)("div",{className:"rmt-3 rmb-3 flexsc",children:["\u6211\u7684\u5956\u52b1\uff1a",g]})})})}var jn=(0,t.memo)(Zn),wn=r(39498);function yn(e){var n=(0,s.I0)(),r=(0,s.v9)((function(e){return e.app.account})),a=(0,t.useState)(!1),c=(0,o.Z)(a,2),i=c[0],u=c[1],f=(0,t.useRef)(i),p=(0,t.useState)(!1),h=(0,o.Z)(p,2),x=h[0],m=h[1],v=(0,t.useState)(""),b=(0,o.Z)(v,2),g=b[0],k=b[1],Z=(0,t.useState)(!0),j=(0,o.Z)(Z,2),w=j[0],y=j[1];console.log("LockModal render"),(0,t.useEffect)((function(){u(e.visible)}),[e.visible]);var C=(0,t.useCallback)((function(){m(!1),u(!1),e.handleCloseDialog(!1)}),[e]),S=(0,t.useCallback)((function(){}),[]),N=(0,t.useCallback)((0,l.Z)(d().mark((function t(){var a,s,c,i,l,f,p;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.name,s=r.permissions,c={actions:[{account:"dfstownlease",name:"lock",authorization:[{actor:a,permission:s}],data:{lock:w?1:0,msg:g}}]},m(!0),t.next=6,Re.transact(c);case 6:if(i=t.sent,l=(0,o.Z)(i,2),f=l[0],p=l[1],!f){t.next=16;break}return Q.ZP.error(qe(f.toString()),5),console.log(f),m(!1),n(A(qe(f.toString()))),t.abrupt("return");case 16:p&&(m(!1),Q.ZP.success("Success"),u(!1),e.handleCloseDialog(!1),console.log(p));case 17:case"end":return t.stop()}}),t)}))),[r,w,g,n,e]),P=(0,t.useCallback)((function(e){k(e.target.value)}),[]),T=(0,t.useCallback)((function(e){y(e.target.checked)}),[]);return(0,t.useEffect)((function(){f.current=i,i&&S()}),[i,S]),(0,ze.jsx)(Ae.Z,{title:"\u9501\u5b9a\u64cd\u4f5c",visible:i,width:"94%",bodyStyle:{padding:"0px 24px"},onOk:N,onCancel:C,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,ze.jsxs)(ce.Z,{size:"large",spinning:x,children:[(0,ze.jsx)("div",{className:"rmt-3 flexsc",children:(0,ze.jsx)(ae.Z,{checked:w,onChange:T,children:"\u9501\u5b9a\u5408\u7ea6"})}),(0,ze.jsx)("div",{className:"rmt-3 rmb-3 flexsc",children:(0,ze.jsx)(wn.Z,{addonBefore:"\u63d0\u793a\u4fe1\u606f\uff1a",value:g,onChange:P})})]})})}var Cn=(0,t.memo)(yn);function Sn(e){var n=(0,s.I0)(),r=(0,s.v9)((function(e){return e.app.account})),a=(0,t.useState)(!1),c=(0,o.Z)(a,2),i=c[0],u=c[1],f=(0,t.useRef)(i),p=(0,t.useState)(!1),h=(0,o.Z)(p,2),x=h[0],m=h[1],v=(0,t.useState)(0),b=(0,o.Z)(v,2),g=b[0],k=b[1],Z=(0,t.useState)(0),j=(0,o.Z)(Z,2),w=j[0],y=j[1],C=(0,t.useState)(0),S=(0,o.Z)(C,2),N=S[0],P=S[1],T=(0,t.useState)(0),O=(0,o.Z)(T,2),E=O[0],_=O[1];console.log("FeeModal render"),(0,t.useEffect)((function(){u(e.visible)}),[e.visible]);var D=(0,t.useCallback)((function(){m(!1),u(!1),e.handleCloseDialog(!1)}),[e]),I=(0,t.useCallback)((function(){}),[]),R=(0,t.useCallback)((0,l.Z)(d().mark((function t(){var a,s,c,i,l,f,p;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.name,s=r.permissions,c={actions:[{account:"dfstownlease",name:"setfee",authorization:[{actor:a,permission:s}],data:{rent_fee:We()(g).toFixed(4,3)+" DCASH",service_fee:We()(w).toFixed(4,3)+" DCASH",reward_fee:We()(N).toFixed(4,3)+" DCASH",reward_time:parseInt(E)}}]},m(!0),t.next=6,Re.transact(c);case 6:if(i=t.sent,l=(0,o.Z)(i,2),f=l[0],p=l[1],!f){t.next=16;break}return Q.ZP.error(qe(f.toString()),5),console.log(f),m(!1),n(A(qe(f.toString()))),t.abrupt("return");case 16:p&&(m(!1),Q.ZP.success("Success"),u(!1),e.handleCloseDialog(!1),console.log(p));case 17:case"end":return t.stop()}}),t)}))),[r,g,w,N,E,n,e]),F=(0,t.useCallback)((function(e){k(e.target.value)}),[]),L=(0,t.useCallback)((function(e){y(e.target.value)}),[]),z=(0,t.useCallback)((function(e){P(e.target.value)}),[]),Y=(0,t.useCallback)((function(e){_(e.target.value)}),[]);return(0,t.useEffect)((function(){f.current=i,i&&I()}),[i,I]),(0,ze.jsx)(Ae.Z,{title:"\u8d39\u7528\u64cd\u4f5c",visible:i,width:"94%",bodyStyle:{padding:"0px 24px"},onOk:R,onCancel:D,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,ze.jsxs)(ce.Z,{size:"large",spinning:x,children:[(0,ze.jsx)("div",{className:"rmt-3 flexsc",children:(0,ze.jsx)(wn.Z,{addonBefore:"\u79df\u7528\u8d39\uff1a",addonAfter:"DCASH",value:g,onChange:F})}),(0,ze.jsx)("div",{className:"rmt-3 flexsc",children:(0,ze.jsx)(wn.Z,{addonBefore:"\u670d\u52a1\u8d39\uff1a",addonAfter:"DCASH",value:w,onChange:L})}),(0,ze.jsx)("div",{className:"rmt-3 flexsc",children:(0,ze.jsx)(wn.Z,{addonBefore:"\u5956\u52b1\u8d39\uff1a",addonAfter:"DCASH",value:N,onChange:z})}),(0,ze.jsx)("div",{className:"rmt-3 rmb-3 flexsc",children:(0,ze.jsx)(wn.Z,{addonBefore:"\u5956\u52b1\u65f6\u95f4\uff1a",value:E,onChange:Y})})]})})}var Nn=(0,t.memo)(Sn);function Pn(e){var n=(0,s.v9)((function(e){return e.app.log})),r=(0,t.useState)(!1),a=(0,o.Z)(r,2),c=a[0],i=a[1],l=(0,t.useRef)(c),u=(0,s.I0)();console.log("LogModal render"),(0,t.useEffect)((function(){i(e.visible)}),[e.visible]);var d=(0,t.useCallback)((function(){i(!1),e.handleCloseDialog(!1)}),[e]),f=(0,t.useCallback)((function(){}),[]),p=(0,t.useCallback)((function(){u(F())}),[u]);return(0,t.useEffect)((function(){l.current=c,c&&f()}),[c,f]),(0,ze.jsx)(Ae.Z,{title:"\u65e5\u5fd7\u8bb0\u5f55",visible:c,width:"94%",bodyStyle:{padding:"0px 24px"},onOk:p,onCancel:d,cancelText:"\u53d6\u6d88",okText:"\u6e05\u9664",transitionName:"",maskTransitionName:"",children:(0,ze.jsx)("div",{className:"rmt-3 rmb-3",children:n?n.map((function(e,n){return(0,ze.jsx)("div",{children:"#"+e},n)})):(0,ze.jsx)(ze.Fragment,{})})})}var Tn=(0,t.memo)(Pn),On=r(91333);function En(e){var n=(0,s.v9)((function(e){return e.app.myLoadOptions})),r=(0,s.v9)((function(e){return e.app.marketLoadOptions})),a=(0,s.v9)((function(e){return e.app.nftChinese})),c=(0,s.v9)((function(e){return e.app.nftEnglish})),i=(0,t.useState)(!1),l=(0,o.Z)(i,2),u=l[0],d=l[1],f=(0,t.useRef)(u),p=(0,t.useState)(["\u571f\u5730","\u5976\u725b","\u7ef5\u7f8a","\u9e21","\u9762\u5305\u574a","\u5b9d\u77f3\u5de5\u5382","\u9972\u6599\u5382","\u7eba\u7ec7\u5382","\u4e73\u5236\u54c1\u5e97","\u88c1\u7f1d\u5e97","\u5236\u7cd6\u5382","\u51b0\u6dc7\u6dcb\u5e97"])[0],h=(0,t.useState)(["\u571f\u5730","\u5976\u725b","\u7ef5\u7f8a","\u9e21","\u9762\u5305\u574a","\u5b9d\u77f3\u5de5\u5382","\u9972\u6599\u5382","\u7eba\u7ec7\u5382","\u4e73\u5236\u54c1\u5e97","\u88c1\u7f1d\u5e97","\u5236\u7cd6\u5382","\u51b0\u6dc7\u6dcb\u5e97"])[0],x=(0,t.useState)(n.map((function(e){return a[e]}))),m=(0,o.Z)(x,2),v=m[0],b=m[1],g=(0,t.useState)(r.map((function(e){return a[e]}))),k=(0,o.Z)(g,2),Z=k[0],j=k[1],w=(0,t.useState)(!!v.length&&v.length<h.length),y=(0,o.Z)(w,2),C=y[0],S=y[1],N=(0,t.useState)(!!Z.length&&Z.length<h.length),P=(0,o.Z)(N,2),T=P[0],O=P[1],E=(0,t.useState)(v.length===p.length),_=(0,o.Z)(E,2),D=_[0],I=_[1],R=(0,t.useState)(Z.length===h.length),A=(0,o.Z)(R,2),F=A[0],L=A[1],z=(0,s.I0)();console.log("LoadModal render");var Y=(0,t.useCallback)((function(e){b(e),S(!!e.length&&e.length<p.length),I(e.length===p.length)}),[b,S,I,p]),G=(0,t.useCallback)((function(e){j(e),O(!!e.length&&e.length<h.length),L(e.length===h.length)}),[j,O,L,h]),B=(0,t.useCallback)((function(e){b(e.target.checked?p:[]),S(!1),I(e.target.checked)}),[b,S,I,p]),M=(0,t.useCallback)((function(e){j(e.target.checked?h:[]),O(!1),L(e.target.checked)}),[j,O,L,h]);(0,t.useEffect)((function(){d(e.visible)}),[e.visible]);var U=(0,t.useCallback)((function(){d(!1),e.handleCloseDialog(!1)}),[e]),J=(0,t.useCallback)((function(){}),[]),W=(0,t.useCallback)((function(){Q.ZP.success("Success"),d(!1),e.handleCloseDialog(!1),z(H(v.map((function(e){return c[e]})),Z.map((function(e){return c[e]})))),setTimeout((function(){return window.location.reload()}),300)}),[z,v,Z,c,e]);return(0,t.useEffect)((function(){f.current=u,u&&J()}),[u,J]),(0,ze.jsx)(Ae.Z,{title:"\u52a0\u8f7d\u8bbe\u7f6e",visible:u,width:"94%",style:{top:"50px"},bodyStyle:{padding:"0px 24px"},onOk:W,onCancel:U,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,ze.jsxs)("div",{className:"rmt-3 rmb-3",children:[(0,ze.jsx)(ae.Z,{indeterminate:C,onChange:B,checked:D,children:(0,ze.jsx)("span",{className:"fw-bolder",children:"\u6211\u7684NFT"})}),(0,ze.jsx)("div",{className:"rmt-2",children:(0,ze.jsx)(ae.Z.Group,{options:p,value:v,onChange:Y})}),(0,ze.jsx)(On.Z,{}),(0,ze.jsx)(ae.Z,{indeterminate:T,onChange:M,checked:F,children:(0,ze.jsx)("span",{className:"fw-bolder",children:"\u79df\u7528\u5e02\u573a"})}),(0,ze.jsx)("div",{className:"rmt-2",children:(0,ze.jsx)(ae.Z.Group,{options:h,value:Z,onChange:G})})]})})}var _n=(0,t.memo)(En);function Dn(e){var n=(0,t.useState)(!1),r=(0,o.Z)(n,2),a=r[0],c=r[1],i=(0,t.useRef)(a),l=(0,s.I0)();console.log("UpdateModal render"),(0,t.useEffect)((function(){c(e.visible)}),[e.visible]);var u=(0,t.useCallback)((function(){c(!1),e.handleCloseDialog(!1)}),[e]),d=(0,t.useCallback)((function(){l(B(e.version))}),[l,e]),f=(0,t.useCallback)((function(){c(!1),e.handleCloseDialog(!1)}),[e]);return(0,t.useEffect)((function(){i.current=a,a&&d()}),[a,d]),(0,ze.jsx)(Ae.Z,{title:"\u66f4\u65b0\u8bb0\u5f55",visible:a,width:"94%",bodyStyle:{padding:"0px 24px"},onOk:f,onCancel:u,cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",transitionName:"",maskTransitionName:"",children:(0,ze.jsxs)("div",{className:"rmt-3 rmb-3",children:[(0,ze.jsx)("div",{className:"text-red",children:'V1.4.0@2022-03-19 \u589e\u52a0"\u52a0\u8f7d\u8bbe\u7f6e"\u548cTextLoop\u7684\u529f\u80fd'}),(0,ze.jsx)("div",{children:"V1.3.0@2022-03-17 \u589e\u52a0\u5237\u65b0\u7684\u529f\u80fd"}),(0,ze.jsx)("div",{children:"V1.2.0@2022-03-15 \u589e\u52a0\u6570\u91cf\u663e\u793a"}),(0,ze.jsx)("div",{children:"V1.1.1@2022-03-14 \u4fee\u590d\u5b8c\u6210\u65f6\u95f4\u663e\u793a\u95ee\u9898"}),(0,ze.jsx)("div",{children:"V1.1.0@2022-03-14 \u589e\u52a0Loading\u663e\u793a"}),(0,ze.jsx)("div",{children:"V1.0.1@2022-03-13 \u4fee\u590d\u672a\u767b\u9646\u7684\u65f6\u5019\uff0c\u5207\u6362tab\u65f6\u524d\u7aef\u4f1a\u62a5\u9519\u7684\u95ee\u9898"})]})})}var In=(0,t.memo)(Dn);var Rn=function(){console.log("App render");var e="V1.4.0",n=(0,s.v9)((function(e){return e.app.account})),r=(0,s.v9)((function(e){return e.app.assets})),a=(0,s.v9)((function(e){return e.app.chinese})),u=(0,s.v9)((function(e){return e.app.freeCpu})),f=(0,s.v9)((function(e){return e.app.delay})),p=(0,s.v9)((function(e){return e.app.myLoadOptions})),x=(0,s.v9)((function(e){return e.app.marketLoadOptions})),m=(0,s.v9)((function(e){return e.app.lastVersion})),v=(0,s.I0)(),b=(0,t.useState)(!1),g=(0,o.Z)(b,2),k=g[0],Z=g[1],j=(0,t.useState)(!1),w=(0,o.Z)(j,2),y=w[0],C=w[1],S=(0,t.useState)(!1),N=(0,o.Z)(S,2),P=N[0],T=N[1],O=(0,t.useState)(!1),_=(0,o.Z)(O,2),F=_[0],L=_[1],z=(0,t.useState)(!1),G=(0,o.Z)(z,2),H=G[0],B=G[1],M=(0,t.useState)(!1),U=(0,o.Z)(M,2),J=U[0],W=U[1],q=(0,t.useState)(!1),K=(0,o.Z)(q,2),V=K[0],de=K[1],fe=(0,t.useState)(!1),pe=(0,o.Z)(fe,2),he=pe[0],xe=pe[1],me=(0,t.useState)(!1),ve=(0,o.Z)(me,2),be=ve[0],ge=ve[1],ke=(0,t.useState)(!1),Ze=(0,o.Z)(ke,2),je=Ze[0],ye=Ze[1],Ce=(0,t.useState)("Loading 0%"),Se=(0,o.Z)(Ce,2),Ne=Se[0],Pe=Se[1],Te=(0,t.useState)(!1),Oe=(0,o.Z)(Te,2),Ee=Oe[0],_e=Oe[1],De=(0,t.useRef)(!1),Ie=(0,t.useRef)({land:[],gemfactory:[],feedmill:[],sugarmill:[],textilemill:[],tailorshop:[],bakery:[],cow:[],sheep:[],chicken:[],dairyshop:[],icecreamshop:[]}),Ae=(0,t.useRef)({land:[],gemfactory:[],feedmill:[],sugarmill:[],textilemill:[],tailorshop:[],bakery:[],cow:[],sheep:[],chicken:[],dairyshop:[],icecreamshop:[]}),Fe=(0,t.useRef)({}),Le=(0,t.useCallback)((0,l.Z)(d().mark((function e(){var r,t,a,s,c,l,u,h,x;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,t="",a=[];case 3:if(!r){e.next=21;break}return s={code:"dfsnftassets",scope:n.name+" ",table:"assets",limit:1e3,json:!0,lower_bound:t},e.next=7,Re.getTableRows(s);case 7:if(c=e.sent,l=(0,o.Z)(c,2),u=l[0],h=l[1],!u){e.next=15;break}return Q.ZP.error("\u83b7\u53d6\u8d26\u53f7NFT\u5931\u8d25",f),v(A("\u83b7\u53d6\u8d26\u53f7NFT\u5931\u8d25")),e.abrupt("return");case 15:x=h.rows||[],r=h.more,t=h.next_key,a.push.apply(a,(0,i.Z)(x)),e.next=3;break;case 21:a.forEach((function(e){e.level=null,e.task={countDown:0,exist:!1},e.multiple=1,e.round=1,e.spinning=!1,p.includes(e.collection)&&("land"===e.collection?Ie.current.land.push(e):"gemfactory"===e.collection?Ie.current.gemfactory.push(e):"feedmill"===e.collection?Ie.current.feedmill.push(e):"bakery"===e.collection?Ie.current.bakery.push(e):"cow"===e.collection?Ie.current.cow.push(e):"sheep"===e.collection?Ie.current.sheep.push(e):"chicken"===e.collection?Ie.current.chicken.push(e):"tailorshop"===e.collection?Ie.current.tailorshop.push(e):"textilemill"===e.collection?Ie.current.textilemill.push(e):"sugarmill"===e.collection?Ie.current.sugarmill.push(e):"dairyshop"===e.collection?Ie.current.dairyshop.push(e):"icecreamshop"===e.collection&&Ie.current.icecreamshop.push(e))}));case 22:case"end":return e.stop()}}),e)}))),[n.name,v,f,p]),Ye=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,a,s,i,l,u,p,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,c.Z)(n),e.prev=1,r.s();case 3:if((t=r.n()).done){e.next=23;break}return a=t.value,s={code:"dfsmetaverse",scope:a.id,table:"stats",json:!0},e.next=8,Re.getTableRows(s);case 8:if(i=e.sent,l=(0,o.Z)(i,2),u=l[0],p=l[1],!u){e.next=16;break}return Q.ZP.error("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25",f),v(A("\u83b7\u53d6NFT\u7b49\u7ea7\u5931\u8d25")),e.abrupt("return");case 16:if((h=p.rows||[]).length){e.next=19;break}return e.abrupt("continue",21);case 19:a.level=h[0].val,a.multiple=a.level;case 21:e.next=3;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),r.e(e.t0);case 28:return e.prev=28,r.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[1,25,28,31]])})));return function(n){return e.apply(this,arguments)}}(),[v,f]),He=(0,t.useCallback)((0,l.Z)(d().mark((function e(){var n,r,t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1,e.t0=d().keys(Ie.current);case 2:if((e.t1=e.t0()).done){e.next=9;break}return r=e.t1.value,e.next=6,Ye(Ie.current[r]);case 6:Pe("Loading 20%+"+n++),e.next=2;break;case 9:e.t2=d().keys(Ae.current);case 10:if((e.t3=e.t2()).done){e.next=17;break}return t=e.t3.value,e.next=14,Ye(Ae.current[t]);case 14:Pe("Loading 20%+"+n++),e.next=10;break;case 17:case"end":return e.stop()}}),e)}))),[Ye]),Be=(0,t.useCallback)(function(){var e=(0,l.Z)(d().mark((function e(n){var r,t,s,i,l,u,p,x,m,b,g,k;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,c.Z)(n),e.prev=1,r.s();case 3:if((t=r.n()).done){e.next=31;break}return s=t.value,i={code:"dfsmetaverse",scope:"dfsmetaverse",table:"tasks",lower_bound:s.id,upper_bound:s.id,json:!0},e.next=8,Re.getTableRows(i);case 8:if(l=e.sent,u=(0,o.Z)(l,2),p=u[0],x=u[1],!p){e.next=16;break}return Q.ZP.error("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25",f),v(A("\u83b7\u53d6\u4efb\u52a1\u5931\u8d25")),e.abrupt("return");case 16:if((m=x.rows||[]).length){e.next=19;break}return e.abrupt("continue",29);case 19:s.task=m[0],s.task.create_time=h()("".concat(s.task.create_time,".000+0000")).format(),b=h()("".concat(s.task.mature_time,".000+0000")),s.task.mature_time=b.format(),s.task.end_time=b.format("YYYY-MM-DD HH:mm:ss"),g=b.diff(h()()),s.task.countDown=g<=0?0:g,s.task.exist=!0,k=s.task.product.split(" "),s.task.product={num:parseInt(k[0]).toFixed(0),name:a[k[1]]};case 29:e.next=3;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(1),r.e(e.t0);case 36:return e.prev=36,r.f(),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[1,33,36,39]])})));return function(n){return e.apply(this,arguments)}}(),[a,v,f]),Me=(0,t.useCallback)((0,l.Z)(d().mark((function e(){var n,r,t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1,e.t0=d().keys(Ie.current);case 2:if((e.t1=e.t0()).done){e.next=9;break}return r=e.t1.value,e.next=6,Be(Ie.current[r]);case 6:Pe("Loading 30%+"+n++),e.next=2;break;case 9:e.t2=d().keys(Ae.current);case 10:if((e.t3=e.t2()).done){e.next=17;break}return t=e.t3.value,e.next=14,Be(Ae.current[t]);case 14:Pe("Loading 30%+"+n++),e.next=10;break;case 17:case"end":return e.stop()}}),e)}))),[Be]),Ue=(0,t.useCallback)((0,l.Z)(d().mark((function e(){var n,r,t,a,s,c,l,u,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,r="",t=[];case 3:if(!n){e.next=21;break}return a={code:"dfstownlease",scope:"dfstownlease",table:"assets",limit:1e3,json:!0,lower_bound:r},e.next=7,Re.getTableRows(a);case 7:if(s=e.sent,c=(0,o.Z)(s,2),l=c[0],u=c[1],!l){e.next=15;break}return Q.ZP.error("\u83b7\u53d6rent assets\u5931\u8d25",f),v(A("\u83b7\u53d6rent assets\u5931\u8d25")),e.abrupt("return");case 15:p=u.rows||[],n=u.more,r=u.next_key,t.push.apply(t,(0,i.Z)(p)),e.next=3;break;case 21:t.forEach((function(e){e.level=null,e.task={countDown:0,exist:!1},e.multiple=1,e.round=1,e.spinning=!1,x.includes(e.collection)&&("land"===e.collection?Ae.current.land.push(e):"gemfactory"===e.collection?Ae.current.gemfactory.push(e):"feedmill"===e.collection?Ae.current.feedmill.push(e):"bakery"===e.collection?Ae.current.bakery.push(e):"cow"===e.collection?Ae.current.cow.push(e):"sheep"===e.collection?Ae.current.sheep.push(e):"chicken"===e.collection?Ae.current.chicken.push(e):"tailorshop"===e.collection?Ae.current.tailorshop.push(e):"textilemill"===e.collection?Ae.current.textilemill.push(e):"sugarmill"===e.collection?Ae.current.sugarmill.push(e):"dairyshop"===e.collection?Ae.current.dairyshop.push(e):"icecreamshop"===e.collection&&Ae.current.icecreamshop.push(e))}));case 22:case"end":return e.stop()}}),e)}))),[v,f,x]),Je=(0,t.useCallback)((0,l.Z)(d().mark((function e(){var n,r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={code:"dfsmetaverse",scope:"dfsmetaverse",table:"works",limit:1e3,json:!0},e.next=3,Re.getTableRows(n);case 3:if(r=e.sent,t=(0,o.Z)(r,2),a=t[0],s=t[1],!a){e.next=11;break}return Q.ZP.error("\u83b7\u53d6\u5de5\u4f5c\u5931\u8d25",f),v(A("\u83b7\u53d6\u5de5\u4f5c\u5931\u8d25")),e.abrupt("return");case 11:if((c=s.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:v(D(c));case 15:case"end":return e.stop()}}),e)}))),[v,f]),We=(0,t.useCallback)((0,l.Z)(d().mark((function e(){var r,t,a,s,c,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfsfarmitems",scope:n.name+" ",table:"accounts",limit:1e3,json:!0},e.next=3,Re.getTableRows(r);case 3:if(t=e.sent,a=(0,o.Z)(t,2),s=a[0],c=a[1],!s){e.next=11;break}return Q.ZP.error("\u83b7\u53d6\u8d26\u53f7\u8d44\u4ea7\u5931\u8d25",f),v(A("\u83b7\u53d6\u8d26\u53f7\u8d44\u4ea7\u5931\u8d25")),e.abrupt("return");case 11:if((i=c.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:i.forEach((function(e){var n=e.balance.split(" ");Fe.current[n[1]]=n[0]}));case 15:case"end":return e.stop()}}),e)}))),[n.name,v,f]),Ke=(0,t.useCallback)((0,l.Z)(d().mark((function e(){var r,t,a,s,c,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"usdxusdxusdx",scope:n.name+" ",table:"accounts",lower_bound:"USDC",upper_bound:"USDC",json:!0},e.next=3,Re.getTableRows(r);case 3:if(t=e.sent,a=(0,o.Z)(t,2),s=a[0],c=a[1],!s){e.next=11;break}return Q.ZP.error("\u83b7\u53d6\u8d26\u53f7USDC\u8d44\u4ea7\u5931\u8d25",f),v(A("\u83b7\u53d6\u8d26\u53f7USDC\u8d44\u4ea7\u5931\u8d25")),e.abrupt("return");case 11:if((i=c.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:i.forEach((function(e){var n=e.balance.split(" ");Fe.current[n[1]]=n[0]}));case 15:case"end":return e.stop()}}),e)}))),[n.name,v,f]),Ve=(0,t.useCallback)((0,l.Z)(d().mark((function e(){var r,t,a,s,c,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"dfxtokenmain",scope:n.name+" ",table:"accounts",lower_bound:"DFG",upper_bound:"DFG",json:!0},e.next=3,Re.getTableRows(r);case 3:if(t=e.sent,a=(0,o.Z)(t,2),s=a[0],c=a[1],!s){e.next=11;break}return Q.ZP.error("\u83b7\u53d6\u8d26\u53f7DFG\u8d44\u4ea7\u5931\u8d25",f),v(A("\u83b7\u53d6\u8d26\u53f7DFG\u8d44\u4ea7\u5931\u8d25")),e.abrupt("return");case 11:if((i=c.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:i.forEach((function(e){var n=e.balance.split(" ");Fe.current[n[1]]=n[0]}));case 15:case"end":return e.stop()}}),e)}))),[n.name,v,f]),Qe=(0,t.useCallback)((0,l.Z)(d().mark((function e(){var r,t,a,s,c,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={code:"tagtokenmain",scope:n.name+" ",table:"accounts",lower_bound:"TAG",upper_bound:"TAG",json:!0},e.next=3,Re.getTableRows(r);case 3:if(t=e.sent,a=(0,o.Z)(t,2),s=a[0],c=a[1],!s){e.next=11;break}return Q.ZP.error("\u83b7\u53d6\u8d26\u53f7TAG\u8d44\u4ea7\u5931\u8d25",f),v(A("\u83b7\u53d6\u8d26\u53f7TAG\u8d44\u4ea7\u5931\u8d25")),e.abrupt("return");case 11:if((i=c.rows||[]).length){e.next=14;break}return e.abrupt("return");case 14:i.forEach((function(e){var n=e.balance.split(" ");Fe.current[n[1]]=n[0]}));case 15:case"end":return e.stop()}}),e)}))),[n.name,v,f]),Xe=(0,t.useCallback)((0,l.Z)(d().mark((function e(){var n,r,t,a,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={code:"dfstownlease",scope:"dfstownlease",table:"global",limit:1e3,json:!0},e.next=3,Re.getTableRows(n);case 3:if(r=e.sent,t=(0,o.Z)(r,2),a=t[0],s=t[1],!a){e.next=11;break}return Q.ZP.error("\u83b7\u53d6\u5168\u5c40\u914d\u7f6e\u4fe1\u606f\u5931\u8d25",f),v(A("\u83b7\u53d6\u5168\u5c40\u914d\u7f6e\u4fe1\u606f\u5931\u8d25")),e.abrupt("return");case 11:if((c=s.rows||[]).length){e.next=16;break}return Q.ZP.error("\u83b7\u53d6\u5168\u5c40\u914d\u7f6e\u4fe1\u606f\u4e3a\u7a7a",f),v(A("\u83b7\u53d6\u5168\u5c40\u914d\u7f6e\u4fe1\u606f\u4e3a\u7a7a")),e.abrupt("return");case 16:v(R(c[0]));case 17:case"end":return e.stop()}}),e)}))),[v,f]),$e=(0,t.useCallback)((function(){we().get("https://api.eospowerup.io/freePowerup/"+n.name).then((function(e){"success"===e.data.result.status?X.Z.success({message:"\u6210\u529f",description:"\u6bcf\u4e2a\u8d26\u53f7\u6bcf\u5929\u53ef\u4ee5\u514d\u8d39PowerUp 2\u6b21\uff0c\u91cd\u7f6e\u65f6\u95f4\u4e3a\uff1a\n"+h()(e.data.rateLimit.resetTime).format("YYYY-MM-DD HH:mm:ss")}):"reachedFreeQuota"===e.data.result.status?X.Z.error({message:"\u5931\u8d25",description:"\u8d26\u53f7\u5df2PowerUp 2\u6b21\uff0c\u91cd\u7f6e\u65f6\u95f4\u4e3a\uff1a\n"+h()(e.data.rateLimit.resetTime).format("YYYY-MM-DD HH:mm:ss")}):(X.Z.error({message:"\u5931\u8d25",description:e.data.result.status}),v(A(e.data.result.status)))}),(function(e){var n;n=e instanceof Error?e.message:e.response?JSON.stringify(e.response.data):e.request?"no response":"object"==typeof e?JSON.stringify(e):e,X.Z.error({message:"\u5931\u8d25",description:n}),v(A(n))}))}),[n,v]),en=(0,t.useCallback)((function(){C(!1),L(!1),B(!1),W(!1),de(!1),xe(!1),ge(!1)}),[]),nn=(0,t.useCallback)((function(){return(0,ze.jsxs)("div",{className:"flexas",children:[(0,ze.jsxs)("div",{children:[(0,ze.jsxs)("div",{children:["\u9ea6\u5b50\uff1a",parseInt(r.WHEAT)||"0"]}),(0,ze.jsxs)("div",{children:["\u7389\u7c73\uff1a",parseInt(r.CORN)||"0"]}),(0,ze.jsxs)("div",{children:["\u80e1\u841d\u535c\uff1a",parseInt(r.CARROT)||"0"]}),(0,ze.jsxs)("div",{children:["\u725b\u9972\u6599\uff1a",parseInt(r.COWFOOD)||"0"]}),(0,ze.jsxs)("div",{children:["\u9e21\u9972\u6599\uff1a",parseInt(r.CHKFOOD)||"0"]}),(0,ze.jsxs)("div",{children:["\u7f8a\u9972\u6599\uff1a",parseInt(r.SHPFOOD)||"0"]}),(0,ze.jsxs)("div",{children:["\u725b\u5976\uff1a",parseInt(r.MILK)||"0"]}),(0,ze.jsxs)("div",{children:["\u9e21\u86cb\uff1a",parseInt(r.EGG)||"0"]}),(0,ze.jsxs)("div",{children:["\u7f8a\u6bdb\uff1a",parseInt(r.WOOL)||"0"]}),(0,ze.jsxs)("div",{children:["\u9762\u5305\uff1a",parseInt(r.BREAD)||"0"]}),(0,ze.jsxs)("div",{children:["\u66f2\u5947\uff1a",parseInt(r.COOKIE)||"0"]}),(0,ze.jsxs)("div",{children:["\u86cb\u7cd5\uff1a",parseInt(r.CAKE)||"0"]}),(0,ze.jsxs)("div",{children:["\u7518\u8517\uff1a",parseInt(r.SUGCANE)||"0"]}),(0,ze.jsxs)("div",{children:["\u68c9\u82b1\uff1a",parseInt(r.COTTON)||"0"]}),(0,ze.jsxs)("div",{children:["\u7802\u7cd6\uff1a",parseInt(r.SUGAR)||"0"]}),(0,ze.jsxs)("div",{children:["\u7cd6\u6d46\uff1a",parseInt(r.SYRUP)||"0"]}),(0,ze.jsxs)("div",{children:["\u7126\u7cd6\uff1a",parseInt(r.CARAMEL)||"0"]})]}),(0,ze.jsxs)("div",{children:[(0,ze.jsxs)("div",{children:["\u68c9\u5e03\uff1a",parseInt(r.CLOTH)||"0"]}),(0,ze.jsxs)("div",{children:["\u7eba\u7eb1\uff1a",parseInt(r.YARN)||"0"]}),(0,ze.jsxs)("div",{children:["\u4e1d\u7ef8\uff1a",parseInt(r.SILK)||"0"]}),(0,ze.jsxs)("div",{children:["\u886c\u886b\uff1a",parseInt(r.SHIRT)||"0"]}),(0,ze.jsxs)("div",{children:["\u6bdb\u8863\uff1a",parseInt(r.SWEATER)||"0"]}),(0,ze.jsxs)("div",{children:["\u5916\u5957\uff1a",parseInt(r.COAT)||"0"]}),(0,ze.jsxs)("div",{children:["\u8349\u8393\uff1a",parseInt(r.BERRY)||"0"]}),(0,ze.jsxs)("div",{children:["\u53ef\u53ef\uff1a",parseInt(r.COCOS)||"0"]}),(0,ze.jsxs)("div",{children:["\u897f\u7ea2\u67ff\uff1a",parseInt(r.TOMATO)||"0"]}),(0,ze.jsxs)("div",{children:["\u5976\u6cb9\uff1a",parseInt(r.CREAM)||"0"]}),(0,ze.jsxs)("div",{children:["\u5976\u916a\uff1a",parseInt(r.CHEESE)||"0"]}),(0,ze.jsxs)("div",{children:["\u9ec4\u6cb9\uff1a",parseInt(r.BUTTER)||"0"]}),(0,ze.jsxs)("div",{children:["\u9178\u5976\uff1a",parseInt(r.YOGURT)||"0"]}),(0,ze.jsxs)("div",{children:["\u51b0\u6dc7\u6dcb\uff1a",parseInt(r.ICREAM)||"0"]}),(0,ze.jsxs)("div",{children:["\u51b0\u68d2\uff1a",parseInt(r.ILOLLY)||"0"]}),(0,ze.jsxs)("div",{children:["\u51bb\u9178\u5976\uff1a",parseInt(r.FROYO)||"0"]})]}),(0,ze.jsxs)("div",{children:[(0,ze.jsxs)("div",{children:["\u7eff\u949e\uff1a",r.DCASH||"0"]}),(0,ze.jsxs)("div",{children:["\u7ea2\u5b9d\u77f3\uff1a",parseInt(r.RUBY)||"0"]}),(0,ze.jsxs)("div",{children:["\u7eff\u5b9d\u77f3\uff1a",parseInt(r.BERYL)||"0"]}),(0,ze.jsxs)("div",{children:["\u9ec4\u5b9d\u77f3\uff1a",parseInt(r.TOPAZ)||"0"]}),(0,ze.jsxs)("div",{children:["\u7d2b\u6c34\u6676\uff1a",parseInt(r.AMTHYST)||"0"]}),(0,ze.jsxs)("div",{children:["\u5c0f\u5587\u53ed\uff1a",parseInt(r.VOICE)||"0"]}),(0,ze.jsxs)("div",{children:["\u4f53\u9a8c\u5361\uff1a",parseInt(r.LAND)||"0"]}),(0,ze.jsxs)("div",{children:["\u5316\u80a5\uff1a",parseInt(r.FTZ)||"0"]}),(0,ze.jsxs)("div",{children:["\u788e\u7247\uff1a",parseInt(r.CHIP)||"0"]}),(0,ze.jsxs)("div",{children:["DFS: ",r.DFS||"0"]}),(0,ze.jsxs)("div",{children:["USDC\uff1a",r.USDC||"0"]}),(0,ze.jsxs)("div",{children:["DFG\uff1a",r.DFG||"0"]}),(0,ze.jsxs)("div",{children:["TAG\uff1a",r.TAG||"0"]})]})]})}),[r]),rn=(0,t.useCallback)((0,l.Z)(d().mark((function e(){var n,r,t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!De.current){e.next=2;break}return e.abrupt("return");case 2:return De.current=!0,e.next=5,Re.init("dfstownlease");case 5:n=e.sent,r=(0,o.Z)(n,1),(t=r[0])?(Q.ZP.error(t.toString(),f),v(A(qe(t.toString())))):(Z(!0),ye(!0)),De.current=!1;case 10:case"end":return e.stop()}}),e)}))),[v,f]),an=(0,t.useCallback)((function(e){v(E(e.target.checked))}),[v]),sn=(0,t.useCallback)((function(){return(0,ze.jsxs)(oe.Z,{delay:3e3,mask:!0,children:[(0,ze.jsx)("div",{children:"\u5df2\u652f\u6301\u81ea\u5b9a\u4e49\u52a0\u8f7d\u5185\u5bb9\uff0c\u4f18\u5316\u66f4\u65b0\u65b9\u5f0f"}),(0,ze.jsx)("div",{children:"\u5927\u5bb6\u6709\u7a7a\u591a\u591a\u63a8\u5e7f"})]})}),[]);return(0,t.useEffect)((function(){rn(),v(E(!1))}),[rn,v]),(0,t.useEffect)((function(){function e(){return(e=(0,l.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=37;break}return _e(!0),Pe("Loading 0%"),e.next=5,Le();case 5:return Pe("Loading 10%"),e.next=8,Ue();case 8:return Pe("Loading 20%+0"),e.next=11,He();case 11:return Pe("Loading 30%+0"),e.next=14,Me();case 14:return Pe("Loading 40%"),e.next=17,Je();case 17:return Pe("Loading 50%"),e.next=20,We();case 20:return Pe("Loading 60%"),e.next=23,Ve();case 23:return Pe("Loading 70%"),e.next=26,Ke();case 26:return Pe("Loading 80%"),e.next=29,Qe();case 29:return Pe("Loading 90%"),e.next=32,Xe();case 32:Pe("Loading 100%"),_e(!1),v(Y(Ie.current,Ae.current)),v(I(Fe.current)),ye(!1);case 37:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[k,Le,Ue,He,Me,Je,v,We,Ve,Ke,Qe,Xe]),(0,ze.jsxs)("div",{className:"main rpx-2",children:[(0,ze.jsx)($.Z,{banner:!0,closable:!0,message:(0,ze.jsx)(sn,{})}),(0,ze.jsx)(ee.Z,{children:(0,ze.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[k?(0,ze.jsx)("div",{children:n.name}):(0,ze.jsx)(ne.Z,{type:"primary",onClick:rn,children:"\u767b \u9646"}),(0,ze.jsx)("div",{children:(0,ze.jsx)(re.Z,{trigger:["click"],arrow:!0,overlay:(0,ze.jsxs)(te.Z,{children:[(0,ze.jsxs)(te.Z.Item,{disabled:"hazdqmjqgige"!==n.name,children:[(0,ze.jsx)("span",{className:"rmr-1",children:"\u514dCPU"}),(0,ze.jsx)(ae.Z,{style:{alignItems:"center"},checked:u,onChange:an})]},"0"),(0,ze.jsx)(te.Z.Item,{onClick:function(){return C(!0)},children:"\u8282\u70b9\u9009\u62e9"},"1"),(0,ze.jsx)(te.Z.Item,{onClick:function(){return xe(!0)},children:(0,ze.jsx)(se.Z,{dot:!0,children:"\u52a0\u8f7d\u8bbe\u7f6e"})},"2"),(0,ze.jsx)(te.Z.Item,{disabled:!0,children:"\u4f7f\u7528\u8bf4\u660e"},"3"),(0,ze.jsx)(te.Z.Item,{disabled:!k,onClick:function(){return T(!0)},children:"\u6211\u7684\u8d44\u4ea7"},"4"),(0,ze.jsx)(te.Z.Item,{disabled:!k,onClick:$e,children:"PowerUp"},"5"),(0,ze.jsx)(te.Z.Item,{disabled:!k,onClick:function(){return L(!0)},children:"\u6211\u7684\u5956\u52b1"},"6"),(0,ze.jsx)(te.Z.Item,{disabled:!k||"dfstownlease"!==n.name,onClick:function(){return B(!0)},children:"\u9501\u5b9a\u5408\u7ea6"},"7"),(0,ze.jsx)(te.Z.Item,{disabled:!k||"dfstownlease"!==n.name,onClick:function(){return W(!0)},children:"\u8bbe\u7f6e\u8d39\u7528"},"8"),(0,ze.jsx)(te.Z.Item,{onClick:function(){return de(!0)},children:"\u65e5\u5fd7\u4fe1\u606f"},"10"),(0,ze.jsx)(te.Z.Item,{onClick:function(){return ge(!0)},children:(0,ze.jsx)(se.Z,{dot:m!==e,children:e})},"11")]}),children:(0,ze.jsx)(se.Z,{dot:m!==e,children:(0,ze.jsx)(ue.Z,{})})})})]})}),(0,ze.jsx)(ce.Z,{tip:Ne,size:"large",spinning:Ee,children:(0,ze.jsxs)(ie.Z,{tabBarStyle:{margin:"0 0 0 0"},defaultActiveKey:"4",centered:!0,children:[(0,ze.jsx)(ie.Z.TabPane,{tab:"\u6211\u7684NFT",children:(0,ze.jsx)(tn,{loading:je})},"1"),(0,ze.jsx)(ie.Z.TabPane,{tab:"\u6211\u7684\u51fa\u79df",children:(0,ze.jsx)(xn,{loading:je})},"2"),(0,ze.jsx)(ie.Z.TabPane,{tab:"\u6211\u7684\u79df\u7528",children:(0,ze.jsx)(vn,{loading:je})},"3"),(0,ze.jsx)(ie.Z.TabPane,{tab:"\u79df\u7528\u5e02\u573a",children:(0,ze.jsx)(kn,{loading:je})},"4")]})}),(0,ze.jsx)(le.Z,{placement:"bottom",closable:!1,height:420,visible:P,onClose:function(){return T(!1)},children:(0,ze.jsx)(nn,{})}),(0,ze.jsx)(Ge,{visible:y,handleCloseDialog:en}),(0,ze.jsx)(jn,{visible:F,handleCloseDialog:en}),(0,ze.jsx)(Cn,{visible:H,handleCloseDialog:en}),(0,ze.jsx)(Nn,{visible:J,handleCloseDialog:en}),(0,ze.jsx)(Tn,{visible:V,handleCloseDialog:en}),(0,ze.jsx)(_n,{visible:he,handleCloseDialog:en}),(0,ze.jsx)(In,{version:e,visible:be,handleCloseDialog:en})]})};a.render((0,ze.jsx)(t.StrictMode,{children:(0,ze.jsx)(s.zt,{store:Ze,children:(0,ze.jsx)(Rn,{})})}),document.getElementById("root"))},83052:function(){},75950:function(){},52361:function(){},94616:function(){}},n={};function r(t){var a=n[t];if(void 0!==a)return a.exports;var s=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.m=e,function(){var e=[];r.O=function(n,t,a,s){if(!t){var c=1/0;for(u=0;u<e.length;u++){t=e[u][0],a=e[u][1],s=e[u][2];for(var i=!0,l=0;l<t.length;l++)(!1&s||c>=s)&&Object.keys(r.O).every((function(e){return r.O[e](t[l])}))?t.splice(l--,1):(i=!1,s<c&&(c=s));if(i){e.splice(u--,1);var o=a();void 0!==o&&(n=o)}}return n}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[t,a,s]}}(),r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,{a:n}),n},r.d=function(e,n){for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e={179:0};r.O.j=function(n){return 0===e[n]};var n=function(n,t){var a,s,c=t[0],i=t[1],l=t[2],o=0;if(c.some((function(n){return 0!==e[n]}))){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(l)var u=l(r)}for(n&&n(t);o<c.length;o++)s=c[o],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(u)},t=self.webpackChunkrent_react=self.webpackChunkrent_react||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=r.O(void 0,[955,654,172],(function(){return r(53155)}));t=r.O(t)}();